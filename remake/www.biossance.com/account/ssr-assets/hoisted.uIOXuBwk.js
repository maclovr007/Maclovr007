import{n as Yn}from"./navigation.Bb7iNi5L.js";import{c as Ji}from"./_commonjsHelpers.DyVB06ra.js";import{u as Xi}from"./index.CqYtIYnf.js";import{g as Zi}from"./index.DVyJoFA0.js";import"./cookie.vF8jeAJE.js";function ie(e,t){return typeof e===t}function rt(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`}function Jn(e,t){try{return e instanceof t}catch{return!1}}const Ce=e=>ie(e,"null"),Xn=e=>ie(e,"string"),Qi=e=>ie(e,"number")&&!isNaN(e)||ie(e,"bigint"),se=e=>!Ce(e)&&ie(e,"object"),Zn=e=>ie(e,"function"),Ne=e=>rt(e,"Array"),er=e=>!se(e)&&!Zn(e),tr=typeof Event<"u",nr=e=>tr&&Jn(e,Event),ir=typeof Error<"u",Qn=e=>ir&&Jn(e,Error),rr=e=>rt(e,"ErrorEvent"),or=e=>rt(e,"DOMError"),sr=e=>rt(e,"DOMException");function ge(e,t){if(e===t)return!0;if(ie(e,"number")&&isNaN(e))return ie(t,"number")&&isNaN(t);const n=Ne(e),i=Ne(t);if(n!==i)return!1;if(n&&i){const s=e.length;if(s!==t.length)return!1;for(let a=s;a--!==0;)if(!ge(e[a],t[a]))return!1;return!0}const r=se(e),o=se(t);if(r!==o)return!1;if(e&&t&&r&&o){const s=Object.keys(e),a=Object.keys(t),u=s.length,m=a.length;if(u!==m)return!1;for(let d of s)if(!a.includes(d))return!1;for(let d of s)if(!ge(e[d],t[d]))return!1;return!0}return!1}function ot(){return Date.now()}function st(){return new Date().toISOString()}function at(e){return new Date(e).toISOString()}var C;(function(e){e.TRACE="trace",e.DEBUG="debug",e.INFO="info",e.LOG="log",e.WARN="warn",e.ERROR="error"})(C||(C={}));const ar=C.LOG,ur=[C.TRACE,C.DEBUG,C.INFO,C.LOG,C.WARN,C.ERROR];function J(){}function cr(e){const{size:t,concurrency:n}=e,i=[];let r=0;const o=()=>{if(r<n&&i.length){const{producer:a,resolve:u,reject:m}=i.shift();r++,a().then(d=>{r--,o(),u(d)},d=>{r--,o(),m(d)})}};return{add:a=>{if(i.length+r>=t)throw new Error("Task buffer full");return new Promise((u,m)=>{i.push({producer:a,resolve:u,reject:m}),o()})}}}const gn="abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ0123456789";function ut(e=10){return Array.from(Array(e)).map(()=>gn[Math.floor(Math.random()*gn.length)]).join("")}const oe=typeof globalThis<"u"?globalThis:typeof global<"u"?global:typeof self<"u"?self:void 0;function lr(e){return oe?.[`__faroBundleId_${e}`]}const dr=250,fr=50;class pr{constructor(t,n){var i,r;this.signalBuffer=[],this.itemLimit=(i=n?.itemLimit)!==null&&i!==void 0?i:fr,this.sendTimeout=(r=n?.sendTimeout)!==null&&r!==void 0?r:dr,this.paused=n?.paused||!1,this.sendFn=t,this.flushInterval=-1,this.paused||this.start(),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&this.flush()})}addItem(t){this.paused||(this.signalBuffer.push(t),this.signalBuffer.length>=this.itemLimit&&this.flush())}start(){this.paused=!1,this.sendTimeout>0&&(this.flushInterval=window.setInterval(()=>this.flush(),this.sendTimeout))}pause(){this.paused=!0,clearInterval(this.flushInterval)}groupItems(t){const n=new Map;return t.forEach(i=>{const r=JSON.stringify(i.meta);let o=n.get(r);o===void 0?o=[i]:o=[...o,i],n.set(r,o)}),Array.from(n.values())}flush(){if(this.paused||this.signalBuffer.length===0)return;this.groupItems(this.signalBuffer).forEach(this.sendFn),this.signalBuffer=[]}}var P;(function(e){e.EXCEPTION="exception",e.LOG="log",e.MEASUREMENT="measurement",e.TRACE="trace",e.EVENT="event"})(P||(P={}));const mr={[P.EXCEPTION]:"exceptions",[P.LOG]:"logs",[P.MEASUREMENT]:"measurements",[P.TRACE]:"traces",[P.EVENT]:"events"};function vr(e,t){return e.some(n=>Xn(n)?t.includes(n):!!t.match(n))}function hr(e){return t=>{if(t.type===P.EXCEPTION&&t.payload){const n=t.payload,i=`${n.type}: ${n.value}`;if(vr(e,i))return null}return t}}function gr(e,t,n,i){var r;t.debug("Initializing transports");const o=[];let s=n.paused,a=[];const u=(...I)=>{t.debug("Adding transports"),I.forEach(g=>{if(t.debug(`Adding "${g.name}" transport`),o.some(M=>M===g)){t.warn(`Transport ${g.name} is already added`);return}g.unpatchedConsole=e,g.internalLogger=t,g.config=n,g.metas=i,o.push(g)})},m=(...I)=>{t.debug(`Adding beforeSendHooks
`,a),I.forEach(g=>{g&&a.push(g)})},d=(...I)=>{t.debug(`Adding ignoreErrorsPatterns
`,I),I.forEach(g=>{g&&a.push(hr(g))})},f=I=>{let g=I;for(const N of a){const M=g.map(N).filter(Boolean);if(M.length===0)return[];g=M}return g},c=I=>{const g=f(I);if(g.length!==0)for(const N of o)t.debug(`Transporting item using ${N.name}
`,g),N.isBatched()&&N.send(g)},p=I=>{var g,N;if(!((g=n.batching)===null||g===void 0)&&g.enabled&&o.every(L=>L.isBatched()))return;const[M]=f([I]);if(M!==void 0)for(const L of o)t.debug(`Transporting item using ${L.name}
`,M),L.isBatched()?!((N=n.batching)===null||N===void 0)&&N.enabled||L.send([M]):L.send(M)};let l;return!((r=n.batching)===null||r===void 0)&&r.enabled&&(l=new pr(c,{sendTimeout:n.batching.sendTimeout,itemLimit:n.batching.itemLimit,paused:s})),{add:u,addBeforeSendHooks:m,addIgnoreErrorsPatterns:d,getBeforeSendHooks:()=>[...a],execute:I=>{var g;s||(!((g=n.batching)===null||g===void 0)&&g.enabled&&l?.addItem(I),p(I))},isPaused:()=>s,pause:()=>{t.debug("Pausing transports"),l?.pause(),s=!0},remove:(...I)=>{t.debug("Removing transports"),I.forEach(g=>{t.debug(`Removing "${g.name}" transport`);const N=o.indexOf(g);if(N===-1){t.warn(`Transport "${g.name}" is not added`);return}o.splice(N,1)})},removeBeforeSendHooks:(...I)=>{a.filter(g=>!I.includes(g))},get transports(){return[...o]},unpause:()=>{t.debug("Unpausing transports"),l?.start(),s=!1}}}var Q;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.VERBOSE=4]="VERBOSE"})(Q||(Q={}));const br="Faro",Vt={debug:J,error:J,info:J,prefix:br,warn:J},ei=Q.ERROR,ct=Object.assign({},console);let Ot=ct;function wr(e){var t;return Ot=(t=e.unpatchedConsole)!==null&&t!==void 0?t:Ot,Ot}function ti(e=ct,t=ei){const n=Vt;return t>Q.OFF&&(n.error=t>=Q.ERROR?function(...i){e.error(`${n.prefix}
`,...i)}:J,n.warn=t>=Q.WARN?function(...i){e.warn(`${n.prefix}
`,...i)}:J,n.info=t>=Q.INFO?function(...i){e.info(`${n.prefix}
`,...i)}:J,n.debug=t>=Q.VERBOSE?function(...i){e.debug(`${n.prefix}
`,...i)}:J),n}let bn=Vt;function yr(e,t){return bn=ti(e,t.internalLoggerLevel),bn}class ni{constructor(){this.unpatchedConsole=ct,this.internalLogger=Vt,this.config={},this.metas={}}logDebug(...t){this.internalLogger.debug(`${this.name}
`,...t)}logInfo(...t){this.internalLogger.info(`${this.name}
`,...t)}logWarn(...t){this.internalLogger.warn(`${this.name}
`,...t)}logError(...t){this.internalLogger.error(`${this.name}
`,...t)}}class Sr extends ni{isBatched(){return!1}getIgnoreUrls(){return[]}}function Er(e){e.transports.add(...e.config.transports),e.transports.addBeforeSendHooks(e.config.beforeSend),e.transports.addIgnoreErrorsPatterns(e.config.ignoreErrors)}function Tr(e,t){var n,i;if(t===void 0)return e;if(e===void 0)return{resourceSpans:t};const r=(n=e.resourceSpans)===null||n===void 0?void 0:n[0];if(r===void 0)return e;const o=r?.scopeSpans||[],s=((i=t?.[0])===null||i===void 0?void 0:i.scopeSpans)||[];return Object.assign(Object.assign({},e),{resourceSpans:[Object.assign(Object.assign({},r),{scopeSpans:[...o,...s]})]})}function kr(e){let t={meta:{}};return e[0]!==void 0&&(t.meta=e[0].meta),e.forEach(n=>{switch(n.type){case P.LOG:case P.EVENT:case P.EXCEPTION:case P.MEASUREMENT:const i=mr[n.type],r=t[i];t=Object.assign(Object.assign({},t),{[i]:r===void 0?[n.payload]:[...r,n.payload]});break;case P.TRACE:t=Object.assign(Object.assign({},t),{traces:Tr(t.traces,n.payload.resourceSpans)});break}}),t}function Ir(e,t,n,i,r,o){let s=null;return{pushEvent:(u,m,d,{skipDedupe:f,spanContext:c,timestampOverwriteMs:p}={})=>{try{const l={meta:i.value,payload:{name:u,domain:d??n.eventDomain,attributes:m,timestamp:p?at(p):st(),trace:c?{trace_id:c.traceId,span_id:c.spanId}:o.getTraceContext()},type:P.EVENT},v={name:l.payload.name,attributes:l.payload.attributes,domain:l.payload.domain};if(!f&&n.dedupe&&!Ce(s)&&ge(v,s)){t.debug(`Skipping event push because it is the same as the last one
`,l.payload);return}s=v,t.debug(`Pushing event
`,l),r.execute(l)}catch(l){t.error("Error pushing event",l)}}}}const ii="Error";let Z;function Or(e,t,n,i,r,o){var s;t.debug("Initializing exceptions API");let a=null;Z=(s=n.parseStacktrace)!==null&&s!==void 0?s:Z;const u=f=>{t.debug("Changing stacktrace parser"),Z=f??Z},m=()=>Z,d=(f,{skipDedupe:c,stackFrames:p,type:l,context:v,spanContext:h,timestampOverwriteMs:_}={})=>{l=l||f.name||ii;const A={meta:i.value,payload:{type:l,value:f.message,timestamp:_?at(_):st(),trace:h?{trace_id:h.traceId,span_id:h.spanId}:o.getTraceContext(),context:Object.assign(Object.assign({},_r(f)),v??{})},type:P.EXCEPTION};p=p??(f.stack?Z?.(f).frames:void 0),p?.length&&(A.payload.stacktrace={frames:p});const w={type:A.payload.type,value:A.payload.value,stackTrace:A.payload.stacktrace,context:A.payload.context};if(!c&&n.dedupe&&!Ce(a)&&ge(w,a)){t.debug(`Skipping error push because it is the same as the last one
`,A.payload);return}a=w,t.debug(`Pushing exception
`,A),r.execute(A)};return u(n.parseStacktrace),{changeStacktraceParser:u,getStacktraceParser:m,pushError:d}}function _r(e){let t=e.cause;return Qn(t)?t=e.cause.toString():t!==null&&(se(e.cause)||Ne(e.cause))?t=JSON.stringify(e.cause):t!=null&&(t=e.cause.toString()),t==null?{}:{cause:t}}const ri=e=>e.map(t=>{try{return String(t)}catch{return""}}).join(" ");function xr(e,t,n,i,r,o){var s;t.debug("Initializing logs API");let a=null;const u=(s=n.logArgsSerializer)!==null&&s!==void 0?s:ri;return{pushLog:(d,{context:f,level:c,skipDedupe:p,spanContext:l,timestampOverwriteMs:v}={})=>{try{const h={type:P.LOG,payload:{message:u(d),level:c??ar,context:f??{},timestamp:v?at(v):st(),trace:l?{trace_id:l.traceId,span_id:l.spanId}:o.getTraceContext()},meta:i.value},_={message:h.payload.message,level:h.payload.level,context:h.payload.context};if(!p&&n.dedupe&&!Ce(a)&&ge(_,a)){t.debug(`Skipping log push because it is the same as the last one
`,h.payload);return}a=_,t.debug(`Pushing log
`,h),r.execute(h)}catch(h){t.error(`Error pushing log
`,h)}}}}function Ar(e,t,n,i,r,o){t.debug("Initializing measurements API");let s=null;return{pushMeasurement:(u,{skipDedupe:m,context:d,spanContext:f,timestampOverwriteMs:c}={})=>{try{const p={type:P.MEASUREMENT,payload:Object.assign(Object.assign({},u),{trace:f?{trace_id:f.traceId,span_id:f.spanId}:o.getTraceContext(),timestamp:c?at(c):st(),context:d??{}}),meta:i.value},l={type:p.payload.type,values:p.payload.values,context:p.payload.context};if(!m&&n.dedupe&&!Ce(s)&&ge(l,s)){t.debug(`Skipping measurement push because it is the same as the last one
`,p.payload);return}s=l,t.debug(`Pushing measurement
`,p),r.execute(p)}catch(p){t.error(`Error pushing measurement
`,p)}}}}function Pr(e,t,n,i,r){t.debug("Initializing meta API");let o,s,a;const u=p=>{s&&i.remove(s),s={user:p},i.add(s)},m=p=>{o&&i.remove(o),o={session:p},i.add(o)};return{setUser:u,resetUser:u,setSession:m,resetSession:m,getSession:()=>i.value.session,setView:p=>{var l;if(((l=a?.view)===null||l===void 0?void 0:l.name)===p?.name)return;const v=a;a={view:p},i.add(a),v&&i.remove(v)},getView:()=>i.value.view}}function Rr(e,t,n,i,r){t.debug("Initializing traces API");let o;return{getOTEL:()=>o,getTraceContext:()=>{const f=o?.trace.getSpanContext(o.context.active());return f?{trace_id:f.traceId,span_id:f.spanId}:void 0},initOTEL:(f,c)=>{t.debug("Initializing OpenTelemetry"),o={trace:f,context:c}},isOTELInitialized:()=>!!o,pushTraces:f=>{try{const c={type:P.TRACE,payload:f,meta:i.value};t.debug(`Pushing trace
`,c),r.execute(c)}catch(c){t.error(`Error pushing trace
`,c)}}}}function Nr(e,t,n,i,r){t.debug("Initializing API");const o=Rr(e,t,n,i,r);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),Or(e,t,n,i,r,o)),Pr(e,t,n,i)),xr(e,t,n,i,r,o)),Ar(e,t,n,i,r,o)),Ir(e,t,n,i,r,o))}class be extends ni{constructor(){super(...arguments),this.api={},this.transports={}}}function Dr(e,t,n,i,r,o){t.debug("Initializing instrumentations");const s=[];return{add:(...m)=>{t.debug("Adding instrumentations"),m.forEach(d=>{if(t.debug(`Adding "${d.name}" instrumentation`),s.some(c=>c.name===d.name)){t.warn(`Instrumentation ${d.name} is already added`);return}d.unpatchedConsole=e,d.internalLogger=t,d.config=n,d.metas=i,d.transports=r,d.api=o,s.push(d),d.initialize()})},get instrumentations(){return[...s]},remove:(...m)=>{t.debug("Removing instrumentations"),m.forEach(d=>{var f,c;t.debug(`Removing "${d.name}" instrumentation`);const p=s.reduce((l,v,h)=>l===null&&v.name===d.name?h:null,null);if(!p){t.warn(`Instrumentation "${d.name}" is not added`);return}(c=(f=s[p]).destroy)===null||c===void 0||c.call(f),s.splice(p,1)})}}}function Mr(e){e.instrumentations.add(...e.config.instrumentations)}function Cr(e,t,n){let i=[],r=[];const o=()=>i.reduce((f,c)=>Object.assign(f,Zn(c)?c():c),{}),s=()=>{if(r.length){const f=o();r.forEach(c=>c(f))}};return{add:(...f)=>{t.debug(`Adding metas
`,f),i.push(...f),s()},remove:(...f)=>{t.debug(`Removing metas
`,f),i=i.filter(c=>!f.includes(c)),s()},addListener:f=>{t.debug(`Adding metas listener
`,f),r.push(f)},removeListener:f=>{t.debug(`Removing metas listener
`,f),r=r.filter(c=>c!==f)},get value(){return o()}}}const re="1.11.0";function Lr(e){var t,n;const i={sdk:{version:re},app:{bundleId:e.config.app.name&&lr(e.config.app.name)}},r=(t=e.config.sessionTracking)===null||t===void 0?void 0:t.session;r&&e.api.setSession(r),e.config.app&&(i.app=Object.assign(Object.assign({},e.config.app),i.app)),e.config.user&&(i.user=e.config.user),e.config.view&&(i.view=e.config.view),e.metas.add(i,...(n=e.config.metas)!==null&&n!==void 0?n:[])}const oi="_faroInternal";function jr(e){if(e.config.preventGlobalExposure)e.internalLogger.debug("Skipping registering public Faro instance in the global scope");else{if(e.internalLogger.debug(`Registering public faro reference in the global scope using "${e.config.globalObjectKey}" key`),e.config.globalObjectKey in oe){e.internalLogger.warn(`Skipping global registration due to key "${e.config.globalObjectKey}" being used already. Please set "globalObjectKey" to something else or set "preventGlobalExposure" to "true"`);return}Object.defineProperty(oe,e.config.globalObjectKey,{configurable:!1,writable:!1,value:e})}}function Br(e){e.config.isolate?e.internalLogger.debug("Skipping registering internal Faro instance on global object"):(e.internalLogger.debug("Registering internal Faro instance on global object"),Object.defineProperty(oe,oi,{configurable:!1,enumerable:!1,writable:!1,value:e}))}function Fr(){return oi in oe}let R={};function Ur(e,t,n,i,r,o,s){return t.debug("Initializing Faro"),R={api:o,config:n,instrumentations:s,internalLogger:t,metas:i,pause:r.pause,transports:r,unpatchedConsole:e,unpause:r.unpause},Br(R),jr(R),R}function $r(e){const t=wr(e),n=yr(t,e);if(Fr()&&!e.isolate){n.error('Faro is already registered. Either add instrumentations, transports etc. to the global faro instance or use the "isolate" property');return}n.debug("Initializing");const i=Cr(t,n),r=gr(t,n,e,i),o=Nr(t,n,e,i,r),s=Dr(t,n,e,i,r,o),a=Ur(t,n,e,i,r,o,s);return Lr(a),Er(a),Mr(a),a}const zr="faro",Vr={enabled:!0,sendTimeout:250,itemLimit:50},qr="view_changed",He="session_start",_t="session_resume",Gr="session_extend",j="unknown";var Nt={exports:{}};(function(e,t){(function(n,i){var r="1.0.39",o="",s="?",a="function",u="undefined",m="object",d="string",f="major",c="model",p="name",l="type",v="vendor",h="version",_="architecture",A="console",w="mobile",y="tablet",D="smarttv",I="wearable",g="embedded",N=500,M="Amazon",L="Apple",rn="ASUS",on="BlackBerry",Ee="Browser",Ue="Chrome",Wi="Edge",$e="Firefox",ze="Google",sn="Huawei",yt="LG",St="Microsoft",an="Motorola",Te="Opera",ke="Samsung",un="Sharp",Ve="Sony",Et="Xiaomi",Tt="Zebra",cn="Facebook",ln="Chromium OS",dn="Mac OS",fn=" Browser",Hi=function(E,T){var S={};for(var O in E)T[O]&&T[O].length%2===0?S[O]=T[O].concat(E[O]):S[O]=E[O];return S},qe=function(E){for(var T={},S=0;S<E.length;S++)T[E[S].toUpperCase()]=E[S];return T},pn=function(E,T){return typeof E===d?le(T).indexOf(le(E))!==-1:!1},le=function(E){return E.toLowerCase()},Ki=function(E){return typeof E===d?E.replace(/[^\d\.]/g,o).split(".")[0]:i},kt=function(E,T){if(typeof E===d)return E=E.replace(/^\s\s*/,o),typeof T===u?E:E.substring(0,N)},Ie=function(E,T){for(var S=0,O,Y,G,k,b,W;S<T.length&&!b;){var It=T[S],hn=T[S+1];for(O=Y=0;O<It.length&&!b&&It[O];)if(b=It[O++].exec(E),b)for(G=0;G<hn.length;G++)W=b[++Y],k=hn[G],typeof k===m&&k.length>0?k.length===2?typeof k[1]==a?this[k[0]]=k[1].call(this,W):this[k[0]]=k[1]:k.length===3?typeof k[1]===a&&!(k[1].exec&&k[1].test)?this[k[0]]=W?k[1].call(this,W,k[2]):i:this[k[0]]=W?W.replace(k[1],k[2]):i:k.length===4&&(this[k[0]]=W?k[3].call(this,W.replace(k[1],k[2])):i):this[k]=W||i;S+=2}},Ge=function(E,T){for(var S in T)if(typeof T[S]===m&&T[S].length>0){for(var O=0;O<T[S].length;O++)if(pn(T[S][O],E))return S===s?i:S}else if(pn(T[S],E))return S===s?i:S;return T.hasOwnProperty("*")?T["*"]:E},Yi={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},mn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},vn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[h,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[h,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,h],[/opios[\/ ]+([\w\.]+)/i],[h,[p,Te+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[h,[p,Te+" GX"]],[/\bopr\/([\w\.]+)/i],[h,[p,Te]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[h,[p,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[p,h],[/quark(?:pc)?\/([-\w\.]+)/i],[h,[p,"Quark"]],[/\bddg\/([\w\.]+)/i],[h,[p,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[h,[p,"UC"+Ee]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[h,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[h,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[h,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[h,[p,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[h,[p,"Smart Lenovo "+Ee]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+Ee],h],[/\bfocus\/([\w\.]+)/i],[h,[p,$e+" Focus"]],[/\bopt\/([\w\.]+)/i],[h,[p,Te+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[h,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[h,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[h,[p,Te+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[h,[p,"MIUI "+Ee]],[/fxios\/([-\w\.]+)/i],[h,[p,$e]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360"+fn]],[/\b(qq)\/([\w\.]+)/i],[[p,/(.+)/,"$1Browser"],h],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1"+fn],h],[/samsungbrowser\/([\w\.]+)/i],[h,[p,ke+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],h],[/metasr[\/ ]?([\d\.]+)/i],[h,[p,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[p,"Sogou Mobile"],h],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[p,h],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,cn],h],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[p,h],[/\bgsa\/([\w\.]+) .*safari\//i],[h,[p,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[h,[p,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[h,[p,Ue+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,Ue+" WebView"],h],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[h,[p,"Android "+Ee]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,h],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[h,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[h,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[h,Ge,Yi]],[/(webkit|khtml)\/([\w\.]+)/i],[p,h],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],h],[/(wolvic)\/([\w\.]+)/i],[p,h],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[h,[p,$e+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,[h,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[p,[h,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,le]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,o,le]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,le]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[v,ke],[l,y]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[c,[v,ke],[l,w]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[c,[v,L],[l,w]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[v,L],[l,y]],[/(macintosh);/i],[c,[v,L]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[v,un],[l,w]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[v,sn],[l,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[v,sn],[l,w]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[c,/_/g," "],[v,Et],[l,w]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[v,Et],[l,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[v,"OPPO"],[l,w]],[/\b(opd2\d{3}a?) bui/i],[c,[v,"OPPO"],[l,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[v,"Vivo"],[l,w]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[c,[v,"Realme"],[l,w]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[v,an],[l,w]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[v,an],[l,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[v,yt],[l,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[v,yt],[l,w]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[v,"Lenovo"],[l,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[v,"Nokia"],[l,w]],[/(pixel c)\b/i],[c,[v,ze],[l,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[v,ze],[l,w]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[v,Ve],[l,w]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[v,Ve],[l,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[v,"OnePlus"],[l,w]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[v,M],[l,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[v,M],[l,w]],[/(playbook);[-\w\),; ]+(rim)/i],[c,v,[l,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[v,on],[l,w]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[v,rn],[l,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[v,rn],[l,w]],[/(nexus 9)/i],[c,[v,"HTC"],[l,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[v,[c,/_/g," "],[l,w]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[c,[v,"TCL"],[l,y]],[/(itel) ((\w+))/i],[[v,le],c,[l,Ge,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[v,"Acer"],[l,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[v,"Meizu"],[l,w]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[c,[v,"Ulefone"],[l,w]],[/droid.+; (a(?:015|06[35]|142p?))/i],[c,[v,"Nothing"],[l,w]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[v,c,[l,w]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[v,c,[l,y]],[/(surface duo)/i],[c,[v,St],[l,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[v,"Fairphone"],[l,w]],[/(u304aa)/i],[c,[v,"AT&T"],[l,w]],[/\bsie-(\w*)/i],[c,[v,"Siemens"],[l,w]],[/\b(rct\w+) b/i],[c,[v,"RCA"],[l,y]],[/\b(venue[\d ]{2,7}) b/i],[c,[v,"Dell"],[l,y]],[/\b(q(?:mv|ta)\w+) b/i],[c,[v,"Verizon"],[l,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[v,"Barnes & Noble"],[l,y]],[/\b(tm\d{3}\w+) b/i],[c,[v,"NuVision"],[l,y]],[/\b(k88) b/i],[c,[v,"ZTE"],[l,y]],[/\b(nx\d{3}j) b/i],[c,[v,"ZTE"],[l,w]],[/\b(gen\d{3}) b.+49h/i],[c,[v,"Swiss"],[l,w]],[/\b(zur\d{3}) b/i],[c,[v,"Swiss"],[l,y]],[/\b((zeki)?tb.*\b) b/i],[c,[v,"Zeki"],[l,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[v,"Dragon Touch"],c,[l,y]],[/\b(ns-?\w{0,9}) b/i],[c,[v,"Insignia"],[l,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[v,"NextBook"],[l,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[v,"Voice"],c,[l,w]],[/\b(lvtel\-)?(v1[12]) b/i],[[v,"LvTel"],c,[l,w]],[/\b(ph-1) /i],[c,[v,"Essential"],[l,w]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[v,"Envizen"],[l,y]],[/\b(trio[-\w\. ]+) b/i],[c,[v,"MachSpeed"],[l,y]],[/\btu_(1491) b/i],[c,[v,"Rotor"],[l,y]],[/(shield[\w ]+) b/i],[c,[v,"Nvidia"],[l,y]],[/(sprint) (\w+)/i],[v,c,[l,w]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[v,St],[l,w]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[v,Tt],[l,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[v,Tt],[l,w]],[/smart-tv.+(samsung)/i],[v,[l,D]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[v,ke],[l,D]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[v,yt],[l,D]],[/(apple) ?tv/i],[v,[c,L+" TV"],[l,D]],[/crkey/i],[[c,Ue+"cast"],[v,ze],[l,D]],[/droid.+aft(\w+)( bui|\))/i],[c,[v,M],[l,D]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[v,un],[l,D]],[/(bravia[\w ]+)( bui|\))/i],[c,[v,Ve],[l,D]],[/(mitv-\w{5}) bui/i],[c,[v,Et],[l,D]],[/Hbbtv.*(technisat) (.*);/i],[v,c,[l,D]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[v,kt],[c,kt],[l,D]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,D]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[v,c,[l,A]],[/droid.+; (shield) bui/i],[c,[v,"Nvidia"],[l,A]],[/(playstation [345portablevi]+)/i],[c,[v,Ve],[l,A]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[v,St],[l,A]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[c,[v,ke],[l,I]],[/((pebble))app/i],[v,c,[l,I]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[c,[v,L],[l,I]],[/droid.+; (glass) \d/i],[c,[v,ze],[l,I]],[/droid.+; (wt63?0{2,3})\)/i],[c,[v,Tt],[l,I]],[/(quest( \d| pro)?)/i],[c,[v,cn],[l,I]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[v,[l,g]],[/(aeobc)\b/i],[c,[v,M],[l,g]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[c,[l,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[l,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,w]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[v,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[h,[p,Wi+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,h],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[h,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,h],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[p,[h,Ge,mn]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,Ge,mn],[p,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[h,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,dn],[h,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[h,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,h],[/\(bb(10);/i],[h,[p,on]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[h,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[h,[p,$e+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[h,[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[h,[p,"watchOS"]],[/crkey\/([\d\.]+)/i],[h,[p,Ue+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,ln],h],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,h],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],h],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,h]]},z=function(E,T){if(typeof E===m&&(T=E,E=i),!(this instanceof z))return new z(E,T).getResult();var S=typeof n!==u&&n.navigator?n.navigator:i,O=E||(S&&S.userAgent?S.userAgent:o),Y=S&&S.userAgentData?S.userAgentData:i,G=T?Hi(vn,T):vn,k=S&&S.userAgent==O;return this.getBrowser=function(){var b={};return b[p]=i,b[h]=i,Ie.call(b,O,G.browser),b[f]=Ki(b[h]),k&&S&&S.brave&&typeof S.brave.isBrave==a&&(b[p]="Brave"),b},this.getCPU=function(){var b={};return b[_]=i,Ie.call(b,O,G.cpu),b},this.getDevice=function(){var b={};return b[v]=i,b[c]=i,b[l]=i,Ie.call(b,O,G.device),k&&!b[l]&&Y&&Y.mobile&&(b[l]=w),k&&b[c]=="Macintosh"&&S&&typeof S.standalone!==u&&S.maxTouchPoints&&S.maxTouchPoints>2&&(b[c]="iPad",b[l]=y),b},this.getEngine=function(){var b={};return b[p]=i,b[h]=i,Ie.call(b,O,G.engine),b},this.getOS=function(){var b={};return b[p]=i,b[h]=i,Ie.call(b,O,G.os),k&&!b[p]&&Y&&Y.platform&&Y.platform!="Unknown"&&(b[p]=Y.platform.replace(/chrome os/i,ln).replace(/macos/i,dn)),b},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return O},this.setUA=function(b){return O=typeof b===d&&b.length>N?kt(b,N):b,this},this.setUA(O),this};z.VERSION=r,z.BROWSER=qe([p,h,f]),z.CPU=qe([_]),z.DEVICE=qe([c,v,l,A,w,D,y,I,g]),z.ENGINE=z.OS=qe([p,h]),e.exports&&(t=e.exports=z),t.UAParser=z;var de=typeof n!==u&&(n.jQuery||n.Zepto);if(de&&!de.ua){var We=new z;de.ua=We.getResult(),de.ua.get=function(){return We.getUA()},de.ua.set=function(E){We.setUA(E);var T=We.getResult();for(var S in T)de.ua[S]=T[S]}}})(typeof window=="object"?window:Ji)})(Nt,Nt.exports);var Wr=Nt.exports;const Hr=()=>{const e=new Wr.UAParser,{name:t,version:n}=e.getBrowser(),{name:i,version:r}=e.getOS(),o=e.getUA(),s=navigator.language,a=navigator.userAgent.includes("Mobi"),u=m();return{browser:{name:t??j,version:n??j,os:`${i??j} ${r??j}`,userAgent:o??j,language:s??j,mobile:a,brands:u??j,viewportWidth:`${window.innerWidth}`,viewportHeight:`${window.innerHeight}`}};function m(){if(!(!t||!n)&&"userAgentData"in navigator&&navigator.userAgentData)return navigator.userAgentData.brands}},Kr=()=>({page:{url:location.href}}),Yr=[Hr,Kr];function Jr(e){var t,n,i,r;return{id:(r=(i=(n=(t=R.config)===null||t===void 0?void 0:t.sessionTracking)===null||n===void 0?void 0:n.generateSessionId)===null||i===void 0?void 0:i.call(n))!==null&&r!==void 0?r:ut(),attributes:e}}const X={session:"sessionStorage",local:"localStorage"};function si(e){var t;try{let n;n=window[e];const i="__faro_storage_test__";return n.setItem(i,i),n.removeItem(i),!0}catch(n){return(t=R.internalLogger)===null||t===void 0||t.info(`Web storage of type ${e} is not available. Reason: ${n}`),!1}}function lt(e,t){return Gt(t)?window[t].getItem(e):null}function qt(e,t,n){if(Gt(n))try{window[n].setItem(e,t)}catch{}}function ai(e,t){Gt(t)&&window[t].removeItem(e)}const ui=si(X.local),ci=si(X.session);function Gt(e){return e===X.local?ui:e===X.session?ci:!1}function li(e,t){let n=!1,i;const r=()=>{if(i==null){n=!1;return}e(...i),i=null,setTimeout(r,t)};return(...o)=>{if(n){i=o;return}e(...o),n=!0,setTimeout(r,t)}}function dt(){var e,t,n;const r=R.config.sessionTracking;let o=(n=(t=(e=r?.sampler)===null||e===void 0?void 0:e.call(r,{metas:R.metas.value}))!==null&&t!==void 0?t:r?.samplingRate)!==null&&n!==void 0?n:1;return typeof o!="number"&&(o=0),Math.random()<o}const me="com.grafana.faro.session",Xr=4*60*60*1e3,di=15*60*1e3,fi=1*1e3,Zr=di,Qr={enabled:!0,persistent:!1,maxSessionPersistenceTime:Zr};function De({sessionId:e,started:t,lastActivity:n,isSampled:i=!0}={}){var r,o;const s=ot(),a=(o=(r=R.config)===null||r===void 0?void 0:r.sessionTracking)===null||o===void 0?void 0:o.generateSessionId;return e==null&&(e=typeof a=="function"?a():ut()),{sessionId:e,lastActivity:n??s,started:t??s,isSampled:i}}function pi(e){if(e==null)return!1;const t=ot();return t-e.started<Xr?t-e.lastActivity<di:!1}function Wt({fetchUserSession:e,storeUserSession:t}){return function({forceSessionExtend:i}={forceSessionExtend:!1}){var r,o,s;if(!e||!t)return;const a=R.config.sessionTracking,u=a?.persistent;if(u&&!ui||!u&&!ci)return;const m=e();if(i===!1&&pi(m))t(Object.assign(Object.assign({},m),{lastActivity:ot()}));else{let d=Ht(De({isSampled:dt()}),m);t(d),(r=R.api)===null||r===void 0||r.setSession(d.sessionMeta),(o=a?.onSessionChange)===null||o===void 0||o.call(a,(s=m?.sessionMeta)!==null&&s!==void 0?s:null,d.sessionMeta)}}}function Ht(e,t){var n,i,r,o;return Object.assign(Object.assign({},e),{sessionMeta:{id:e.sessionId,attributes:Object.assign(Object.assign(Object.assign(Object.assign({},(i=(n=R.config.sessionTracking)===null||n===void 0?void 0:n.session)===null||i===void 0?void 0:i.attributes),(o=(r=R.metas.value.session)===null||r===void 0?void 0:r.attributes)!==null&&o!==void 0?o:{}),t!=null?{previousSession:t.sessionId}:{}),{isSampled:e.isSampled.toString()})}})}class V{constructor(){this.updateSession=li(()=>this.updateUserSession(),fi),this.updateUserSession=Wt({fetchUserSession:V.fetchUserSession,storeUserSession:V.storeUserSession}),this.init()}static removeUserSession(){ai(me,V.storageTypeLocal)}static storeUserSession(t){qt(me,JSON.stringify(t),V.storageTypeLocal)}static fetchUserSession(){const t=lt(me,V.storageTypeLocal);return t?JSON.parse(t):null}init(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.updateSession()}),R.metas.addListener(function(n){const i=n.session,r=V.fetchUserSession();if(i&&i.id!==r?.sessionId){const o=Ht(De({sessionId:i.id,isSampled:dt()}),r);V.storeUserSession(o),R.api.setSession(o.sessionMeta)}})}}V.storageTypeLocal=X.local;class H{constructor(){this.updateSession=li(()=>this.updateUserSession(),fi),this.updateUserSession=Wt({fetchUserSession:H.fetchUserSession,storeUserSession:H.storeUserSession}),this.init()}static removeUserSession(){ai(me,H.storageTypeSession)}static storeUserSession(t){qt(me,JSON.stringify(t),H.storageTypeSession)}static fetchUserSession(){const t=lt(me,H.storageTypeSession);return t?JSON.parse(t):null}init(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.updateSession()}),R.metas.addListener(function(n){const i=n.session,r=H.fetchUserSession();if(i&&i.id!==r?.sessionId){const o=Ht(De({sessionId:i.id,isSampled:dt()}),r);H.storeUserSession(o),R.api.setSession(o.sessionMeta)}})}}H.storageTypeSession=X.session;function mi(e){return e?.persistent?V:H}class eo extends be{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-session",this.version=re}sendSessionStartEvent(t){var n,i;const r=t.session;if(r&&r.id!==((n=this.notifiedSession)===null||n===void 0?void 0:n.id)){if(this.notifiedSession&&this.notifiedSession.id===((i=r.attributes)===null||i===void 0?void 0:i.previousSession)){this.api.pushEvent(Gr,{},void 0,{skipDedupe:!0}),this.notifiedSession=r;return}this.notifiedSession=r,this.api.pushEvent(He,{},void 0,{skipDedupe:!0})}}createInitialSession(t,n){var i,r,o,s,a;let u=t.fetchUserSession();if(n.persistent&&n.maxSessionPersistenceTime&&u){const f=ot();u.lastActivity<f-n.maxSessionPersistenceTime&&(V.removeUserSession(),u=null)}let m,d;if(pi(u)){const f=u?.sessionId;d=De({sessionId:f,isSampled:u.isSampled||!1,started:u?.started}),d.sessionMeta={id:f,attributes:Object.assign(Object.assign(Object.assign({},(i=n.session)===null||i===void 0?void 0:i.attributes),(r=u?.sessionMeta)===null||r===void 0?void 0:r.attributes),{isSampled:d.isSampled.toString()})},m=_t}else{const f=(s=(o=n.session)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:Jr().id;d=De({sessionId:f,isSampled:dt()}),d.sessionMeta={id:f,attributes:Object.assign({isSampled:d.isSampled.toString()},(a=n.session)===null||a===void 0?void 0:a.attributes)},m=He}return{initialSession:d,lifecycleType:m}}registerBeforeSendHook(t){var n;const{updateSession:i}=new t;(n=this.transports)===null||n===void 0||n.addBeforeSendHooks(r=>{var o,s,a;i();const u=(o=r.meta.session)===null||o===void 0?void 0:o.attributes;if(u&&u?.isSampled==="true"){let m=JSON.parse(JSON.stringify(r));const d=(s=m.meta.session)===null||s===void 0?void 0:s.attributes;return d==null||delete d.isSampled,Object.keys(d??{}).length===0&&((a=m.meta.session)===null||a===void 0||delete a.attributes),m}return null})}initialize(){this.logDebug("init session instrumentation");const t=this.config.sessionTracking;if(t?.enabled){const n=mi(t);this.registerBeforeSendHook(n);const{initialSession:i,lifecycleType:r}=this.createInitialSession(n,t);n.storeUserSession(i);const o=i.sessionMeta;this.notifiedSession=o,this.api.setSession(o),r===He&&this.api.pushEvent(He,{},void 0,{skipDedupe:!0}),r===_t&&this.api.pushEvent(_t,{},void 0,{skipDedupe:!0})}this.metas.addListener(this.sendSessionStartEvent.bind(this))}}class ft extends be{constructor(t={}){super(),this.options=t,this.name="@grafana/faro-web-sdk:instrumentation-console",this.version=re}initialize(){this.logDebug(`Initializing
`,this.options),ur.filter(t=>{var n;return!((n=this.options.disabledLevels)!==null&&n!==void 0?n:ft.defaultDisabledLevels).includes(t)}).forEach(t=>{console[t]=(...n)=>{try{t===C.ERROR?this.api.pushError(new Error(n.map(i=>se(i)||Ne(i)?JSON.stringify(i):i).join(" "))):this.api.pushLog(n,{level:t})}catch(i){this.logError(i)}finally{this.unpatchedConsole[t](...n)}}})}}ft.defaultDisabledLevels=[C.DEBUG,C.TRACE,C.LOG];const to="Non-Error promise rejection captured with value:",no="UnhandledRejection",io="DOMError",ro="DOMException",oo="Non-Error exception captured with keys:",so="?",ao=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,wn=`
`,uo="eval",co="?",yn="@",lo=/^\s*at (?:(.*\).*?|.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,fo=/\((\S*)(?::(\d+))(?::(\d+))\)/,po="eval",vi="address at ",mo=vi.length,vo=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ho=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,go=" > eval",Sn="safari-extension",En="safari-web-extension",bo=/Minified React error #\d+;/i;function hi(e,t,n,i){const r={filename:e||document.location.href,function:t||co};return n!==void 0&&(r.lineno=n),i!==void 0&&(r.colno=i),r}function Tn(e,t){const n=e?.includes(Sn),i=!n&&e?.includes(En);return!n&&!i?[e,t]:[e?.includes(yn)?e.split(yn)[0]:e,n?`${Sn}:${t}`:`${En}:${t}`]}function Dt(e){let t=[];e.stacktrace?t=e.stacktrace.split(wn).filter((i,r)=>r%2===0):e.stack&&(t=e.stack.split(wn));const n=t.reduce((i,r,o)=>{let s,a,u,m,d;if(s=lo.exec(r)){if(a=s[1],u=s[2],m=s[3],d=s[4],u?.startsWith(po)){const f=fo.exec(u);f&&(u=f[1],m=f[2],d=f[3])}u=u?.startsWith(vi)?u.substring(mo):u,[a,u]=Tn(a,u)}else if(s=vo.exec(r)){if(a=s[1],u=s[3],m=s[4],d=s[5],u&&u.includes(go)){const f=ho.exec(u);f&&(a=a||uo,u=f[1],m=f[2])}else o===0&&!d&&Qi(e.columnNumber)&&(d=String(e.columnNumber+1));[a,u]=Tn(a,u)}return(u||a)&&i.push(hi(u,a,m?Number(m):void 0,d?Number(d):void 0)),i},[]);return bo.test(e.message)?n.slice(1):n}function wo(e){return{frames:Dt(e)}}function gi(e){let t,n,i=[],r,o;if(rr(e)&&e.error)t=e.error.message,n=e.error.name,i=Dt(e.error);else if((r=or(e))||sr(e)){const{name:s,message:a}=e;n=s??(r?io:ro),t=a?`${n}: ${a}`:n}else Qn(e)?(t=e.message,i=Dt(e)):(se(e)||(o=nr(e)))&&(n=o?e.constructor.name:void 0,t=`${oo} ${Object.keys(e)}`);return[t,n,i]}function yo(e){var t,n;const i=e.match(ao),r=(t=i?.[1])!==null&&t!==void 0?t:ii;return[(n=i?.[2])!==null&&n!==void 0?n:e,r]}function So(e){const t=window.onerror;window.onerror=(...n)=>{try{const[i,r,o,s,a]=n;let u,m,d=[];const f=Xn(i),c=hi(r,so,o,s);a||!f?([u,m,d]=gi(a??i),d.length===0&&(d=[c])):f&&([u,m]=yo(i),d=[c]),u&&e.pushError(new Error(u),{type:m,stackFrames:d})}finally{t?.apply(window,n)}}}function Eo(e){window.addEventListener("unhandledrejection",t=>{var n,i;let r=t;r.reason?r=t.reason:!((n=t.detail)===null||n===void 0)&&n.reason&&(r=(i=t.detail)===null||i===void 0?void 0:i.reason);let o,s,a=[];er(r)?(o=`${to} ${String(r)}`,s=no):[o,s,a]=gi(r),o&&e.pushError(new Error(o),{type:s,stackFrames:a})})}class bi extends be{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-errors",this.version=re}initialize(){this.logDebug("Initializing"),So(this.api),Eo(this.api)}}class To extends be{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-view",this.version=re}sendViewChangedEvent(t){var n,i,r,o;const s=t.view;s&&s.name!==((n=this.notifiedView)===null||n===void 0?void 0:n.name)&&(this.api.pushEvent(qr,{fromView:(r=(i=this.notifiedView)===null||i===void 0?void 0:i.name)!==null&&r!==void 0?r:j,toView:(o=s.name)!==null&&o!==void 0?o:j},void 0,{skipDedupe:!0}),this.notifiedView=s)}initialize(){this.metas.addListener(this.sendViewChangedEvent.bind(this))}}var Mt,ee,Ae,wi,et,yi=-1,ae=function(e){addEventListener("pageshow",function(t){t.persisted&&(yi=t.timeStamp,e(t))},!0)},Kt=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},pt=function(){var e=Kt();return e&&e.activationStart||0},B=function(e,t){var n=Kt(),i="navigate";return yi>=0?i="back-forward-cache":n&&(document.prerendering||pt()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},we=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver(function(r){Promise.resolve().then(function(){t(r.getEntries())})});return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch{}},F=function(e,t,n,i){var r,o;return function(s){t.value>=0&&(s||i)&&((o=t.value-(r||0))||r===void 0)&&(r=t.value,t.delta=o,t.rating=function(a,u){return a>u[1]?"poor":a>u[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Yt=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},Le=function(e){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&e()})},mt=function(e){var t=!1;return function(){t||(e(),t=!0)}},fe=-1,kn=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},tt=function(e){document.visibilityState==="hidden"&&fe>-1&&(fe=e.type==="visibilitychange"?e.timeStamp:0,ko())},In=function(){addEventListener("visibilitychange",tt,!0),addEventListener("prerenderingchange",tt,!0)},ko=function(){removeEventListener("visibilitychange",tt,!0),removeEventListener("prerenderingchange",tt,!0)},Jt=function(){return fe<0&&(fe=kn(),In(),ae(function(){setTimeout(function(){fe=kn(),In()},0)})),{get firstHiddenTime(){return fe}}},je=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},On=[1800,3e3],Xt=function(e,t){t=t||{},je(function(){var n,i=Jt(),r=B("FCP"),o=we("paint",function(s){s.forEach(function(a){a.name==="first-contentful-paint"&&(o.disconnect(),a.startTime<i.firstHiddenTime&&(r.value=Math.max(a.startTime-pt(),0),r.entries.push(a),n(!0)))})});o&&(n=F(e,r,On,t.reportAllChanges),ae(function(s){r=B("FCP"),n=F(e,r,On,t.reportAllChanges),Yt(function(){r.value=performance.now()-s.timeStamp,n(!0)})}))})},_n=[.1,.25],Si=function(e,t){t=t||{},Xt(mt(function(){var n,i=B("CLS",0),r=0,o=[],s=function(u){u.forEach(function(m){if(!m.hadRecentInput){var d=o[0],f=o[o.length-1];r&&m.startTime-f.startTime<1e3&&m.startTime-d.startTime<5e3?(r+=m.value,o.push(m)):(r=m.value,o=[m])}}),r>i.value&&(i.value=r,i.entries=o,n())},a=we("layout-shift",s);a&&(n=F(e,i,_n,t.reportAllChanges),Le(function(){s(a.takeRecords()),n(!0)}),ae(function(){r=0,i=B("CLS",0),n=F(e,i,_n,t.reportAllChanges),Yt(function(){return n()})}),setTimeout(n,0))}))},Ei=0,xt=1/0,Ke=0,Io=function(e){e.forEach(function(t){t.interactionId&&(xt=Math.min(xt,t.interactionId),Ke=Math.max(Ke,t.interactionId),Ei=Ke?(Ke-xt)/7+1:0)})},Ti=function(){return Mt?Ei:performance.interactionCount||0},Oo=function(){"interactionCount"in performance||Mt||(Mt=we("event",Io,{type:"event",buffered:!0,durationThreshold:0}))},K=[],Xe=new Map,ki=0,_o=function(){var e=Math.min(K.length-1,Math.floor((Ti()-ki)/50));return K[e]},xo=[],Ao=function(e){if(xo.forEach(function(r){return r(e)}),e.interactionId||e.entryType==="first-input"){var t=K[K.length-1],n=Xe.get(e.interactionId);if(n||K.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};Xe.set(i.id,i),K.push(i)}K.sort(function(r,o){return o.latency-r.latency}),K.length>10&&K.splice(10).forEach(function(r){return Xe.delete(r.id)})}}},Ii=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=mt(e),document.visibilityState==="hidden"?e():(n=t(e),Le(e)),n},xn=[200,500],Po=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},je(function(){var n;Oo();var i,r=B("INP"),o=function(a){Ii(function(){a.forEach(Ao);var u=_o();u&&u.latency!==r.value&&(r.value=u.latency,r.entries=u.entries,i())})},s=we("event",o,{durationThreshold:(n=t.durationThreshold)!==null&&n!==void 0?n:40});i=F(e,r,xn,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),Le(function(){o(s.takeRecords()),i(!0)}),ae(function(){ki=Ti(),K.length=0,Xe.clear(),r=B("INP"),i=F(e,r,xn,t.reportAllChanges)}))}))},An=[2500,4e3],At={},Oi=function(e,t){t=t||{},je(function(){var n,i=Jt(),r=B("LCP"),o=function(u){t.reportAllChanges||(u=u.slice(-1)),u.forEach(function(m){m.startTime<i.firstHiddenTime&&(r.value=Math.max(m.startTime-pt(),0),r.entries=[m],n())})},s=we("largest-contentful-paint",o);if(s){n=F(e,r,An,t.reportAllChanges);var a=mt(function(){At[r.id]||(o(s.takeRecords()),s.disconnect(),At[r.id]=!0,n(!0))});["keydown","click"].forEach(function(u){addEventListener(u,function(){return Ii(a)},!0)}),Le(a),ae(function(u){r=B("LCP"),n=F(e,r,An,t.reportAllChanges),Yt(function(){r.value=performance.now()-u.timeStamp,At[r.id]=!0,n(!0)})})}})},Pn=[800,1800],Ro=function e(t){document.prerendering?je(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},_i=function(e,t){t=t||{};var n=B("TTFB"),i=F(e,n,Pn,t.reportAllChanges);Ro(function(){var r=Kt();r&&(n.value=Math.max(r.responseStart-pt(),0),n.entries=[r],i(!0),ae(function(){n=B("TTFB",0),(i=F(e,n,Pn,t.reportAllChanges))(!0)}))})},_e={passive:!0,capture:!0},No=new Date,Rn=function(e,t){ee||(ee=t,Ae=e,wi=new Date,Ai(removeEventListener),xi())},xi=function(){if(Ae>=0&&Ae<wi-No){var e={entryType:"first-input",name:ee.type,target:ee.target,cancelable:ee.cancelable,startTime:ee.timeStamp,processingStart:ee.timeStamp+Ae};et.forEach(function(t){t(e)}),et=[]}},Do=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(n,i){var r=function(){Rn(n,i),s()},o=function(){s()},s=function(){removeEventListener("pointerup",r,_e),removeEventListener("pointercancel",o,_e)};addEventListener("pointerup",r,_e),addEventListener("pointercancel",o,_e)}(t,e):Rn(t,e)}},Ai=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,Do,_e)})},Nn=[100,300],Pi=function(e,t){t=t||{},je(function(){var n,i=Jt(),r=B("FID"),o=function(u){u.startTime<i.firstHiddenTime&&(r.value=u.processingStart-u.startTime,r.entries.push(u),n(!0))},s=function(u){u.forEach(o)},a=we("first-input",s);n=F(e,r,Nn,t.reportAllChanges),a&&(Le(mt(function(){s(a.takeRecords()),a.disconnect()})),ae(function(){var u;r=B("FID"),n=F(e,r,Nn,t.reportAllChanges),et=[],Ae=-1,ee=null,Ai(addEventListener),u=o,et.push(u),xi()}))})};class vt{constructor(t){this.pushMeasurement=t}initialize(){Object.entries(vt.mapping).forEach(([t,n])=>{n(i=>{this.pushMeasurement({type:"web-vitals",values:{[t]:i.value}})})})}}vt.mapping={cls:Si,fcp:Xt,fid:Pi,inp:Po,lcp:Oi,ttfb:_i};var Ct,Dn,ye=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},Me=function(e){if(document.readyState==="loading")return"loading";var t=ye();if(t){if(e<t.domInteractive)return"loading";if(t.domContentLoadedEventStart===0||e<t.domContentLoadedEventStart)return"dom-interactive";if(t.domComplete===0||e<t.domComplete)return"dom-content-loaded"}return"complete"},Mo=function(e){var t=e.nodeName;return e.nodeType===1?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},ht=function(e,t){var n="";try{for(;e&&e.nodeType!==9;){var i=e,r=i.id?"#"+i.id:Mo(i)+(i.classList&&i.classList.value&&i.classList.value.trim()&&i.classList.value.trim().length?"."+i.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+r.length>(t||100)-1)return n||r;if(n=n?r+">"+n:r,i.id)break;e=i.parentNode}}catch{}return n},Ri=-1,Ni=function(){return Ri},ue=function(e){addEventListener("pageshow",function(t){t.persisted&&(Ri=t.timeStamp,e(t))},!0)},gt=function(){var e=ye();return e&&e.activationStart||0},U=function(e,t){var n=ye(),i="navigate";return Ni()>=0?i="back-forward-cache":n&&(document.prerendering||gt()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},ce=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver(function(r){Promise.resolve().then(function(){t(r.getEntries())})});return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch{}},$=function(e,t,n,i){var r,o;return function(s){t.value>=0&&(s||i)&&((o=t.value-(r||0))||r===void 0)&&(r=t.value,t.delta=o,t.rating=function(a,u){return a>u[1]?"poor":a>u[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Zt=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},Be=function(e){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&e()})},bt=function(e){var t=!1;return function(){t||(e(),t=!0)}},pe=-1,Mn=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},nt=function(e){document.visibilityState==="hidden"&&pe>-1&&(pe=e.type==="visibilitychange"?e.timeStamp:0,Co())},Cn=function(){addEventListener("visibilitychange",nt,!0),addEventListener("prerenderingchange",nt,!0)},Co=function(){removeEventListener("visibilitychange",nt,!0),removeEventListener("prerenderingchange",nt,!0)},Qt=function(){return pe<0&&(pe=Mn(),Cn(),ue(function(){setTimeout(function(){pe=Mn(),Cn()},0)})),{get firstHiddenTime(){return pe}}},Fe=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},Ln=[1800,3e3],Di=function(e,t){t=t||{},Fe(function(){var n,i=Qt(),r=U("FCP"),o=ce("paint",function(s){s.forEach(function(a){a.name==="first-contentful-paint"&&(o.disconnect(),a.startTime<i.firstHiddenTime&&(r.value=Math.max(a.startTime-gt(),0),r.entries.push(a),n(!0)))})});o&&(n=$(e,r,Ln,t.reportAllChanges),ue(function(s){r=U("FCP"),n=$(e,r,Ln,t.reportAllChanges),Zt(function(){r.value=performance.now()-s.timeStamp,n(!0)})}))})},jn=[.1,.25],Lo=function(e,t){(function(n,i){i=i||{},Di(bt(function(){var r,o=U("CLS",0),s=0,a=[],u=function(d){d.forEach(function(f){if(!f.hadRecentInput){var c=a[0],p=a[a.length-1];s&&f.startTime-p.startTime<1e3&&f.startTime-c.startTime<5e3?(s+=f.value,a.push(f)):(s=f.value,a=[f])}}),s>o.value&&(o.value=s,o.entries=a,r())},m=ce("layout-shift",u);m&&(r=$(n,o,jn,i.reportAllChanges),Be(function(){u(m.takeRecords()),r(!0)}),ue(function(){s=0,o=U("CLS",0),r=$(n,o,jn,i.reportAllChanges),Zt(function(){return r()})}),setTimeout(r,0))}))})(function(n){var i=function(r){var o,s={};if(r.entries.length){var a=r.entries.reduce(function(m,d){return m&&m.value>d.value?m:d});if(a&&a.sources&&a.sources.length){var u=(o=a.sources).find(function(m){return m.node&&m.node.nodeType===1})||o[0];u&&(s={largestShiftTarget:ht(u.node),largestShiftTime:a.startTime,largestShiftValue:a.value,largestShiftSource:u,largestShiftEntry:a,loadState:Me(a.startTime)})}}return Object.assign(r,{attribution:s})}(n);e(i)},t)},jo=function(e,t){Di(function(n){var i=function(r){var o={timeToFirstByte:0,firstByteToFCP:r.value,loadState:Me(Ni())};if(r.entries.length){var s=ye(),a=r.entries[r.entries.length-1];if(s){var u=s.activationStart||0,m=Math.max(0,s.responseStart-u);o={timeToFirstByte:m,firstByteToFCP:r.value-m,loadState:Me(r.entries[0].startTime),navigationEntry:s,fcpEntry:a}}}return Object.assign(r,{attribution:o})}(n);e(i)},t)},Mi=0,Pt=1/0,Ye=0,Bo=function(e){e.forEach(function(t){t.interactionId&&(Pt=Math.min(Pt,t.interactionId),Ye=Math.max(Ye,t.interactionId),Mi=Ye?(Ye-Pt)/7+1:0)})},Ci=function(){return Ct?Mi:performance.interactionCount||0},Fo=function(){"interactionCount"in performance||Ct||(Ct=ce("event",Bo,{type:"event",buffered:!0,durationThreshold:0}))},q=[],Pe=new Map,Li=0,Uo=function(){var e=Math.min(q.length-1,Math.floor((Ci()-Li)/50));return q[e]},ji=[],$o=function(e){if(ji.forEach(function(r){return r(e)}),e.interactionId||e.entryType==="first-input"){var t=q[q.length-1],n=Pe.get(e.interactionId);if(n||q.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};Pe.set(i.id,i),q.push(i)}q.sort(function(r,o){return o.latency-r.latency}),q.length>10&&q.splice(10).forEach(function(r){return Pe.delete(r.id)})}}},en=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=bt(e),document.visibilityState==="hidden"?e():(n=t(e),Be(e)),n},Bn=[200,500],zo=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},Fe(function(){var n;Fo();var i,r=U("INP"),o=function(a){en(function(){a.forEach($o);var u=Uo();u&&u.latency!==r.value&&(r.value=u.latency,r.entries=u.entries,i())})},s=ce("event",o,{durationThreshold:(n=t.durationThreshold)!==null&&n!==void 0?n:40});i=$(e,r,Bn,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),Be(function(){o(s.takeRecords()),i(!0)}),ue(function(){Li=Ci(),q.length=0,Pe.clear(),r=U("INP"),i=$(e,r,Bn,t.reportAllChanges)}))}))},ve=[],te=[],Lt=0,tn=new WeakMap,he=new Map,jt=-1,Vo=function(e){ve=ve.concat(e),Bi()},Bi=function(){jt<0&&(jt=en(qo))},qo=function(){he.size>10&&he.forEach(function(s,a){Pe.has(a)||he.delete(a)});var e=q.map(function(s){return tn.get(s.entries[0])}),t=te.length-50;te=te.filter(function(s,a){return a>=t||e.includes(s)});for(var n=new Set,i=0;i<te.length;i++){var r=te[i];Ui(r.startTime,r.processingEnd).forEach(function(s){n.add(s)})}var o=ve.length-1-50;ve=ve.filter(function(s,a){return s.startTime>Lt&&a>o||n.has(s)}),jt=-1};ji.push(function(e){e.interactionId&&e.target&&!he.has(e.interactionId)&&he.set(e.interactionId,e.target)},function(e){var t,n=e.startTime+e.duration;Lt=Math.max(Lt,e.processingEnd);for(var i=te.length-1;i>=0;i--){var r=te[i];if(Math.abs(n-r.renderTime)<=8){(t=r).startTime=Math.min(e.startTime,t.startTime),t.processingStart=Math.min(e.processingStart,t.processingStart),t.processingEnd=Math.max(e.processingEnd,t.processingEnd),t.entries.push(e);break}}t||(t={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:n,entries:[e]},te.push(t)),(e.interactionId||e.entryType==="first-input")&&tn.set(e,t),Bi()});var ne,Re,Fi,it,Ui=function(e,t){for(var n,i=[],r=0;n=ve[r];r++)if(!(n.startTime+n.duration<e)){if(n.startTime>t)break;i.push(n)}return i},Go=function(e,t){Dn||(Dn=ce("long-animation-frame",Vo)),zo(function(n){var i=function(r){var o=r.entries[0],s=tn.get(o),a=o.processingStart,u=s.processingEnd,m=s.entries.sort(function(h,_){return h.processingStart-_.processingStart}),d=Ui(o.startTime,u),f=r.entries.find(function(h){return h.target}),c=f&&f.target||he.get(o.interactionId),p=[o.startTime+o.duration,u].concat(d.map(function(h){return h.startTime+h.duration})),l=Math.max.apply(Math,p),v={interactionTarget:ht(c),interactionTargetElement:c,interactionType:o.name.startsWith("key")?"keyboard":"pointer",interactionTime:o.startTime,nextPaintTime:l,processedEventEntries:m,longAnimationFrameEntries:d,inputDelay:a-o.startTime,processingDuration:u-a,presentationDelay:Math.max(l-u,0),loadState:Me(o.startTime)};return Object.assign(r,{attribution:v})}(n);e(i)},t)},Fn=[2500,4e3],Rt={},Wo=function(e,t){(function(n,i){i=i||{},Fe(function(){var r,o=Qt(),s=U("LCP"),a=function(d){i.reportAllChanges||(d=d.slice(-1)),d.forEach(function(f){f.startTime<o.firstHiddenTime&&(s.value=Math.max(f.startTime-gt(),0),s.entries=[f],r())})},u=ce("largest-contentful-paint",a);if(u){r=$(n,s,Fn,i.reportAllChanges);var m=bt(function(){Rt[s.id]||(a(u.takeRecords()),u.disconnect(),Rt[s.id]=!0,r(!0))});["keydown","click"].forEach(function(d){addEventListener(d,function(){return en(m)},!0)}),Be(m),ue(function(d){s=U("LCP"),r=$(n,s,Fn,i.reportAllChanges),Zt(function(){s.value=performance.now()-d.timeStamp,Rt[s.id]=!0,r(!0)})})}})})(function(n){var i=function(r){var o={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:r.value};if(r.entries.length){var s=ye();if(s){var a=s.activationStart||0,u=r.entries[r.entries.length-1],m=u.url&&performance.getEntriesByType("resource").filter(function(l){return l.name===u.url})[0],d=Math.max(0,s.responseStart-a),f=Math.max(d,m?(m.requestStart||m.startTime)-a:0),c=Math.max(f,m?m.responseEnd-a:0),p=Math.max(c,u.startTime-a);o={element:ht(u.element),timeToFirstByte:d,resourceLoadDelay:f-d,resourceLoadDuration:c-f,elementRenderDelay:p-c,navigationEntry:s,lcpEntry:u},u.url&&(o.url=u.url),m&&(o.lcpResourceEntry=m)}}return Object.assign(r,{attribution:o})}(n);e(i)},t)},Un=[800,1800],Ho=function e(t){document.prerendering?Fe(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},Ko=function(e,t){t=t||{};var n=U("TTFB"),i=$(e,n,Un,t.reportAllChanges);Ho(function(){var r=ye();r&&(n.value=Math.max(r.responseStart-gt(),0),n.entries=[r],i(!0),ue(function(){n=U("TTFB",0),(i=$(e,n,Un,t.reportAllChanges))(!0)}))})},Yo=function(e,t){Ko(function(n){var i=function(r){var o={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(r.entries.length){var s=r.entries[0],a=s.activationStart||0,u=Math.max((s.workerStart||s.fetchStart)-a,0),m=Math.max(s.domainLookupStart-a,0),d=Math.max(s.connectStart-a,0),f=Math.max(s.connectEnd-a,0);o={waitingDuration:u,cacheDuration:m-u,dnsDuration:d-m,connectionDuration:f-d,requestDuration:r.value-f,navigationEntry:s}}return Object.assign(r,{attribution:o})}(n);e(i)},t)},xe={passive:!0,capture:!0},Jo=new Date,$n=function(e,t){ne||(ne=t,Re=e,Fi=new Date,zi(removeEventListener),$i())},$i=function(){if(Re>=0&&Re<Fi-Jo){var e={entryType:"first-input",name:ne.type,target:ne.target,cancelable:ne.cancelable,startTime:ne.timeStamp,processingStart:ne.timeStamp+Re};it.forEach(function(t){t(e)}),it=[]}},Xo=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(n,i){var r=function(){$n(n,i),s()},o=function(){s()},s=function(){removeEventListener("pointerup",r,xe),removeEventListener("pointercancel",o,xe)};addEventListener("pointerup",r,xe),addEventListener("pointercancel",o,xe)}(t,e):$n(t,e)}},zi=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,Xo,xe)})},zn=[100,300],Zo=function(e,t){t=t||{},Fe(function(){var n,i=Qt(),r=U("FID"),o=function(u){u.startTime<i.firstHiddenTime&&(r.value=u.processingStart-u.startTime,r.entries.push(u),n(!0))},s=function(u){u.forEach(o)},a=ce("first-input",s);n=$(e,r,zn,t.reportAllChanges),a&&(Be(bt(function(){s(a.takeRecords()),a.disconnect()})),ue(function(){var u;r=U("FID"),n=$(e,r,zn,t.reportAllChanges),it=[],Re=-1,ne=null,zi(addEventListener),u=o,it.push(u),$i()}))})},Qo=function(e,t){Zo(function(n){var i=function(r){var o=r.entries[0],s={eventTarget:ht(o.target),eventType:o.name,eventTime:o.startTime,eventEntry:o,loadState:Me(o.startTime)};return Object.assign(r,{attribution:s})}(n);e(i)},t)};const Bt="com.grafana.faro.lastNavigationId",Je="load_state",Vn="time_to_first_byte";class es{constructor(t){this.corePushMeasurement=t}initialize(){this.measureCLS(),this.measureFCP(),this.measureFID(),this.measureINP(),this.measureLCP(),this.measureTTFB()}measureCLS(){Lo(t=>{const{loadState:n,largestShiftValue:i,largestShiftTime:r,largestShiftTarget:o}=t.attribution,s=this.buildInitialValues(t);this.addIfPresent(s,"largest_shift_value",i),this.addIfPresent(s,"largest_shift_time",r);const a=this.buildInitialContext(t);this.addIfPresent(a,Je,n),this.addIfPresent(a,"largest_shift_target",o),this.pushMeasurement(s,a)})}measureFCP(){jo(t=>{const{firstByteToFCP:n,timeToFirstByte:i,loadState:r}=t.attribution,o=this.buildInitialValues(t);this.addIfPresent(o,"first_byte_to_fcp",n),this.addIfPresent(o,Vn,i);const s=this.buildInitialContext(t);this.addIfPresent(s,Je,r),this.pushMeasurement(o,s)})}measureFID(){Qo(t=>{const{eventTime:n,eventTarget:i,eventType:r,loadState:o}=t.attribution,s=this.buildInitialValues(t);this.addIfPresent(s,"event_time",n);const a=this.buildInitialContext(t);this.addIfPresent(a,"event_target",i),this.addIfPresent(a,"event_type",r),this.addIfPresent(a,Je,o),this.pushMeasurement(s,a)})}measureINP(){Go(t=>{const{interactionTime:n,presentationDelay:i,inputDelay:r,processingDuration:o,nextPaintTime:s,loadState:a,interactionTarget:u,interactionType:m}=t.attribution,d=this.buildInitialValues(t);this.addIfPresent(d,"interaction_time",n),this.addIfPresent(d,"presentation_delay",i),this.addIfPresent(d,"input_delay",r),this.addIfPresent(d,"processing_duration",o),this.addIfPresent(d,"next_paint_time",s);const f=this.buildInitialContext(t);this.addIfPresent(f,Je,a),this.addIfPresent(f,"interaction_target",u),this.addIfPresent(f,"interaction_type",m),this.pushMeasurement(d,f)})}measureLCP(){Wo(t=>{const{elementRenderDelay:n,resourceLoadDelay:i,resourceLoadDuration:r,timeToFirstByte:o,element:s}=t.attribution,a=this.buildInitialValues(t);this.addIfPresent(a,"element_render_delay",n),this.addIfPresent(a,"resource_load_delay",i),this.addIfPresent(a,"resource_load_duration",r),this.addIfPresent(a,Vn,o);const u=this.buildInitialContext(t);this.addIfPresent(u,"element",s),this.pushMeasurement(a,u)})}measureTTFB(){Yo(t=>{const{dnsDuration:n,connectionDuration:i,requestDuration:r,waitingDuration:o,cacheDuration:s}=t.attribution,a=this.buildInitialValues(t);this.addIfPresent(a,"dns_duration",n),this.addIfPresent(a,"connection_duration",i),this.addIfPresent(a,"request_duration",r),this.addIfPresent(a,"waiting_duration",o),this.addIfPresent(a,"cache_duration",s);const u=this.buildInitialContext(t);this.pushMeasurement(a,u)})}buildInitialValues(t){return{[t.name.toLowerCase()]:t.value,delta:t.delta}}buildInitialContext(t){var n;const i=(n=lt(Bt,X.session))!==null&&n!==void 0?n:j;return{id:t.id,rating:t.rating,navigation_type:t.navigationType,navigation_entry_id:i}}pushMeasurement(t,n){this.corePushMeasurement({type:"web-vitals",values:t},{context:n})}addIfPresent(t,n,i){i&&(t[n]=i)}}class ts extends be{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-web-vitals",this.version=re}initialize(){this.logDebug("Initializing"),this.intializeWebVitalsInstrumentation().initialize()}intializeWebVitalsInstrumentation(){return this.config.trackWebVitalsAttribution?new es(this.api.pushMeasurement):new vt(this.api.pushMeasurement)}}const ns="navigation",is="resource",rs=/^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9]{1,2}$/;function Vi(e=[]){for(const t of e)if(t.name==="traceparent"){if(!rs.test(t.description))continue;const[,n,i]=t.description.split("-");if(n!=null&&i!=null)return{traceId:n,spanId:i};break}}function os(){return"PerformanceObserver"in window}function qi(e=[],t){return e.some(n=>n&&t.match(n)!=null)}function ss(e){if(document.readyState==="complete")e();else{const t=()=>{document.readyState==="complete"&&(e(),document.removeEventListener("readystatechange",t))};document.addEventListener("readystatechange",t)}}function as(e,t={}){for(const[n,i]of Object.entries(t)){const r=e[n];return r==null?!1:Ne(i)?i.includes(r):r===i}return!0}function Gi(e){const{connectEnd:t,connectStart:n,decodedBodySize:i,domainLookupEnd:r,domainLookupStart:o,duration:s,encodedBodySize:a,fetchStart:u,initiatorType:m,name:d,nextHopProtocol:f,redirectEnd:c,redirectStart:p,renderBlockingStatus:l,requestStart:v,responseEnd:h,responseStart:_,responseStatus:A,secureConnectionStart:w,transferSize:y,workerStart:D}=e;return{name:d,duration:x(s),tcpHandshakeTime:x(t-n),dnsLookupTime:x(r-o),tlsNegotiationTime:x(v-w),responseStatus:x(A),redirectTime:x(c-p),requestTime:x(_-v),responseTime:x(h-_),fetchTime:x(h-u),serviceWorkerTime:x(u-D),decodedBodySize:x(i),encodedBodySize:x(a),cacheHitStatus:I(),renderBlockingStatus:x(l),protocol:f,initiatorType:m,visibilityState:document.visibilityState,ttfb:x(_-v)};function I(){let g="fullLoad";return y===0?i>0&&(g="cache"):A!=null?A===304&&(g="conditionalFetch"):a>0&&y<a&&(g="conditionalFetch"),g}}function us(e){const{activationStart:t,domComplete:n,domContentLoadedEventEnd:i,domContentLoadedEventStart:r,domInteractive:o,fetchStart:s,loadEventEnd:a,loadEventStart:u,responseStart:m,type:d}=e,f=cs();return Object.assign(Object.assign({},Gi(e)),{pageLoadTime:x(n-s),documentParsingTime:x(f?o-f:null),domProcessingTime:x(n-o),domContentLoadHandlerTime:x(i-r),onLoadTime:x(a-u),ttfb:x(Math.max(m-(t??0),0)),type:d})}function cs(){var e;return((e=performance.timing)===null||e===void 0?void 0:e.domLoading)!=null?performance.timing.domLoading-performance.timeOrigin:null}function x(e){return e==null?j:typeof e=="number"?Math.round(e).toString():e.toString()}function ls(e,t){let n;const i=new Promise(o=>{n=o});return new PerformanceObserver(o=>{var s;const[a]=o.getEntries();if(a==null||qi(t,a.name))return;const u=a.toJSON();let m=Vi(u?.serverTiming);const d=(s=lt(Bt,X.session))!==null&&s!==void 0?s:j,f=Object.assign(Object.assign({},us(u)),{faroNavigationId:ut(),faroPreviousNavigationId:d});qt(Bt,f.faroNavigationId,X.session),e("faro.performance.navigation",f,void 0,{spanContext:m,timestampOverwriteMs:performance.timeOrigin+u.startTime}),n(f)}).observe({type:ns,buffered:!0}),i}const ds={initiatorType:["xmlhttprequest","fetch"]};function fs(e,t,n){const i=R.config.trackResources;new PerformanceObserver(o=>{const s=o.getEntries();for(const a of s){if(qi(n,a.name))return;const u=a.toJSON();let m=Vi(u?.serverTiming);if(i==null&&as(u,ds)||i){const d=Object.assign(Object.assign({},Gi(u)),{faroNavigationId:e,faroResourceId:ut()});t("faro.performance.resource",d,void 0,{spanContext:m,timestampOverwriteMs:performance.timeOrigin+u.startTime})}}}).observe({type:is,buffered:!0})}var ps=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(d){try{m(i.next(d))}catch(f){s(f)}}function u(d){try{m(i.throw(d))}catch(f){s(f)}}function m(d){d.done?o(d.value):r(d.value).then(a,u)}m((i=i.apply(e,t||[])).next())})};class ms extends be{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-performance",this.version=re}initialize(){if(!os()){this.logDebug("performance observer not supported. Disable performance instrumentation.");return}ss(()=>ps(this,void 0,void 0,function*(){const t=this.api.pushEvent,n=this.getIgnoreUrls(),{faroNavigationId:i}=yield ls(t,n);i!=null&&fs(i,t,n)}))}getIgnoreUrls(){var t;return(t=this.transports.transports)===null||t===void 0?void 0:t.flatMap(n=>n.getIgnoreUrls())}}function vs(e={}){const t=[new bi,new ts,new eo,new To];return e.enablePerformanceInstrumentation!==!1&&t.unshift(new ms),e.captureConsole!==!1&&t.push(new ft({disabledLevels:e.captureConsoleDisabledLevels})),t}const hs="browser",gs=()=>{const e=window.k6;return{k6:Object.assign({isK6Browser:!0},e?.testRunId&&{testRunId:e?.testRunId})}};var qn=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(d){try{m(i.next(d))}catch(f){s(f)}}function u(d){try{m(i.throw(d))}catch(f){s(f)}}function m(d){d.done?o(d.value):r(d.value).then(a,u)}m((i=i.apply(e,t||[])).next())})},bs=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const ws=30,ys=5,Ss=5e3,Es=6e4,Ts=429,ks=202;class Is extends Sr{constructor(t){var n,i,r,o;super(),this.options=t,this.name="@grafana/faro-web-sdk:transport-fetch",this.version=re,this.disabledUntil=new Date,this.rateLimitBackoffMs=(n=t.defaultRateLimitBackoffMs)!==null&&n!==void 0?n:Ss,this.getNow=(i=t.getNow)!==null&&i!==void 0?i:()=>Date.now(),this.promiseBuffer=cr({size:(r=t.bufferSize)!==null&&r!==void 0?r:ws,concurrency:(o=t.concurrency)!==null&&o!==void 0?o:ys})}send(t){return qn(this,void 0,void 0,function*(){try{if(this.disabledUntil>new Date(this.getNow()))return this.logWarn(`Dropping transport item due to too many requests. Backoff until ${this.disabledUntil}`),Promise.resolve();yield this.promiseBuffer.add(()=>{const n=JSON.stringify(kr(t)),{url:i,requestOptions:r,apiKey:o}=this.options,s=r??{},{headers:a}=s,u=bs(s,["headers"]);let m;const d=this.metas.value.session;return d!=null&&(m=d.id),fetch(i,Object.assign({method:"POST",headers:Object.assign(Object.assign(Object.assign({"Content-Type":"application/json"},a??{}),o?{"x-api-key":o}:{}),m?{"x-faro-session-id":m}:{}),body:n,keepalive:n.length<=Es},u??{})).then(f=>qn(this,void 0,void 0,function*(){return f.status===ks&&f.headers.get("X-Faro-Session-Status")==="invalid"&&this.extendFaroSession(this.config,this.logDebug),f.status===Ts&&(this.disabledUntil=this.getRetryAfterDate(f),this.logWarn(`Too many requests, backing off until ${this.disabledUntil}`)),f.text().catch(J),f})).catch(f=>{this.logError(`Failed sending payload to the receiver
`,JSON.parse(n),f)})})}catch(n){this.logError(n)}})}getIgnoreUrls(){var t;return[this.options.url].concat((t=this.config.ignoreUrls)!==null&&t!==void 0?t:[])}isBatched(){return!0}getRetryAfterDate(t){const n=this.getNow(),i=t.headers.get("Retry-After");if(i){const r=Number(i);if(!isNaN(r))return new Date(r*1e3+n);const o=Date.parse(i);if(!isNaN(o))return new Date(o)}return new Date(n+this.rateLimitBackoffMs)}extendFaroSession(t,n){const i="Session expired",r=t.sessionTracking;if(r?.enabled){const{fetchUserSession:o,storeUserSession:s}=mi(r);Wt({fetchUserSession:o,storeUserSession:s})({forceSessionExtend:!0}),n(`${i} created new session.`)}else n(`${i}.`)}}function Os(e){var t,n,i,r,o,s,a,u,m,d;const f=[],c=ti(e.unpatchedConsole,e.internalLoggerLevel);e.transports?((e.url||e.apiKey)&&c.error('if "transports" is defined, "url" and "apiKey" should not be defined'),f.push(...e.transports)):e.url?f.push(new Is({url:e.url,apiKey:e.apiKey})):c.error('either "url" or "transports" must be defined');function p(){const v=Yr;return e.metas&&v.push(...e.metas),se(window.k6)?[...v,gs]:v}return{app:e.app,batching:Object.assign(Object.assign({},Vr),e.batching),dedupe:(t=e.dedupe)!==null&&t!==void 0?t:!0,globalObjectKey:e.globalObjectKey||zr,instrumentations:(n=e.instrumentations)!==null&&n!==void 0?n:vs(),internalLoggerLevel:(i=e.internalLoggerLevel)!==null&&i!==void 0?i:ei,isolate:(r=e.isolate)!==null&&r!==void 0?r:!1,logArgsSerializer:(o=e.logArgsSerializer)!==null&&o!==void 0?o:ri,metas:p(),parseStacktrace:wo,paused:(s=e.paused)!==null&&s!==void 0?s:!1,preventGlobalExposure:(a=e.preventGlobalExposure)!==null&&a!==void 0?a:!1,transports:f,unpatchedConsole:(u=e.unpatchedConsole)!==null&&u!==void 0?u:ct,beforeSend:e.beforeSend,eventDomain:(m=e.eventDomain)!==null&&m!==void 0?m:hs,ignoreErrors:e.ignoreErrors,ignoreUrls:((d=e.ignoreUrls)!==null&&d!==void 0?d:[]).concat([/\/collect(?:\/[\w]*)?$/]),sessionTracking:Object.assign(Object.assign({},Qr),e.sessionTracking),user:e.user,view:e.view,trackResources:e.trackResources,trackWebVitalsAttribution:e.trackWebVitalsAttribution}}function _s(e){const t=Os(e);if(t)return $r(t)}function xs({appName:e,tenant:t}){_s({url:Yn("/log/collect"),app:{name:e,version:"1.0.0",environment:"production"},user:{attributes:{tenant:t}},instrumentations:[new bi]})}window?.account?.faroEnabled&&xs({appName:"Account",tenant:window?.account?.livedomain});const Oe=document.querySelector("main"),Gn=document.getElementById("skipButton");function As(){Oe&&typeof window<"u"&&(window.scrollTo(0,0),Oe.setAttribute("tabindex","-1"),Oe.focus(),Oe.addEventListener("blur",()=>{Oe.removeAttribute("tabindex")}))}Gn&&Gn.addEventListener("click",As);var wt={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Check"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"check"},arguments:[],directives:[]}]}}],loc:{start:0,end:26}};wt.loc.source={body:`query Check {
    check
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function Ze(e,t){if(e.kind==="FragmentSpread")t.add(e.name.value);else if(e.kind==="VariableDefinition"){var n=e.type;n.kind==="NamedType"&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(i){Ze(i,t)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(i){Ze(i,t)}),e.definitions&&e.definitions.forEach(function(i){Ze(i,t)})}var Ft={};(function(){wt.definitions.forEach(function(t){if(t.name){var n=new Set;Ze(t,n),Ft[t.name.value]=n}})})();function Wn(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function Ps(e,t){var n={kind:e.kind,definitions:[Wn(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=Ft[t]||new Set,r=new Set,o=new Set;for(i.forEach(function(a){o.add(a)});o.size>0;){var s=o;o=new Set,s.forEach(function(a){if(!r.has(a)){r.add(a);var u=Ft[a]||new Set;u.forEach(function(m){o.add(m)})}})}return r.forEach(function(a){var u=Wn(e,a);u&&n.definitions.push(u)}),n}Ps(wt,"Check");var nn={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CustomerId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"exposeCustomerIdEnabled"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"customer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"exposeCustomerIdEnabled"}}}]}]}]}}]}}],loc:{start:0,end:128}};nn.loc.source={body:`query CustomerId($exposeCustomerIdEnabled: Boolean!) {
    customer {
        id @include(if: $exposeCustomerIdEnabled)
    }
}
`,name:"GraphQL request",locationOffset:{line:1,column:1}};function Qe(e,t){if(e.kind==="FragmentSpread")t.add(e.name.value);else if(e.kind==="VariableDefinition"){var n=e.type;n.kind==="NamedType"&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach(function(i){Qe(i,t)}),e.variableDefinitions&&e.variableDefinitions.forEach(function(i){Qe(i,t)}),e.definitions&&e.definitions.forEach(function(i){Qe(i,t)})}var Ut={};(function(){nn.definitions.forEach(function(t){if(t.name){var n=new Set;Qe(t,n),Ut[t.name.value]=n}})})();function Hn(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function Rs(e,t){var n={kind:e.kind,definitions:[Hn(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=Ut[t]||new Set,r=new Set,o=new Set;for(i.forEach(function(a){o.add(a)});o.size>0;){var s=o;o=new Set,s.forEach(function(a){if(!r.has(a)){r.add(a);var u=Ut[a]||new Set;u.forEach(function(m){o.add(m)})}})}return r.forEach(function(a){var u=Hn(e,a);u&&n.definitions.push(u)}),n}Rs(nn,"CustomerId");function Ns(e,t=!0){const n=e.match("/my-account|customer-service|account-settings|perform-account-link|link-accounts");return(t?e==="/":e==="/account/"||e==="/account")||!!(n&&n.length)}const $t=9e4;async function zt(){if(Ns(window.location.pathname,!1))try{var e=await Xi(wt);e.extensions.flags.includes("LOGGED_IN")?setTimeout(zt,$t):window.location.href=Yn(`/login?returnTo=${encodeURIComponent(`${window.location.pathname}${window.location.search}`)}`)}catch{setTimeout(zt,$t)}}setTimeout(zt,$t);let Se={};_i(e=>{Se.ttfb=Math.round(e.value)});Xt(e=>{Se.fcp=Math.round(e.value)});Oi(e=>{Se.lcp=Math.round(e.value)});Pi(e=>{Se.fid=Math.round(e.value)});Si(e=>{Se.cls=e.value});let Kn=!1;addEventListener("visibilitychange",()=>{!Kn&&document.visibilityState==="hidden"&&(window.Tracker.handlers.performanceData(Se,Zi("Account")),Kn=!0)});
