"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[40979,16222,22175],{817786:(e,r,i)=>{i.d(r,{Z:()=>t});var s=i(667294);class t extends s.Component{constructor(...e){var r,i;super(...e),(r="symbol"==typeof(i=function(e,r){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,r||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r="prevOverflow","string"))?i:i+"")in this?Object.defineProperty(this,r,{value:null,enumerable:!0,configurable:!0,writable:!0}):this[r]=null}componentDidMount(){"undefined"!=typeof window&&(this.prevOverflow=window.document.body.style.overflow,window.document.body.style.overflow="hidden")}componentWillUnmount(){"undefined"!=typeof window&&(window.document.body.style.overflow=this.prevOverflow)}render(){return this.props.children}}},344569:(e,r,i)=>{i.d(r,{Z:()=>d});var s=i(667294),t=i(883119),o=i(144326),a=i(785893);function l(e,r,i){var s;return(r="symbol"==typeof(s=function(e,r){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,r||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"))?s:s+"")in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}class n extends s.Component{constructor(...e){super(...e),l(this,"state",{controls:!1,playing:!1,volume:+!this.props.muted}),l(this,"handlePause",({event:e})=>{e.stopPropagation(),this.setState({playing:!1})}),l(this,"handlePlay",({event:e})=>{e.stopPropagation(),this.setState({playing:!0})}),l(this,"handleShowControls",()=>this.setState({controls:!0})),l(this,"handleHideControls",()=>this.setState({controls:!1})),l(this,"handleTouch",({event:e})=>{e.stopPropagation(),this.setState(e=>({playing:!e.playing}))}),l(this,"handleVolumeChange",({event:e,volume:r})=>{e.stopPropagation(),this.setState({volume:r})})}render(){let{backgroundColor:e,captions:r,height:i,loop:s,showControls:o,src:l,width:n,autoplay:d}=this.props,{controls:_,playing:c,volume:u}=this.state;return(0,a.jsx)(t.iP,{onMouseEnter:this.handleShowControls,onMouseLeave:this.handleHideControls,onTap:this.handleTouch,rounding:2,children:(0,a.jsx)(t.nk,{aspectRatio:n/i,autoplay:!!d,backgroundColor:e,captions:r??void 0,controls:o&&_,loop:s,onControlsPause:this.handlePause,onControlsPlay:this.handlePlay,onPlay:()=>{c||this.setState({playing:!0})},onPlayError:()=>this.setState({playing:!1}),onVolumeChange:this.handleVolumeChange,playing:c,src:l,volume:u})})}}function d(e){let r=(0,o.ZP)();return(0,a.jsx)(n,{...e,i18n:r})}l(n,"defaultProps",{captions:void 0,loop:!1,autoplay:!1,muted:!1,showControls:!0})},707874:(e,r,i)=>{i.d(r,{$4:()=>C,AQ:()=>H,ASPECT_RATIO_FORMAT_MAP:()=>V,Bj:()=>P,DB:()=>X,FM:()=>Q,G9:()=>L,GX:()=>m,Hy:()=>ed,JO:()=>w,Ke:()=>T,LM:()=>t,Lc:()=>ec,Lr:()=>en,MN:()=>b,Mn:()=>J,N8:()=>f,NB:()=>er,P0:()=>ei,P9:()=>ea,Pn:()=>y,S:()=>N,TK:()=>A,TZ:()=>S,UU:()=>c,Uw:()=>K,W_:()=>el,XB:()=>n,Xy:()=>R,YM:()=>I,aD:()=>eu,aj:()=>G,bA:()=>D,bo:()=>d,cH:()=>em,dS:()=>O,eZ:()=>g,fk:()=>et,g1:()=>e_,gU:()=>_,i2:()=>u,iR:()=>j,jh:()=>eh,km:()=>h,lx:()=>M,mr:()=>Y,mt:()=>F,n_:()=>U,np:()=>B,of:()=>s,q:()=>ep,qY:()=>x,qm:()=>eo,rc:()=>$,ro:()=>eg,sD:()=>a,sG:()=>p,u1:()=>W,uR:()=>l,v5:()=>o,v9:()=>q,vk:()=>ee,wj:()=>E,x1:()=>k,yC:()=>v,yI:()=>z,yb:()=>Z,zr:()=>es});let s=880,t=340,o=380,a=510,l=40,n=20,d=4,_=474,c=134,u=96,h=800,g=186,p=40,m=10,f=48,P=88,v=183,b=130,y=24,E=400,A=50,I=8,x=8,O=5,S=29,R=5,z=20,C=400,T=100,w=800,N=800,M=500,D=40,L=100,j=5,k=["attempted","publishing","succeeded","uploading"],V={carousel:[{w:2,h:3},{w:3,h:4},{w:1,h:1}],single:[{w:2,h:3},{w:3,h:4},{w:1,h:1}],story:[{w:9,h:16}],storyFARPortrait:[{w:1,h:2},{w:9,h:16},{w:2,h:3},{w:3,h:4},{w:4,h:5},{w:1,h:1}],storyFARLandscape:[{w:2,h:1},{w:16,h:9},{w:3,h:2},{w:4,h:3},{w:5,h:4},{w:1,h:1}]},U=["tl","tc","tr","bl","bc","br"],G=["left","center"],Z=["top","center","bottom"],B=["none","uppercase"],F=["sm","md","lg"],H=[1,.75],X=198,Y=132,q=1,W=56,K=240,$="cubic-bezier(0.66, 0.025, 0.33, 0.975)",Q=1e3,J=1500,ee=2,er=3,ei=20,es=20,et=2,eo=["processing","publishing","saving"],ea=300.5,el=1,en=0xc800000,ed=2500,e_=3,ec="pin-builder-default-education-id",eu="pin-builder-default-tour-id",eh="pin-builder-editing-tour-id",eg="save_from_url",ep=["processing","edited","creating","saving","saved"],em=2048},994964:(e,r,i)=>{i.d(r,{Z:()=>a});var s=i(868808);function t(e,r,i){var s;return(r="symbol"==typeof(s=function(e,r){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,r||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"))?s:s+"")in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}let o={carousel:{authOnly:!0,partnerOnly:!0},disabledIdeaPinCreation:{experiment:"disable_pin_creation",groups:/(disable_all|disable_idea_pins|disable_video)/,authOnly:!0,partnerOnly:!1},disabledPinCreation:{experiment:"disable_pin_creation",groups:/(disable_all|disable_web_pins)/,authOnly:!0,partnerOnly:!1},disabledVideoPinCreation:{experiment:"disable_pin_creation",groups:/(disable_all|disable_video)/,authOnly:!0,partnerOnly:!1},editing:{authOnly:!0,partnerOnly:!0},education:{authOnly:!0,partnerOnly:!0},offsitePinCreation:{scenarios:["offsite_pin_creation"]},layouts:{authOnly:!0,partnerOnly:!0,scenarios:["default","ad_creation","story_pin"]},linkStatusValidation:{authOnly:!0,partnerOnly:!0},requireLink:{scenarios:["ad_creation"]},multi_pin:{authOnly:!0,partnerOnly:!0,scenarios:["default","ad_creation"]},multi_pin_pinner:{authOnly:!0,partnerOnly:!1,scenarios:["default"]},imageSignals:{authOnly:!0,partnerOnly:!0,experiment:"pin_quality_signal_image",groups:/^(employees|enabled)/},scheduling:{authOnly:!0,partnerOnly:!0,scenarios:["default"]},shop_the_pin:{authOnly:!0,partnerOnly:!0},storyPinCommentsPermissions:{authOnly:!0,partnerOnly:!1,groups:/^(employees|enabled)/,scenarios:["story_pin_v2"]},systemFonts:{authOnly:!0,partnerOnly:!0},tagging:{authOnly:!0,partnerOnly:!0,experiment:"web_pin_builder_tagging",groups:/^(employees|enabled|rollout)/},suppressSuccessModal:{scenarios:["ad_creation","business_nux"]},video:{customEnabledCheck:({user:e})=>!!e?.video_upload_allowed,authOnly:!0,hasCustomEnabledCheck:()=>!0},videoEditing:{authOnly:!0,partnerOnly:!0,experiment:"video_edit",groups:/^(employees|enabled)/,orbacDisabled:!0},videoTagging:{authOnly:!0,partnerOnly:!0,languages:["en"]},pinQuality:{partnerOnly:!0},ideaPinProductTagging:{authOnly:!0,experiment:"web_idea_pin_product_tagging",groups:/^(employees|enabled)/,partnerOnly:!1,scenarios:["story_pin_v2"]},ideaPinAltText:{authOnly:!0,experiment:"web_idea_pin_creation_alt_text",groups:/^(employees|enabled)/,partnerOnly:!1,scenarios:["story_pin_v2"]},pinItemBase64:{authOnly:!0,experiment:"aid_exp_pin_builder_item_base64",groups:/^(employees|enabled)/}},a=new class{constructor(){t(this,"_experiments",null),t(this,"_viewer",null),t(this,"_advertiser",null),t(this,"_scenario",null),t(this,"_language",null),t(this,"_context",null),t(this,"_orbacActingAs",null)}initialize(e){let{requestContext:r,viewer:i,location:t,advertiser:o,scenario:a,orbacActingAs:l}=e;this._context=e,this._experiments=r.experimentsClient,this._language=r.language,this._viewer=i,this._advertiser=o,this._orbacActingAs=l;let{adCreate:n}=(0,s.mB)(t.search);a?this._scenario=a:n?this._scenario="ad_creation":this._scenario="default"}scenario(){return this._scenario}enabled(e){if(!this._viewer||!this._experiments)return!1;let{advertisers:r,authOnly:i,customEnabledCheck:s,experiment:t,groups:a=/.*/,hasCustomEnabledCheck:l,languages:n,orbacDisabled:d,partnerOnly:_,scenarios:c,skipActivation:u}=o[e];return(!this._orbacActingAs?.id||this._orbacActingAs.id===this._viewer.id||!d)&&(l&&s&&this._context&&l(this._context)?!!this._context&&s(this._context):u&&this._experiments?!!t&&this.checkExperimentWithSkipActivation(e):!!r&&!!this._advertiser&&null!==this._advertiser.billing_type||(!this._viewer||!i||!!this._viewer.isAuth)&&(!this._viewer||!_||!!this._viewer.isPartner)&&(!c||!!c.includes(this._scenario))&&(!n||!!n.includes(this._language))&&(!t||a.test(this.getExperimentGroup(e)||"")))}getExperimentGroup(e){if(!this._viewer||!this._experiments)return null;let{checkExperiment:r}=this._experiments;switch(e){case"disabledIdeaPinCreation":case"disabledPinCreation":case"disabledVideoPinCreation":return r("disable_pin_creation").group??null;case"imageSignals":return r("pin_quality_signal_image").group??null;case"tagging":return r("web_pin_builder_tagging").group??null;case"videoEditing":return r("video_edit").group??null;case"ideaPinProductTagging":return r("web_idea_pin_product_tagging").group??null;case"ideaPinAltText":return r("web_idea_pin_creation_alt_text").group??null;case"pinItemBase64":return r("aid_exp_pin_builder_item_base64").group??null;default:return null}}checkExperimentWithSkipActivation(e){if(!this._viewer||!this._experiments)return!1;let{checkExperiment:r}=this._experiments;switch(e){case"disabledIdeaPinCreation":case"disabledPinCreation":case"disabledVideoPinCreation":return r("disable_pin_creation",{dangerouslySkipActivation:!0}).anyEnabled??!1;case"imageSignals":return r("pin_quality_signal_image",{dangerouslySkipActivation:!0}).anyEnabled??!1;case"tagging":return r("web_pin_builder_tagging",{dangerouslySkipActivation:!0}).anyEnabled??!1;case"videoEditing":return r("video_edit",{dangerouslySkipActivation:!0}).anyEnabled??!1;default:return!1}}}},522574:(e,r,i)=>{i.d(r,{Z:()=>s});function s(e){let r=[];return e.items?Array.from(e.items).forEach(e=>{if("file"===e.kind){let i=e.getAsFile();i&&r.push(i)}}):r.concat(Array.from(e.files)),r}},463420:(e,r,i)=>{i.d(r,{Z:()=>t});var s=i(477058);function t(e,r){let i=(0,s.BE)();e({event_type:13,view_type:212}),e(r),e({event_type:13,view_type:i?.viewType,view_parameter:i?.viewParameter,view_data:i?.viewData})}},66810:(e,r,i)=>{i.d(r,{Cc:()=>h,DL:()=>d,Gf:()=>m,LX:()=>t,Lc:()=>f,Ls:()=>g,Rf:()=>n,YL:()=>l,ap:()=>o,h8:()=>c,pE:()=>_,s5:()=>p,tQ:()=>u,yR:()=>a});var s=i(883119);let t={w:9,h:16},o=t.w/t.h,a=8,l=10,n=5e3,d=2e3;function _(e,r=1){return{x:(e??24)/5,y:(e??24)*(r-1)}}let c={COMMENT_REPLY_STICKER:"story_pin_comment_reply_block",GENERIC_STICKER:"story_pin_generic_interactive_sticker_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},u=[c.IMAGE,c.VIDEO],h={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28},g=new s.Ry(1),p=new s.H3([g]),m=new s.H3([p]),f=e=>{let r=Math.floor(e||0),i=Math.floor(r/60),s=r-60*i,t=i<10?`${i}`:i,o=s<10?`0${s}`:s;return`${t}:${o}`}},625940:(e,r,i)=>{i.d(r,{Z:()=>s});let s=()=>window.location.pathname},701899:(e,r,i)=>{i.d(r,{Z:()=>d});var s=i(667294),t=i(883119),o=i(876594),a=i(785893);function l(e,r,i){var s;return(r="symbol"==typeof(s=function(e,r){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,r||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"))?s:s+"")in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}let n={default:{backgroundColor:o.I0k,boxShadow:"none"},drag:{backgroundColor:"#d7edff",boxShadow:"0 0 0 1px #0074e8"},error:{backgroundColor:"#ffe0e0",boxShadow:"0 0 0 1px #e60023"}};class d extends s.Component{constructor(...e){super(...e),l(this,"state",{isDraggingOver:!1,isHoveringOver:!1,containedHeight:null}),l(this,"handleOnDragEnter",e=>{let{onDragEnter:r}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!0}),r&&r(e)}),l(this,"handleOnDragLeave",e=>{let{onDragLeave:r}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!1}),r&&r(e)}),l(this,"handleOnDragOver",e=>{let{onDragOver:r}=this.props;e.preventDefault(),e.stopPropagation(),r&&r(e)}),l(this,"handleOnDrop",e=>{let{onDrop:r}=this.props;e.preventDefault(),e.stopPropagation(),this.setState({isDraggingOver:!1}),r&&r(e)}),l(this,"handleMouseEnter",()=>{let{onMouseEnter:e}=this.props;e&&e(),this.setState({isHoveringOver:!0})}),l(this,"handleMouseLeave",()=>{let{onMouseLeave:e}=this.props;e&&e(),this.setState({isHoveringOver:!1})}),l(this,"setContainedHeight",e=>{this.setState({containedHeight:e})})}getDragContainerStyles(e,r){return r&&"default"===e?{...n[e],backgroundColor:r}:n[e]}render(){let{children:e,color:r,dropRounding:i,hasError:s,height:o,position:l,width:n}=this.props,{isDraggingOver:d,isHoveringOver:_,containedHeight:c}=this.state;return(0,a.jsx)(t.xu,{dangerouslySetInlineStyle:{__style:{...this.getDragContainerStyles(d?"drag":s?"error":"default",r),...i?{borderRadius:i}:{}}},"data-test-id":"drag-behavior-container",height:o||c||"100%",onDragEnter:this.handleOnDragEnter,onDragLeave:this.handleOnDragLeave,onDragOver:this.handleOnDragOver,onDrop:this.handleOnDrop,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,position:l,rounding:2,width:n||"100%",children:e(d,_,this.setContainedHeight,c)})}}},547482:(e,r,i)=>{i.d(r,{Z:()=>d});var s=i(667294),t=i(883119),o=i(876594),a=i(701899),l=i(785893);let n={cursor:"pointer",height:"100%",opacity:0,position:"absolute",width:"100%",left:0,top:0,fontSize:0},d=e=>{let[r,i]=(0,s.useState)(!1),d=r=>{let{onChange:i}=e;r.preventDefault(),r.stopPropagation(),i&&i(r),r.target.value=""},_=r=>{let{onClick:i}=e;i&&i(r)},{accept:c,accessibilityLabel:u,additionalAccessibilityLabel:h,allowMultipleFiles:g,children:p,color:m,dropRounding:f,hasError:P,height:v,id:b,onDrop:y,position:E,rounding:A=2,width:I,isAriaHidden:x,experimentsClient:O}=e;return(0,l.jsx)(a.Z,{color:m,dropRounding:f,experimentsClient:O,hasError:P,height:v,onDrop:y,position:E,width:I,children:e=>(0,l.jsxs)(t.xu,{dangerouslySetInlineStyle:{__style:{...r?{border:`2px solid ${o.qtB}`}:{}}},height:"100%",onBlur:()=>i(!1),onFocus:()=>i(!0),position:"relative",rounding:A,children:[p(e),(0,l.jsx)("input",{accept:c,"aria-describedby":"upload-button-explanation","aria-hidden":x,"aria-label":u,"data-test-id":b,id:b,multiple:g,onChange:d,onClick:_,style:n,tabIndex:x?-1:0,type:"file"}),h?(0,l.jsx)(t.xu,{display:"visuallyHidden",id:"upload-button-explanation",children:(0,l.jsx)(t.xv,{children:h})}):void 0]})})}},428126:(e,r,i)=>{i.d(r,{Z:()=>t});var s=i(252071);function t(e,{onSuccess:r,onError:i,onProcessingStarted:t,resolvedAfterProcessingStarted:o,delay:a=2e3},l){let n,d,_=!1,c=()=>{clearTimeout(d),clearTimeout(n)},u=()=>{_||s.Z.create("VIPResource",{upload_ids:[e],orbacSubjectId:l}).callGet().then(s=>{let{data:l}=s.resource_response;if(l[e]){let{status:s,signature:h,failure_code:g}=l[e];n||(n=setTimeout(()=>{_=!0,i("","registered_timeout")},6e4)),d||(d=setTimeout(()=>{_=!0,i("","processing_timeout")},3e5)),"processing"===s||"registered"===s?"processing"===s?(clearTimeout(n),t?o?(clearTimeout(d),t(h)):(t(h),setTimeout(()=>u(),a)):setTimeout(()=>u(),a)):setTimeout(()=>u(),a):"succeeded"===s?(c(),r(h)):(c(),i(`VIP status failure code: ${g}`,null))}else i("VIP upload ID was not returned",null)}).catch(()=>{i("VIP failure with checking status",null)})};u()}},248623:(e,r,i)=>{i.d(r,{P7:()=>t,Zx:()=>l,sc:()=>a,ss:()=>o,xl:()=>s});let s=["image/bmp","image/gif","image/jpeg","image/png","image/tiff","image/webp"],t=["bmp","gif","jpg","jpeg","png","tiff","webp"],o=["video/mp4","video/x-m4v","video/quicktime"],a=["mp4","m4v","mov"],l={border:"2px dashed #DADADA",borderRadius:"32px",pointerEvents:"none"}},557268:(e,r,i)=>{i.d(r,{Z:()=>l});var s=i(240760),t=i(707874),o=i(994964);let a=(e,r)=>r.ngettext('pixel', 'pixels', e, 'pinBuilder.errorMessaging.pixel', 'Label for number of pixels');function l(e,r,i,l){switch(e){case"FILE_UNRECOGNIZED_TYPE":return{dispatchId:i,id:"FILE_UNRECOGNIZED_TYPE",type:"error",message:r._('Your upload failed because it\'s the wrong format.', 'vip.errorMessaging.message', 'Error message uploading a file format that is not supported.'),blocking:!0};case"IMAGE_OVER_MAX_DIMENSIONS":return{dispatchId:i,id:"IMAGE_OVER_MAX_DIMENSIONS",type:"error",message:r._('This image is too large and can\'t be uploaded. Please try a smaller image size.', 'vip.errorMessaging.message', 'Error message uploading an image file that is too large'),blocking:!0};case"IMAGE_UNDER_MIN_DIMENSIONS":let[n,d]=o.Z.enabled("pinQuality")||l?.isStoryPin?[300,200]:[100,100];return{dispatchId:i,id:"IMAGE_UNDER_MIN_DIMENSIONS",type:"error",message:(0,s.nk)(r._('Hmm...this image is too small. Make sure your images are at least {{ minWidth }} x {{ minHeight }} {{ pixelString }}.', 'vip.errorMessaging.minImageMessage', 'Error message when uploading an image file that is smaller than the supported height and width.'),{minHeight:n,minWidth:d,pixelString:a(d,r)}).join(""),blocking:!0};case"IMAGE_OVER_MAX_FILE_SIZE":return{dispatchId:i,id:"IMAGE_OVER_MAX_FILE_SIZE",type:"error",message:(0,s.nk)(r.ngettext('This image is too large and can\'t be uploaded. Images can\'t be larger than {{max_size_mb}}MB', 'This image is too large and can\'t be uploaded. Images can\'t be larger than {{max_size_mb}}MB', 20, 'vip.errorMessaging.message', 'Error message when uploading an image file larger than the supported size'),{max_size_mb:20}).join(""),blocking:!0};case"IMAGE_UNRECOGNIZED_TYPE":return{dispatchId:i,id:"IMAGE_UNRECOGNIZED_TYPE",type:"error",message:r._('This image type is invalid - please make sure the image is natively .jpg or .png', 'vip.errorMessaging.message', 'Error message uploading an image that is malformed in some way'),blocking:!0};case"VIDEO_UNDER_MIN_DIMENSIONS":return{dispatchId:i,id:"VIDEO_UNDER_MIN_DIMENSIONS",type:"error",message:(0,s.nk)(r.ngettext('This video is too small and can\'t be uploaded. Videos must have a height and width larger than {{min_size_video}} pixel', 'This video is too small and can\'t be uploaded. Videos must have a height and width larger than {{min_size_video}} pixels', 100, 'vip.errorMessaging.message', 'Error message when uploading an video file that is smaller than the supported height and width.'),{min_size_video:100}).join(""),blocking:!0};case"VIDEO_BELOW_MIN_DURATION":let _=Math.floor(4);return{dispatchId:i,id:"VIDEO_BELOW_MIN_DURATION",type:"error",message:(0,s.nk)(r.ngettext('This video is too short and can\'t be uploaded. Video can\'t be shorter than {{minVideoLengthSeconds}} second.', 'This video is too short and can\'t be uploaded. Video can\'t be shorter than {{minVideoLengthSeconds}} seconds.', _, 'vip.errorMessaging.message', 'Error message uploading a video file that is shorter than required seconds.'),{minVideoLengthSeconds:_}).join(""),blocking:!0};case"STORY_PIN_VIDEO_BELOW_MIN_DURATION":let c=t.W_;return{dispatchId:i,id:"STORY_PIN_VIDEO_BELOW_MIN_DURATION",type:"error",message:(0,s.nk)(r.ngettext('This video is too short and can\'t be uploaded. Video can\'t be shorter than {{minStoryPinVideoLengthSeconds}} second.', 'This video is too short and can\'t be uploaded. Video can\'t be shorter than {{minStoryPinVideoLengthSeconds}} seconds.', c, 'vip.errorMessaging.storyPinVideoBelowMin.message', 'Error message uploading a video file that is shorter than required seconds.'),{minStoryPinVideoLengthSeconds:c}).join(""),blocking:!0};case"VIDEO_COVER_INVALID_ASPECT_RATIO":return{dispatchId:i,id:"VIDEO_COVER_INVALID_ASPECT_RATIO",type:"error",message:r._('The video\'s cover image must be of the same dimensions as the video itself', 'vip.errorMessaging.message', 'Error message when uploading cover image with non matching dimensions to video'),blocking:!0};case"VIDEO_GENERAL_UPLOAD_ERROR":return{dispatchId:i,id:"VIDEO_GENERAL_UPLOAD_ERROR",type:"error",message:r._('Hmm, your upload failed for some reason. Please try again.', 'vip.errorMessaging.message', 'Error message uploading a video file and the process fails'),blocking:!0};case"VIDEO_OVER_MAX_DURATION":return{dispatchId:i,id:"VIDEO_OVER_MAX_DURATION",type:"error",message:(0,s.nk)(r.ngettext('This video is too long and can\'t be uploaded. Videos can\'t be longer than {{max_video_length_minutes}} minute.', 'This video is too long and can\'t be uploaded. Videos can\'t be longer than {{max_video_length_minutes}} minutes.', 15, 'vip.errorMessaging.message', 'Error message uploading a video file that is longer than required minutes.'),{max_video_length_minutes:15}).join(""),blocking:!0};case"STORY_PIN_VIDEO_OVER_MAX_DURATION":return{dispatchId:i,id:"STORY_PIN_VIDEO_OVER_MAX_DURATION",type:"error",message:(0,s.nk)(r._('This video is too long and can\'t be uploaded. Videos can\'t be longer than {{max_video_length_seconds}} seconds.', 'vip.errorMessaging.message', 'Error message uploading a story pin video file that is longer than limit in seconds. max_video_length_seconds: Integer representing the max video length'),{max_video_length_seconds:Math.floor(t.P9)}).join(""),blocking:!0};case"VIDEO_OVER_MAX_FILE_SIZE":return{dispatchId:i,id:"VIDEO_OVER_MAX_FILE_SIZE",type:"error",message:(0,s.nk)(r.ngettext('This video is too large and can\'t be uploaded. Videos can\'t be larger than {{max_video_size_gb}}GB.', 'This video is too large and can\'t be uploaded. Videos can\'t be larger than {{max_video_size_gb}}GB.', 2, 'vip.errorMessaging.message', 'Error message uploading a video file larger than required gigabytes.'),{max_video_size_gb:2}).join(""),blocking:!0};case"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE":{let e=t.Lr/1024/1024;return{dispatchId:i,id:"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE",type:"error",message:(0,s.nk)(r.ngettext('This video is too large and can\'t be uploaded. Videos can\'t be larger than {{maxVideoFileSize}}MB.', 'This video is too large and can\'t be uploaded. Videos can\'t be larger than {{maxVideoFileSize}}MB.', e, 'vip.errorMessaging.message', 'Error message uploading a video file larger than required megabytes. maxVideoFileSize: max video size for videos attempting to upload'),{maxVideoFileSize:e}).join(""),blocking:!0}}case"VIDEO_UNRECOGNIZED_ENCODING":return{dispatchId:i,id:"VIDEO_UNRECOGNIZED_ENCODING",type:"error",message:r._('This video isn\'t encoded in H.264', 'vip.errorMessaging.message', 'Error message uploading a video file that is malformed (generic error message)'),blocking:!0};case"VIDEO_UNRECOGNIZED_ENCODING_IN_CHROME":return{dispatchId:i,id:"VIDEO_UNRECOGNIZED_ENCODING_IN_CHROME",type:"error",message:r._('This video isn\'t encoded in H.264 or H.265.  Please use Safari if you want to upload ProRes videos.', 'vip.errorMessaging.message.chrome', 'Error message uploading a video file that is malformed from Chrome'),blocking:!0};case"VIDEO_UNRECOGNIZED_ENCODING_IN_FIREFOX":return{dispatchId:i,id:"VIDEO_UNRECOGNIZED_ENCODING_IN_FIREFOX",type:"error",message:r._('This video isn\'t encoded in H.264.  Please use Safari if you want to upload H.265 or ProRes videos.', 'vip.errorMessaging.message.firefox', 'Error message uploading a video file that is malformed from Firefox'),blocking:!0};case"VIDEO_UNRECOGNIZED_ENCODING_IN_SAFARI":return{dispatchId:i,id:"VIDEO_UNRECOGNIZED_ENCODING_IN_SAFARI",type:"error",message:r._('This video isn\'t encoded in H.264 or H.265 or ProRes.', 'vip.errorMessaging.message.safari', 'Error message uploading a video file that is malformed from Safari'),blocking:!0};case"VIDEO_UNSUPPORTED_RATIO":return{dispatchId:i,id:"VIDEO_UNSUPPORTED_RATIO",type:"error",message:r._('This video is too tall or narrow and can\'t be uploaded. Videos need to be between 1:2 and 1.91:1 aspect ratio.', 'vip.errorMessaging.message', 'Error message uploading a video file that is not a supported aspect ratio'),blocking:!0};default:return{dispatchId:i,id:"GENERAL_ERROR",type:"error",message:r._('Hmm, something went wrong. Please try again.', 'vip.errorMessaging.message', 'Error message for generic error during Pin creation'),blocking:!0}}}},92979:(e,r,i)=>{i.d(r,{Z:()=>o});var s=i(118755),t=i(248623);let o=e=>(0,s.G6)(e)?[...t.xl,"image/heic"]:[...t.xl]},132793:(e,r,i)=>{i.d(r,{Z:()=>a});var s=i(172045),t=i(557268);let o=e=>r=>r((0,t.Z)("IMAGE_UNRECOGNIZED_TYPE",e)),a=e=>r=>new Promise((i,t)=>{let a=new Image;a.addEventListener("load",()=>i({fileSrc:r,height:a.height,id:(0,s.Z)(),name:r.name,size:r.size,src:a.src,type:"localImage",width:a.width})),a.addEventListener("error",()=>o(e)(t)),a.src=URL.createObjectURL(r)})},697208:(e,r,i)=>{i.d(r,{Z:()=>l});var s=i(172045),t=i(557268),o=i(120252);let a=e=>r=>{r((0,t.Z)((0,o.Z)(),e))},l=e=>r=>new Promise((i,t)=>{let o=new FileReader,l=(window.navigator?.userAgent||"").includes("Safari")?r.slice(0,r.size,"video/mp4"):r,n=URL.createObjectURL(l);o.addEventListener("load",()=>{let o=document.createElement("video");o.addEventListener("loadedmetadata",()=>i({id:(0,s.Z)(),duration:o.duration,fileSrc:r,height:o.videoHeight,name:r.name,size:r.size,src:o.src,thumbnail:0,type:"localVideo",width:o.videoWidth})),o.addEventListener("error",()=>a(e)(t)),o.src=n}),o.readAsDataURL(r)})},120252:(e,r,i)=>{i.d(r,{Z:()=>s});function s(){let e=window.navigator?.userAgent||"";if(e.includes("Firefox"))return"VIDEO_UNRECOGNIZED_ENCODING_IN_FIREFOX";if(e.includes("SamsungBrowser"))return"VIDEO_UNRECOGNIZED_ENCODING";if(e.includes("Opera")||e.includes("OPR"))return"VIDEO_UNRECOGNIZED_ENCODING";if(e.includes("Edge"))return"VIDEO_UNRECOGNIZED_ENCODING";if(e.includes("Edg"))return"VIDEO_UNRECOGNIZED_ENCODING";else if(e.includes("Chrome"))return"VIDEO_UNRECOGNIZED_ENCODING_IN_CHROME";else if(e.includes("Safari"))return"VIDEO_UNRECOGNIZED_ENCODING_IN_SAFARI";else return"VIDEO_UNRECOGNIZED_ENCODING"}},649745:(e,r,i)=>{i.d(r,{Z:()=>a});var s=i(252071),t=i(428126);let o=[200,201,204];function a(e,r,i=!0,l,n,d){return new Promise((a,_)=>{s.Z.create("VIPResource",{type:r,aux_data:n,orbacSubjectId:d}).callCreate().then(s=>{let{onCancelUpload:n,onFailureUpload:c,onFinishProcessing:u,onFinishUpload:h,onProgress:g,onStartProcessing:p,onStartUpload:m,setXhr:f}=l||{},{upload_id:P,upload_url:v,upload_parameters:b}=s.resource_response.data,y=e.size,E=Date.now();m&&m({fileSizeBytes:y,uploadId:P});let A=(e,r)=>{c&&c({failureReason:r,fileSizeBytes:y,message:e,uploadId:P}),_({isError:!0,uploadId:P})},I=new XMLHttpRequest;I.open("POST",v,!0),I.onabort=()=>{n&&n(P),_({isError:!1,uploadId:P})},I.onload=()=>{if(o.includes(I.status)){let e=Date.now(),s=(e-E)/1e3;if(h){let e=I.getResponseHeader("x-amz-request-id");h({amzId2:I.getResponseHeader("x-amz-id-2"),amzRequestId:e,statusCode:I.status,uploadId:P,uploadTime:s})}(0,t.Z)(P,{onProcessingStarted:e=>(p&&p({signature:e,uploadId:P}),i?a({signature:e,uploadId:P}):void 0),delay:r.includes("image")?2e3:8e3,onError:A,onSuccess:r=>{let i=(Date.now()-e)/1e3;return u&&u({fileSizeBytes:y,processingTime:i,signature:r,uploadId:P,uploadTime:s}),a({signature:r,uploadId:P})},resolvedAfterProcessingStarted:i},d)}else A(`XHR failure status code: ${I.status}`,null)},I.onerror=()=>{I.abort()},g&&(I.upload.onprogress=g),f&&f(I);let x=new FormData;Object.keys(b).forEach(e=>{x.append(e,b[e])}),x.append("file",e),I.send(x)}).catch(()=>{_({isError:!0})})})}},816222:(e,r,i)=>{i.d(r,{Z:()=>c});var s=i(248623),t=i(557268),o=i(132793),a=i(994964),l=i(741326),n=i(707874),d=i(697208),_=i(120252);function c({i18n:e,file:r,options:i,ideaPinRenamingEnabled:c,imageFileTypes:u=s.xl}){let{allowVideo:h,videoOnly:g}=i||{};if(s.ss.includes(r.type)&&h){let{forStoryPin:s}=i||{},o=s?n.Lr:0x80000000;return r.size>o?Promise.resolve((0,t.Z)(s?"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE":"VIDEO_OVER_MAX_FILE_SIZE",e)):(0,d.Z)(e)(r).then(r=>(function(e,r,i){let{forStoryPin:s,allowAllAspectRatios:o}=i||{},a=!!s,l=a?n.W_:4,d=a?n.P9:900;if(r.duration<l)return(0,t.Z)(a?"STORY_PIN_VIDEO_BELOW_MIN_DURATION":"VIDEO_BELOW_MIN_DURATION",e);if(r.duration>d)return(0,t.Z)(a?"STORY_PIN_VIDEO_OVER_MAX_DURATION":"VIDEO_OVER_MAX_DURATION",e);if(!r.width||!r.height)return(0,t.Z)((0,_.Z)(),e);if(!o&&(r.width/r.height<.5||r.width/r.height>1.91))return(0,t.Z)("VIDEO_UNSUPPORTED_RATIO",e);if(r.width<100||r.height<100)return(0,t.Z)("VIDEO_UNDER_MIN_DIMENSIONS",e);else return r})(e,r,i)).catch(e=>e)}return!u.includes(r.type)||g?Promise.resolve((0,t.Z)("FILE_UNRECOGNIZED_TYPE",e)):r.size>0x1400000?Promise.resolve((0,t.Z)("IMAGE_OVER_MAX_FILE_SIZE",e)):(0,o.Z)(e)(r).then(r=>(function(e,r,i,s){let[t,o]=a.Z.enabled("pinQuality")||s?.isStoryPin?[300,200]:[100,100],n=s?.minHeight||t,d=s?.minWidth||o;return i.height*i.width>0x5555555?(0,l.ZP)({errorId:"IMAGE_OVER_MAX_DIMENSIONS",i18n:e,ideaPinRenamingEnabled:r}):i.height<n||i.width<d?(0,l.ZP)({errorId:"IMAGE_UNDER_MIN_DIMENSIONS",i18n:e,ideaPinRenamingEnabled:r,options:s}):i})(e,c,r,i)).catch(e=>e)}},568377:(e,r,i)=>{i.d(r,{Z:()=>_});var s=i(667294),t=i(883119),o=i(758339),a=i(144326),l=i(322175),n=i(930597),d=i(785893);function _({asset:e,onBack:r,onDismiss:i,onError:_,onSave:c}){let u=(0,a.ZP)(),[h,g]=(0,s.useState)(),[p,m]=(0,s.useState)(),[f,P]=(0,s.useState)(!1),v=(0,s.useCallback)(()=>{if(p){let{width:e,height:r}=p.getBoundingClientRect();h&&h.resize(e,r,504)}},[p,h]);(0,s.useEffect)(()=>(window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v)}),[v]);let b=(0,d.jsx)(t.xu,{padding:8,children:(0,d.jsxs)(t.kC,{alignItems:"start",gap:{row:8,column:0},justifyContent:"between",children:[(0,d.jsx)(t.hU,{accessibilityLabel:u._('Back', 'previewCoverSourceModal.modalBackButton', 'Accessibility label for close modal button'),icon:"arrow-back",iconColor:"darkGray",onClick:r,size:"sm"}),(0,d.jsx)(t.X6,{align:"center",size:"600",children:u._('Crop cover', 'previewCoverSourceModal.headingText', 'heading text for profile cover cropping modal')}),(0,d.jsx)(t.hU,{accessibilityLabel:u._('Close', 'previewCoverSourceModal.closeModalButton', 'Accessibility label for close modal button'),icon:"cancel",iconColor:"darkGray",onClick:i,size:"sm"})]})});return(0,d.jsx)(o.ZP,{accessibilityModalLabel:u._('Crop Profile Cover', 'previewCoverSourceModal.accessibilityLabel', 'accessibility label for profile cover cropping modal'),allowClickAndDrag:!0,footer:(0,d.jsx)(t.kC,{justifyContent:"end",children:(0,d.jsx)(t.zx,{color:"red",disabled:f,onClick:()=>{if(h){let{width:r,height:i,src:s}=h.getCanvasOutput({width:e.width,height:e.height});P(!0),(0,l.Ix)(s,u).then(({image_url:e})=>{let s={width:r,height:i,url:e};c({source:"image",images:{"474x":s,"750x":s,"1200x":s}}),P(!1)}).catch(e=>{_(e),P(!1)})}},text:f?u._('Saving', 'previewCoverSourceModal.savingText', 'text on button when saving new profile cover'):u._('Done', 'previewCoverSourceModal.doneText', 'text on button to confirm new profile cover')})}),heading:b,onDismiss:i,size:"lg",children:(0,d.jsx)(t.xu,{ref:e=>{m(e),v()},color:"secondary",children:(0,d.jsx)(n.Z,{borderRadius:0,onLoaded:r=>{r&&(g(r),r.setImage(e.src).then(()=>{r.setAspectRatio({w:16,h:9}),v()}))},width:900})})})}},243842:(e,r,i)=>{i.d(r,{Z:()=>m});var s=i(667294),t=i(883119),o=i(344569),a=i(144326),l=i(817786),n=i(649745),d=i(547007),_=i(322175),c=i(930597),u=i(785893);function h(e,r,i){var s;return(r="symbol"==typeof(s=function(e,r){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,r||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"))?s:s+"")in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}let g={left:0,right:0,bottom:0,zIndex:670};class p extends s.Component{constructor(...e){super(...e),h(this,"state",{isUploading:!1}),h(this,"handleResize",()=>{if(this._canvasContainer){let{width:e,height:r}=this._canvasContainer.getBoundingClientRect();this.pinCanvas&&this.pinCanvas.resize(e,r,800)}}),h(this,"handleOnLoaded",e=>{let{asset:r}=this.props;e&&"localImage"===r.type&&(this.pinCanvas=e,e.setImage(r.src).then(()=>{e.setAspectRatio({w:16,h:9}),this.forceUpdate(),this.handleResize()}))}),h(this,"handleSave",()=>{let{asset:e,onSave:r,onError:i}=this.props;if("localVideo"===e.type){let{fileSrc:i,height:s,width:t,src:o}=e;this.setState({isUploading:!0}),(0,n.Z)(i,"user-profile-cover-video").then(({uploadId:e})=>{let i={height:s,width:t,thumbnail:"",url:o};r({source:"video",video:{id:e,video_list:{V_HLSV4:i,V_720P:i}}})}).then(()=>this.setState({isUploading:!1})).catch(()=>this.setState({isUploading:!1}))}else if(this.pinCanvas){let{width:s,height:t,src:o}=this.pinCanvas.getCanvasOutput({width:e.width,height:e.height});(0,_.Ix)(o,this.props.i18n).then(({image_url:e})=>{let i={width:s,height:t,url:e};r({source:"image",images:{"474x":i,"750x":i,"1200x":i}})}).catch(e=>{i(e)})}}),h(this,"setCanvasContainerRef",e=>{this._canvasContainer=e,this.handleResize()})}componentDidMount(){window.addEventListener("resize",this.handleResize)}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}render(){let{asset:e,onHide:r}=this.props,{isUploading:i}=this.state;return(0,u.jsx)(t.mh,{children:(0,u.jsx)(l.Z,{children:(0,u.jsx)(d.Z,{position:"fixed",style:g,children:(0,u.jsxs)(t.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[(0,u.jsx)(t.xu,{ref:this.setCanvasContainerRef,alignItems:"center",color:"secondary",display:"flex",flex:"grow",height:"100%",justifyContent:"center",overflow:"hidden",position:"relative",children:"localImage"===e.type?(0,u.jsx)(c.Z,{borderRadius:0,onLoaded:this.handleOnLoaded}):(0,u.jsxs)(t.xu,{height:450,position:"relative",width:800,children:[i&&(0,u.jsx)(t.xu,{alignItems:"center",bottom:!0,color:"transparentDarkGray",display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,zIndex:new t.Ry(10),children:(0,u.jsx)(t.xH,{accessibilityLabel:this.props.i18n._('Uploading video', 'profileCover.videoUpload.loading', 'spinner label on profile video cover tab'),show:!0})}),(0,u.jsx)(o.Z,{autoplay:!0,height:e.height,loop:!0,src:e.src,width:e.width})]})}),(0,u.jsxs)(t.xu,{alignItems:"center",color:"default",display:"flex",justifyContent:"between",paddingX:7,paddingY:6,children:[(0,u.jsx)(t.xu,{paddingX:1,children:(0,u.jsx)(t.X6,{size:"400",children:this.props.i18n._('Update profile cover?', 'Text to confirm or cancel updating profile cover', 'Text to confirm or cancel updating profile cover')})}),(0,u.jsxs)(t.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,u.jsx)(t.xu,{paddingX:1,children:(0,u.jsx)(t.zx,{name:"cancel",onClick:r,text:this.props.i18n._('Cancel', 'Cancel profile cover upload', 'Cancel profile cover upload')})}),(0,u.jsx)(t.xu,{"data-test-id":"profile-cover-save-button",paddingX:1,children:(0,u.jsx)(t.zx,{color:"red",disabled:i,name:"save",onClick:this.handleSave,text:this.props.i18n._('Save', 'Save changes to profile cover image or video', 'Save changes to profile cover image or video')})})]})]})]})})})})}}function m(e){let r=(0,a.ZP)();return(0,u.jsx)(p,{...e,i18n:r})}},417670:(e,r,i)=>{i.d(r,{Z:()=>l});var s=i(883119),t=i(758339),o=i(144326),a=i(785893);function l({onDismiss:e,onDelete:r}){let i=(0,o.ZP)();return(0,a.jsx)(t.ZP,{accessibilityModalLabel:i._('Remove Profile Cover', 'removeCoverModal.accessibilityLabel', 'accessibility label for profile cover removal modal'),footer:(0,a.jsxs)(s.kC,{gap:{row:2,column:0},justifyContent:"center",children:[(0,a.jsx)(s.zx,{color:"gray",onClick:e,text:i._('Cancel', 'removeCoverModal.cancelText', 'text on button to cancel deletion of profile cover')}),(0,a.jsx)(s.zx,{color:"red",onClick:()=>r({source:"empty"}),text:i._('Delete', 'removeCoverModal.deleteText', 'text on button to confirm deletion of profile cover')})]}),heading:i._('Remove profile cover?', 'removeCoverModal.headingText', 'heading text for remove profile cover modal'),onDismiss:e,size:"sm",children:(0,a.jsx)(s.xu,{paddingX:4,children:(0,a.jsx)(s.xv,{align:"center",children:i._('Your current profile cover will be deleted forever, and you won\u2019t be able to get it back, but you can upload a new image at anytime', 'removeCoverModal.warningText', 'Text informing users what happens if they delete their profile cover')})})})}},902303:(e,r,i)=>{i.d(r,{Z:()=>f});var s=i(667294),t=i(883119),o=i(758339),a=i(144326),l=i(383399),n=i(573706),d=i(961754),_=i(785893);function c(e,r,i){var s;return(r="symbol"==typeof(s=function(e,r){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,r||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"))?s:s+"")in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}let u={__style:{paddingTop:64}};class h extends s.Component{constructor(...e){super(...e),c(this,"saveScrollContainer",e=>{this.scrollContainer=e}),c(this,"onRadioChange",e=>{let r,{onSelect:i,logContextEvent:s}=this.props;i(e);let{source:t}=e;switch(t){case"all_user_pins":r=7189;break;case"domain_pins":r=7190;break;default:r=7191}s({event_type:r,view_type:196})}),c(this,"renderBoard",e=>{let{id:r,image_cover_url:i,name:s}=e,{coverSource:o}=this.props,a="specific_board"===o.source&&o.source_id===r;return(0,_.jsxs)(t.xu,{column:12,direction:"row",display:"flex",margin:1,children:[(0,_.jsx)(t.xu,{paddingY:2,children:(0,_.jsx)(t.FX.RadioButton,{checked:a,id:`profileCoverSourceId_${r}`,name:"profileCoverSource",onChange:()=>this.onRadioChange({source:"specific_board",source_id:r}),value:`profileCoverSourceId_${r}`})}),(0,_.jsx)(t.xu,{flex:"grow",children:(0,_.jsx)(t.__,{htmlFor:`profileCoverSourceId_${r}`,children:(0,_.jsxs)(t.xu,{direction:"row",display:"flex",paddingX:4,children:[(0,_.jsx)(t.xu,{children:(0,_.jsx)(t.zd,{height:40,rounding:2,wash:!0,width:40,children:i&&(0,_.jsx)(t.Ee,{alt:s??"",color:"#F0F0F0",fit:"cover",naturalHeight:40,naturalWidth:40,src:i})})}),(0,_.jsx)(t.xu,{alignItems:"center",display:"flex",paddingX:2,children:(0,_.jsx)(t.xv,{weight:"bold",children:s})})]})})})]},r)})}componentDidMount(){this.props.logContextEvent({event_type:13,view_type:196})}render(){let{boards:e,coverSource:r,showActivity:i}=this.props,{data:o,fetchMore:a,isAtEnd:l,isFetching:n,isLoaded:d}=e,{scrollContainer:c}=this;return(0,_.jsx)(t.xu,{ref:this.saveScrollContainer,column:12,height:426,children:(0,_.jsx)(t.xu,{column:12,dangerouslySetInlineStyle:u,paddingX:12,children:(0,_.jsx)(t.FX,{id:"profile-source-picker-radio-group",legend:this.props.i18n._('Feature list options', 'ProfileSourcePicker.Feature.A11y.Legend', 'Label to options of each type of feature'),legendDisplay:"hidden",children:(0,_.jsxs)(t.xu,{column:12,display:"flex",paddingX:4,children:[(0,_.jsxs)(t.xu,{column:6,direction:"column",display:"flex",children:[(0,_.jsx)(t.xu,{marginBottom:4,children:(0,_.jsx)(t.X6,{size:"400",children:this.props.i18n._('Feature a board', 'Label to select a board for profile cover source', 'Label to select a board for profile cover source')})}),d?(0,_.jsx)(t.xu,{column:12,direction:"column",display:"flex",justifyContent:"center",children:o&&o.length>0&&c?(0,_.jsxs)(s.Fragment,{children:[(0,_.jsx)(t.gr,{container:c,fetchMore:a,isAtEnd:l,isFetching:n}),o.map(this.renderBoard)]}):(0,_.jsx)(t.xv,{children:this.props.i18n._('No boards', 'Label when the user has no boards to show', 'Label when the user has no boards to show')})}):(0,_.jsx)(t.xu,{column:12,display:"flex",justifyContent:"center",children:(0,_.jsx)(t.xH,{accessibilityLabel:this.props.i18n._('Loading boards', 'Label for the loading spinner in the profile cover source picker', 'Label for the loading spinner in the profile cover source picker'),show:!0})})]}),(0,_.jsxs)(t.xu,{column:6,direction:"column",display:"flex",children:[(0,_.jsx)(t.xu,{marginBottom:4,children:(0,_.jsx)(t.X6,{size:"400",children:this.props.i18n._('Feature Pins', 'Label to select Pins for profile cover source', 'Label to select Pins for profile cover source')})}),(0,_.jsxs)(t.xu,{display:"flex",paddingY:2,children:[(0,_.jsx)(t.FX.RadioButton,{checked:"all_user_pins"===r.source,id:"profileCoverSourceLatest",name:"profileCoverSource",onChange:()=>this.onRadioChange({source:"all_user_pins",source_id:null}),value:"profileCoverSourceLatest"}),(0,_.jsx)(t.xu,{flex:"grow",children:(0,_.jsx)(t.__,{htmlFor:"profileCoverSourceLatest",children:(0,_.jsxs)(t.xu,{direction:"column",display:"flex",paddingX:4,children:[(0,_.jsx)(t.xu,{alignItems:"center",display:"flex",marginBottom:1,minHeight:24,children:(0,_.jsx)(t.xv,{weight:"bold",children:this.props.i18n._('Latest Pins', 'label for latest pins profile cover source', 'label for latest pins profile cover source')})}),(0,_.jsx)(t.xv,{color:"subtle",size:"200",children:this.props.i18n._('The most recent Pins you saved', 'Label for latest pins profile cover source', 'Label for latest pins profile cover source')})]})})})]}),i&&(0,_.jsxs)(t.xu,{display:"flex",paddingY:2,children:[(0,_.jsx)(t.FX.RadioButton,{checked:"domain_pins"===r.source,id:"profileCoverSourceDomainPins",name:"profileCoverSource",onChange:()=>this.onRadioChange({source:"domain_pins",source_id:null}),value:"profileCoverSourceDomainPins"}),(0,_.jsx)(t.xu,{flex:"grow",children:(0,_.jsx)(t.__,{htmlFor:"profileCoverSourceDomainPins",children:(0,_.jsxs)(t.xu,{direction:"column",display:"flex",paddingX:4,children:[(0,_.jsx)(t.xu,{alignItems:"center",display:"flex",marginBottom:1,minHeight:24,children:(0,_.jsx)(t.xv,{weight:"bold",children:this.props.i18n._('Recent activity', 'label for domain pins profile cover source', 'label for domain pins profile cover source')})}),(0,_.jsx)(t.xv,{color:"subtle",size:"200",children:this.props.i18n._('Pins saved from your claimed accounts', 'Label for domain pins profile cover source', 'Label for domain pins profile cover source')})]})})})]})]})]})})})})}}function g(e){let{logContextEvent:r}=(0,n.v)(),i=(0,a.ZP)(),s=(0,d.Z)({name:"BoardsFeedResource",options:{field_set_key:"profile_grid_item",privacy_filter:"public",sort:e.sort||"custom",username:e.username,include_empty:!1},noCache:!0});return(0,_.jsx)(h,{...e,boards:s,i18n:i,logContextEvent:r})}function p(e,r,i){var s;return(r="symbol"==typeof(s=function(e,r){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,r||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"))?s:s+"")in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}class m extends s.Component{constructor(...e){super(...e),p(this,"state",{coverSource:this.props.coverSource}),p(this,"handleSave",()=>{let{onSave:e}=this.props,{coverSource:r}=this.state;e(r)}),p(this,"handleSelect",e=>{this.setState({coverSource:e})})}render(){let{onHide:e,showActivity:r,sort:i,viewer:s}=this.props,{coverSource:a}=this.state;return(0,_.jsx)(o.ZP,{accessibilityModalLabel:this.props.i18n._('Select profile cover source', 'Accessibility label for modal to select profile cover source', 'Accessibility label for modal to select profile cover source'),footer:(0,_.jsxs)(t.xu,{alignItems:"center",column:12,display:"flex",justifyContent:"end",children:[(0,_.jsx)(t.xu,{flex:"shrink",paddingX:2,children:(0,_.jsx)(t.zx,{color:"gray",onClick:e,text:this.props.i18n._('Cancel', 'Button label for cancelling the action to set profile cover pins', 'Button label for cancelling the action to set profile cover pins')})}),(0,_.jsx)(t.xu,{flex:"shrink",paddingX:2,children:(0,_.jsx)(t.zx,{color:"red",onClick:this.handleSave,text:this.props.i18n._('Done', 'Button label for confirming the action of setting profile cover pins', 'Button label for confirming the action of setting profile cover pins')})})]}),heading:this.props.i18n._('Select a board to feature', 'Heading for modal to select profile cover source', 'Heading for modal to select profile cover source'),onDismiss:e,size:"lg",children:(0,_.jsx)(g,{coverSource:a,onSelect:this.handleSelect,showActivity:r,sort:i,username:s.isAuth?s.username:""})})}}function f(e){let r=(0,a.ZP)(),i=(0,l.Z)();return(0,_.jsx)(m,{...e,i18n:r,viewer:i})}},652490:(e,r,i)=>{i.d(r,{Z:()=>p});var s=i(667294),t=i(883119),o=i(453424),a=i(758339),l=i(144326),n=i(730212),d=i(816222),_=i(718973),c=i(785893);function u(e,r,i){var s;return(r="symbol"==typeof(s=function(e,r){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,r||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"))?s:s+"")in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}let h=16/9;class g extends s.Component{constructor(...e){super(...e),u(this,"state",{errorMessage:void 0,loading:!1}),u(this,"mounted",!1),u(this,"handleAddAssets",e=>{let{i18n:r,ideaPinRenamingEnabled:i,onUpload:s}=this.props,t=e[0];return t?(this.setState({errorMessage:void 0,loading:!0}),(0,d.Z)({i18n:r,ideaPinRenamingEnabled:i,file:t,options:{allowVideo:!1}}).then(e=>{this.mounted&&("error"===e.type?this.setState({errorMessage:e.message,loading:!1}):"localImage"===e.type?(this.setState({loading:!1}),s(e)):Math.abs(e.width/e.height-h)>.1?this.setState({errorMessage:this.props.i18n._('Please upload a video that is 16:9 for your profile cover', 'Error message for uploading a video that is not correct aspect ratio', 'Error message for uploading a video that is not correct aspect ratio'),loading:!1}):(this.setState({loading:!1}),s(e)))})):Promise.resolve()})}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){let{i18n:e,isRTL:r,onHide:i}=this.props,{errorMessage:s,loading:o}=this.state,l=e._('Add a profile cover image', 'uploadCoverSourceModal.headingText2', 'Heading for modal to upload profile cover image'),n=(0,c.jsxs)(t.xu,{paddingY:8,children:[(0,c.jsx)(t.kC,{justifyContent:"center",children:(0,c.jsx)(t.xu,{maxWidth:700,children:(0,c.jsx)(t.X6,{align:"center",size:"600",children:l})})}),(0,c.jsx)(t.xu,{left:r,padding:8,position:"absolute",right:!r,top:!0,children:(0,c.jsx)(t.hU,{accessibilityLabel:e._('Close', 'uploadCoverSourceModal.closeModalButton', 'Accessibility label for close modal button'),icon:"cancel",iconColor:"darkGray",onClick:i,size:"sm"})})]});return(0,c.jsx)(a.ZP,{accessibilityModalLabel:e._('Upload profile cover source', 'Accessibility label for modal to upload profile cover source', 'Accessibility label for modal to upload profile cover source'),heading:n,onDismiss:i,size:"lg",children:(0,c.jsx)(t.xu,{height:475,margin:4,children:o?(0,c.jsxs)(t.xu,{alignContent:"center",dangerouslySetInlineStyle:{__style:{border:"dashed 2px #dadada",borderRadius:6}},direction:"column",display:"flex",height:"100%",justifyContent:"center",children:[(0,c.jsx)(t.xH,{accessibilityLabel:e._('Loading...', 'Loading spinner for uploaded image or video', 'Loading spinner for uploaded image or video'),show:!0}),(0,c.jsx)(t.xu,{marginTop:4,children:(0,c.jsx)(t.xv,{align:"center",color:"subtle",weight:"bold",children:e._('Loading...', 'Loading spinner for uploaded image or video', 'Loading spinner for uploaded image or video')})})]}):(0,c.jsx)(_.Z,{addAssets:this.handleAddAssets,errorMessage:s})})})}}function p(e){let r=(0,l.ZP)(),i=(0,o.Z)(),{isRTL:s}=(0,n.B)();return(0,c.jsx)(g,{...e,i18n:r,ideaPinRenamingEnabled:i,isRTL:!!s})}},718973:(e,r,i)=>{i.d(r,{Z:()=>u});var s=i(667294),t=i(883119),o=i(573706),a=i(144326),l=i(522574),n=i(730212),d=i(547482),_=i(92979),c=i(785893);function u({addAssets:e,errorMessage:r}){let{logContextEvent:i}=(0,o.v)(),u=(0,n.B)(),h=(0,a.ZP)(),[g,p]=(0,s.useState)(!1),m=(0,s.useRef)(!1);(0,s.useEffect)(()=>(m.current=!0,()=>{m.current=!1}));let f=(0,c.jsx)(t.xu,{padding:5,children:(0,c.jsx)(t.xv,{color:"subtle",size:"100",children:h._('Supports PNG, JPG, GIF up to 10MB', 'emptyPane.fileTypeText', 'Text description of what image type and limits that can be uploaded')})});return(0,c.jsx)(d.Z,{accept:(0,_.Z)(u.userAgent.browserName).join(","),allowMultipleFiles:!0,color:"white",hasError:!!r,id:"asset-picker-upload",onChange:r=>{p(!0);let s=Array.from(r.target.files);p(!0),i({event_type:101,component:13392,element:11265}),e(s).then(()=>{m.current&&p(!1)})},onDrop:r=>{p(!0);let s=(0,l.Z)(r.dataTransfer);p(!0),i({event_type:3502,component:13392,element:11265}),e(s).then(()=>{m.current&&p(!1)})},children:()=>(0,c.jsxs)(t.xu,{alignContent:"center",dangerouslySetInlineStyle:{__style:{border:"dashed 2px #dadada",borderRadius:6}},"data-test-id":"asset-picker-empty-pane",direction:"column",display:"flex",height:"100%",justifyContent:"center",position:"relative",children:[g?(0,c.jsx)(t.xH,{accessibilityLabel:h._('Loading...', 'Loading assets', 'Loading assets'),show:!0}):(0,c.jsx)(t.xu,{padding:2,children:(0,c.jsxs)(t.kC,{alignItems:"center",direction:"column",gap:{row:0,column:4},justifyContent:"center",children:[(0,c.jsx)(t.JO,{accessibilityLabel:h._('Add an image', 'uploadCoverSourceModal.emptyPane.addIconAccessibilityLabel', 'Add an image as part of the pin'),color:"default",icon:"camera-roll",size:22}),(0,c.jsx)(t.xv,{children:h._('Drag and drop an image, or browse from your computer', 'emptyPane.dragAndDropText', 'A drag and drop prompt for adding assets')}),(0,c.jsx)(t.zx,{color:"gray",text:h._('Browse', 'emptyPane.button', 'Button text on asset picker to upload image from a computer')})]})}),(0,c.jsx)(t.xu,{alignItems:"center",bottom:!0,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,children:r?(0,c.jsx)(t.xu,{maxWidth:468,padding:5,children:(0,c.jsx)(t.xv,{align:"center",color:"error",size:"200",children:r})}):f})]})})}},741326:(e,r,i)=>{i.d(r,{GB:()=>g,ZP:()=>h,q0:()=>u});var s=i(883119),t=i(240760),o=i(707874),a=i(207630),l=i(635258),n=i(625940),d=i(557268),_=i(897628),c=i(785893);let u=e=>e._('Not a valid URL.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating an invalid URL was entered to create a Pin');function h({dispatchId:e,errorId:r,i18n:i,ideaPinRenamingEnabled:n,options:h}){let g=(0,d.Z)(r,i,e,h);if("GENERAL_ERROR"!==g.id)return g;switch(r){case"DESCRIPTION_OVER_MAX_CHARACTER_LIMIT":return{dispatchId:e,id:"DESCRIPTION_OVER_MAX_CHARACTER_LIMIT",type:"error",message:i._('Ooops! This description is getting long. Try trimming it down.', 'storyPinBuilder.errorMessaging.message', 'Error message when description is greater than maximum character count.')};case"DESCRIPTION_OVER_MAX_USER_MENTION_LIMIT":return{dispatchId:e,id:"DESCRIPTION_OVER_MAX_USER_MENTION_LIMIT",type:"error",message:i._('Ooops! Too many user mentions. Try keeping it to 5 max.', 'pinBuilder.errorMessaging.descriptionMentionLimit', 'Error message when description contains more user mentions than maximum allowed count.')};case"TITLE_OVER_MAX_CHARACTER_LIMIT":return{dispatchId:e,id:"TITLE_OVER_MAX_CHARACTER_LIMIT",type:"error",message:i._('Ooops! This title is getting long. Try trimming it down.', 'storyPinBuilder.errorMessaging.message', 'Error message when title is greater than maximum character count.')};case"IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO":return{dispatchId:e,id:"IMAGE_DOES_NOT_HAVE_RECOMMENDED_RATIO",type:"error",message:i._('This image does not have the recommended aspect ratio.', 'storyPinBuilder.errorMessaging.message', 'Signal message when uploading an image that does not have the recommended aspect ratio.')};case"TAG_SAME_PRODUCT_LINK":return{dispatchId:e,id:"TAG_SAME_PRODUCT_LINK",type:"error",message:i._('You can\'t tag from the same page twice.', 'storyPinBuilder.errorMessaging.message', 'Error message for using the same product link twice on a Pin tag'),blocking:!0};case"TAG_OVER_MAX_PRODUCTS_LIMIT":return{dispatchId:e,id:"TAG_OVER_MAX_PRODUCTS_LIMIT",type:"error",message:i._('You\'ve reached the maximum number of products for a tag.', 'storyPinBuilder.errorMessaging.message', 'Error message when user attempts to add more than 8 products to a tag'),blocking:!0};case"BOARD_MISSING":return{dispatchId:e,id:"BOARD_MISSING",type:"error",message:i._('A board is required to create a Pin.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating a board is required to create a Pin'),blocking:!0};case"DATE_IN_PAST":return{dispatchId:e,id:"DATE_IN_PAST",type:"error",message:i._('A future date is required to schedule a Pin.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the date is in the past for a scheduled Pin.'),blocking:!0};case"DATE_TOO_FAR_IN_FUTURE":return{dispatchId:e,id:"DATE_TOO_FAR_IN_FUTURE",type:"error",message:i._('Make sure you schedule a Pin less than 30 days in the future.', 'storyPinBuilder.errorMessaging.30DayMessage', 'Error message indicating the date is too far in the future for a scheduled Pin.'),blocking:!0};case"DATE_MISSING":return{dispatchId:e,id:"DATE_MISSING",type:"error",message:i._('A date is required to schedule a Pin.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating a date is required to schedule a Pin.'),blocking:!0};case"DESCRIPTION_INVALID":return{dispatchId:e,id:"DESCRIPTION_INVALID",type:"error",message:i._('The description is invalid.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating an invalid description was entered to create a Pin'),blocking:!0};case"MEDIA_MISSING":return{dispatchId:e,id:"MEDIA_MISSING",type:"error",message:i._('An image is required to create a Pin.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating an image, video, or website is required to create a Pin.'),blocking:!0};case"SHOWCASE_UNSUPPORTED_FORMAT":return{dispatchId:e,id:"SHOWCASE_UNSUPPORTED_FORMAT",type:"error",message:i._('Showcase ads don\u2019t currently support video. To continue, please upload an image.', 'showcasePinBuilder.errorMessaging.message', 'Error message for uploading the wrong format for showcase ads.'),blocking:!0};case"TAG_INVALID":return{dispatchId:e,id:"TAG_INVALID",type:"error",message:i._('You can only tag images linking to your claimed website.', 'storyPinBuilder.errorMessaging.message', 'Error message for entering a link you have not claimed.'),blocking:!0};case"TAG_EMPTY":return{dispatchId:e,id:"TAG_EMPTY",type:"error",message:i._('You must tag at least one feature Pin to continue.', 'storyPinBuilder.errorMessaging.message', 'Error message for not tagging at least one product on a showcase ad.'),blocking:!0};case"TIME_MISSING":return{dispatchId:e,id:"TIME_MISSING",type:"error",message:i._('A time is required to schedule a Pin.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating a time is required to schedule a Pin.'),blocking:!0};case"TITLE_INVALID":return{dispatchId:e,id:"TITLE_INVALID",type:"error",message:i._('The title is invalid.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating an invalid title was entered to create a Pin'),blocking:!0};case"URL_INVALID":return{dispatchId:e,id:"URL_INVALID",type:"error",message:u(i),blocking:!0};case"URL_MISSING":return{dispatchId:e,id:"URL_MISSING",type:"error",message:i._('URL is required.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating a URL is required to create a Pin'),blocking:!0};case"URL_CONTAINS_PORN_DOMAIN":return{dispatchId:e,id:"URL_CONTAINS_PORN_DOMAIN",type:"error",message:(0,t.nk)(i._('Some nudity is okay for Pinterest, some isn\'t. Make sure you understand {{ policy_link }}', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the URL entered is a porn domain.'),{policy_link:(0,c.jsx)(s.rU,{display:"inlineBlock",href:l.MsG,target:"blank",underline:"hover",children:(0,c.jsx)(s.xv,{color:"error",inline:!0,size:"100",weight:"bold",children:i._('our policies', 'Link to policy page', 'Link to policy page')})},0)}),blocking:!0};case"URL_IS_TOO_LONG":return{dispatchId:e,id:"URL_IS_TOO_LONG",type:"error",message:(0,a.Z)(i._('Please shorten the link to {{ maxLength }} characters or fewer.', 'pinbuilder.urlIsTooLong.errorMessage', 'Error message indicating a URL is too long to create a Pin. maxLength: max number of chars in the link'),{maxLength:o.cH}),blocking:!0};case"URL_IS_BLOCKED":return{dispatchId:e,id:"URL_IS_BLOCKED",type:"error",message:i._('This link is blocked because it may not meet our content policies.', 'pinbuilder.blockedUrl.errorMessage', 'Error message indicating a URL is blocked because it may not meet our content policies'),blocking:!0};case"CAROUSEL_DIFFERENT_RATIOS":return{dispatchId:e,id:"CAROUSEL_DIFFERENT_RATIOS",type:"error",message:i._('Carousel images must have the same height and width', 'storyPinBuilder.errorMessaging.message', 'Error message indicating a carousel with different sizes'),blocking:!0};case"CAROUSEL_INVALID_FORMAT":return{dispatchId:e,id:"CAROUSEL_INVALID_FORMAT",type:"error",message:i._('Carousels can only contain images', 'storyPinBuilder.errorMessaging.message', 'Error message when attempting to add a non-image file type to a carousel'),blocking:!0};case"URL_IS_REDIRECT":return{dispatchId:e,id:"URL_IS_REDIRECT",type:"error",message:i._('URL is a redirect.  Please enter a URL without a redirect.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating a URL with a redirect was entered'),blocking:!0};case"URL_UNREACHABLE":return{dispatchId:e,id:"URL_UNREACHABLE",type:"error",message:i._('URL is unreachable.  Please check that it is correct.', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the URL specified is unreachable.'),blocking:!0};case"STORY_PIN_COVER_PAGE_INVALID_ASPECT_RATIO":return{dispatchId:e,id:"STORY_PIN_COVER_PAGE_INVALID_ASPECT_RATIO",type:"error",message:i._('Edit the image on the cover page to have a 9:16 ratio', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the image on the cover page of a Story Pin does not have the correct aspect ratio.'),blocking:!0};case"STORY_PIN_COVER_PAGE_IMAGE_MISSING":return{dispatchId:e,id:"STORY_PIN_COVER_PAGE_IMAGE_MISSING",type:"error",message:n?i._('Please provide an image for the cover page of your Pin', 'storyPinBuilder.errorMessaging.storypinCoverPageImageMissing', 'Error message indicating that the cover page of a Pin is missing an image'):i._('Please provide an image for the cover page of your Idea Pin', 'storyPinBuilder.errorMessaging.message', 'Error message indicating that the cover page of a Idea Pin is missing an image')};case"STORY_PIN_COVER_PAGE_SIGNATURE_MISSING":return{dispatchId:e,blocking:!0,id:"STORY_PIN_COVER_PAGE_SIGNATURE_MISSING",type:"error",message:n?i._('Cannot save Pin without signature set on cover', 'storyPinBuilder.errorMessaging.storyPinCoverPageSignatureMissing', 'Error message indicating that the cover page is missing the signature'):i._('Cannot save Idea Pin without signature set on cover', 'storyPinBuilder.errorMessaging.message', 'Error message indicating that the cover page is missing the signature')};case"STORY_PIN_COVER_PAGE_TITLE_MISSING":return{dispatchId:e,id:"STORY_PIN_COVER_PAGE_TITLE_MISSING",type:"error",message:n?i._('Give your Pin a title before you publish', 'storyPinBuilder.errorMessaging.storyPinCoverPageTittleMissing', 'Error message indicating the cover page of a Pin is missing a title.'):i._('Give your Idea Pin a title before you publish', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the cover page of a Idea Pin is missing a title.'),blocking:!0};case"STORY_PIN_MEDIA_SIGNATURES_MISSING":return{dispatchId:e,blocking:!0,id:"STORY_PIN_MEDIA_SIGNATURES_MISSING",type:"error",message:n?i._('Cannot save Pin without signatures set on all media blocks/items', 'storyPinBuilder.errorMessaging.storyPinMediaSignatureMissing', 'Error message indicating that signatures are missing on media blocks/items'):i._('Cannot save Idea Pin without signatures set on all media blocks/items', 'storyPinBuilder.errorMessaging.message', 'Error message indicating that signatures are missing on media blocks/items')};case"STORY_PIN_NOT_ENOUGH_PAGES":return{dispatchId:e,id:"STORY_PIN_NOT_ENOUGH_PAGES",type:"error",message:n?i._('Create at least 2 pages to publish a Pin', 'storyPinBuilder.errorMessaging.storyPinNotEnoughPages', 'Error message indicating the Pin is too short.'):i._('Create at least 2 pages to publish an Idea Pin', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the Idea Pin is too short.'),blocking:!0};case"STORY_PIN_TOO_MANY_DRAFTS":return{dispatchId:e,id:"STORY_PIN_TOO_MANY_DRAFTS",type:"error",message:(0,t.nk)(i._('You have reached the limit of {{draftMaxCount}} drafts.', 'storyboard.errorMessaging.message.draftLimitError', 'Upload attempt error message when users reached max number of drafts allowed. draftMaxCount: max number of drafts'),{draftMaxCount:_.in}).join(""),blocking:!0};case"STORY_PIN_TOO_MANY_MULTI_UPLOADS_AT_ONCE":return{dispatchId:e,id:"STORY_PIN_TOO_MANY_MULTI_UPLOADS_AT_ONCE",type:"error",message:(0,t.nk)(i._('You can only upload {{multiUploadMaxCount}} drafts at once.', 'storyboard.errorMessaging.message.multiUploadMaxError', 'Error message when users multi upload more than the max allowed. multiUploadMaxCount: max number of multi uploaded'),{multiUploadMaxCount:_.Af}).join(""),blocking:!0};case"STORY_PIN_TITLE_MISSING":return{dispatchId:e,id:"STORY_PIN_TITLE_MISSING",type:"error",message:n?i._('Give your Pin a title before you publish', 'storyPinBuilder.errorMessaging.storyPinTitleMissing', 'Error message indicating the Pin is missing a title.'):i._('Give your Idea Pin a title before you publish', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the Idea Pin is missing a title.'),blocking:!0};case"STORY_PIN_VIDEO_BELOW_MIN_DURATION":{let r=Math.floor(o.W_);return{dispatchId:e,id:"STORY_PIN_VIDEO_BELOW_MIN_DURATION",type:"error",message:(0,t.nk)(i.ngettext('This video is too short and can\'t be uploaded. Video can\'t be shorter than {{minVideoLengthSeconds}} second.', 'This video is too short and can\'t be uploaded. Video can\'t be shorter than {{minVideoLengthSeconds}} seconds.', r, 'storyPinBuilder.errorMessaging.message', 'Error message uploading a video file that is longer than the allowed duration'),{minVideoLengthSeconds:r}).join(""),blocking:!0}}case"STORY_PIN_VIDEO_ON_COVER":return{dispatchId:e,id:"STORY_PIN_VIDEO_ON_COVER",type:"error",message:i._('The cover page cannot contain a video', 'storyPinBuilder.errorMessaging.message', 'Error message indicating the cover page of a Story Pin contains a video.'),blocking:!0};case"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE":{let r=o.Lr/1024/1024;return{dispatchId:e,id:"STORY_PIN_VIDEO_OVER_MAX_FILE_SIZE",type:"error",message:(0,t.nk)(i.ngettext('This video is too large and can\'t be uploaded. Videos can\'t be larger than {{maxVideoFileSize}}MB.', 'This video is too large and can\'t be uploaded. Videos can\'t be larger than {{maxVideoFileSize}}MB.', r, 'storyPinBuilder.errorMessaging.message', 'Error message uploading a video file larger than required megabytes.'),{maxVideoFileSize:r}).join(""),blocking:!0}}case"ALT_TEXT_OVER_MAX_CHARACTER_LIMIT":return{dispatchId:e,id:"ALT_TEXT_OVER_MAX_CHARACTER_LIMIT",type:"error",message:i._('Ooops! This alt text is getting long. Try trimming it down.', 'pinBuilder.errorMessaging.message', 'Error message when alt text is greater than maximum character count.')};default:return{dispatchId:e,id:"GENERAL_ERROR",type:"error",message:i._('Hmm, something went wrong. Please try again.', 'storyPinBuilder.errorMessaging.message', 'Error message for generic error during Pin creation'),blocking:!0}}}function g(e,r,i){i({event_type:7564,view_type:212,component:(0,n.Z)().includes("create")?13762:13308,aux_data:{error_message:r,error_id:e}})}},322175:(e,r,i)=>{i.d(r,{Ch:()=>E,Fv:()=>g,GV:()=>v,Ix:()=>f,Mi:()=>c,Yv:()=>P,iX:()=>p,wL:()=>y,xc:()=>b,zp:()=>h});var s=i(252071),t=i(418256),o=i(400416),a=i(463420),l=i(207630),n=i(54473),d=i(428126),_=i(649745);function c(e,r=512){let i=e.split(";"),s=i[0].split(":")[1],t=atob(i[1].split(",")[1]),o=[];for(let e=0;e<t.length;e+=r){let i=t.slice(e,e+r),s=Array(i.length);for(let e=0;e<i.length;e+=1)s[e]=i.charCodeAt(e);let a=new Uint8Array(s);o.push(a)}return new Blob(o,{type:s})}let u=e=>{let[r,i,s]=[e.substring(0,2),e.substring(2,4),e.substring(4,6)];return e?`https://i.pinimg.com/736x/${r}/${i}/${s}/${e}.jpg`:""};function h(e){return new Promise(r=>{let i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=()=>{if(200===i.status){let e=i.response,s=new FileReader;s.onloadend=()=>{r("string"==typeof s.result?s.result:"")},s.readAsDataURL(e)}},i.send()})}function g(e,r){return(0,o.Z)({url:"/v3/visual_links/boards/tagged/",data:{fields:["board.access","board.allow_homefeed_recommendations","board.category","board.collaborated_by_me","board.collaborating_users()","board.collaborator_count","board.collaborator_invites_enabled","board.created_at","board.description","board.followed_by_me","board.follower_count","board.id","board.image_cover_url","board.image_thumbnail_url","board.images[170x]","board.is_collaborative","board.layout","board.name","board.owner()","board.pin_count","board.pin_thumbnail_urls","board.privacy","board.type","board.url"],return_existing:!0,...e?{orbac_subject_id:e}:Object.freeze({})},method:"PUT"}).then(e=>(e.resource_response.error||r({event_type:20,object_id_str:e.resource_response.data?.id}),e.resource_response.data))}async function p(e){try{let{data:r}=(await s.Z.create("PinResource",e).callCreate()).resource_response;return r&&{id:r.id}}catch(e){throw Error("Failed to create pin")}}function m(e,r){return new Promise((i,s)=>{let o=new FormData;o.append("img",e);let a=new XMLHttpRequest;a.open("POST",(0,n.Z)("/upload-image/"),!0),a.setRequestHeader("x-CSRFToken",(0,t._V)()),a.onload=()=>{if(200===a.status){let e=JSON.parse(a.responseText);e.success?i(e):s(Error(e.error))}else 413===a.status?s(Error(r._('Oops! Something went wrong while uploading your image. Try uploading a smaller image.', 'pinBuilderResource.uploadImage.error.smallerImage', 'Error message displayed to prompt user to upload a smaller image'))):s(Error((0,l.Z)(r._('Oops! Something went wrong while uploading your image (Status code {{statusCode}})', 'pinBuilderResource.uploadImage.genericError', 'Error message displayed to user when an error has occurred with image upload'),{statusCode:a.status})))},a.send(o)})}function f(e,r){return"string"!=typeof e?m(e,r):e.startsWith("data")?m(c(e),r):h(e).then(e=>m(c(e),r))}function P(e,r,i,t){return new Promise((o,a)=>{s.Z.create("VIPEditResource",{type:r,video_signature:e,...i}).callCreate().then(e=>{let{onStartEdits:r,onFinishEdits:i}=t||{},{tracking_id:s}=e.resource_response.data,l=new Date;r&&r(s),(0,d.Z)(s,{delay:8e3,onError:e=>a(e),onProcessingStarted:e=>o({signature:e,uploadId:s}),onSuccess:e=>{let r=(Date.now()-l.getTime())/1e3;i&&i(s,r,e),o({signature:e,uploadId:s})},resolvedAfterProcessingStarted:!0})}).catch(()=>{a()})})}function v(e,r,i,s){return"string"!=typeof e?(0,_.Z)(e,r,!1,i,{},s):e.startsWith("data")?(0,_.Z)(c(e),r,!1,i,{},s):h(e).then(e=>(0,_.Z)(c(e),r,!1,i,{},s))}function b(e,r,i,s,t){return v(e,3===s?"ads-builder-pinimage":"pinimage",{onFailureUpload:({fileSizeBytes:e,uploadId:s})=>(function({fileSizeBytes:e,pinDraftId:r,uploadId:i},s){(0,a.Z)(s,{event_type:8785,aux_data:{file_size_mb:e/1048576,media_upload_id:i,pin_draft_id:r}})})({pinDraftId:r,uploadId:s,fileSizeBytes:e},i),onFinishProcessing:({fileSizeBytes:e,processingTime:s,signature:t,uploadId:o,uploadTime:l})=>(function({fileSizeBytes:e,imageSignature:r,pinDraftId:i,uploadId:s,uploadTimeSec:t},o){(0,a.Z)(o,{event_type:8781,aux_data:{file_size_mb:e/1048576,image_signature:r,media_upload_id:s,pin_draft_id:i,upload_time:t}})})({fileSizeBytes:e,imageSignature:t,pinDraftId:r,uploadId:o,uploadTimeSec:s+l},i),onStartUpload:({fileSizeBytes:e,uploadId:s})=>(function({fileSizeBytes:e,pinDraftId:r,uploadId:i},s){(0,a.Z)(s,{event_type:8780,aux_data:{file_size_mb:e/1048576,media_upload_id:i,pin_draft_id:r}})})({pinDraftId:r,uploadId:s,fileSizeBytes:e},i)},t)}function y(e,r,i,t,o){return b(e,r,i,o).then(({signature:e})=>{if(!e)throw Error();return{image_url:u(e),success:!0}}).then(e=>new Promise((r,i)=>{let o=e.image_url;s.Z.create("ScheduledPinResource",{image_url:o,method:"upload",...t?{orbac_subject_id:t}:{}}).callCreate().then(e=>{let{data:{image_signature:i}}=e.resource_response;r(i)}).catch(()=>{i(Error("Cannot schedule the Pin."))})})).catch(e=>{throw e})}function E(e,r,i,s,t=b){let o=e.filter(e=>!!e.media);return Promise.all(o.map(e=>t(e.media?.src??"",r,i,s).then(({signature:e,uploadId:r})=>{if(!e)throw Error();return{signature:e,uploadId:r}}))).then(e=>{let r=o.findIndex((r,i)=>!!e[i].signature),{description:i}=o.find(e=>!!e.description)??{},{link:s}=o.find(e=>!!e.link)??{},{title:t}=o.find(e=>!!e.title)??{};return{metadata:{description:i??"",title:t??"",link:s??"",image_signature:e[r].signature??""},slots:o.map((r,i)=>{let{description:s,title:t,link:o}=r,{signature:a,uploadId:l}=e[i];return{title:t,description:s,link:o,image_signature:a,tracking_id:l}})}}).catch(e=>{throw e})}},930597:(e,r,i)=>{i.d(r,{Z:()=>u});var s=i(667294),t=i(883119),o=i(602185),a=i(144326),l=i(750077),n=i(785893);function d(e,r,i){var s;return(r="symbol"==typeof(s=function(e,r){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,r||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"))?s:s+"")in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}let _=(0,s.lazy)(()=>Promise.all([i.e(32777),i.e(17621),i.e(5738),i.e(44198)]).then(i.bind(i,959603)));class c extends s.Component{constructor(...e){super(...e),d(this,"loaded",!1),d(this,"setRef",e=>{let{onLoaded:r}=this.props;!this.loaded&&r&&r(e),this.loaded=!0})}render(){let{borderRadius:e,height:r,width:i}=this.props;return(0,n.jsx)(o.Z,{name:"SafeSuspense_PinCanvasLoader_PinCanvas",children:(0,n.jsx)(l.Z,{fallback:(0,n.jsx)(t.kC,{alignItems:"center",justifyContent:"center",children:(0,n.jsx)(t.xH,{accessibilityLabel:this.props.i18n._('Loading image editor', 'accessibility label for loading spinner', 'accessibility label for loading spinner'),show:!0})}),children:(0,n.jsx)(_,{ref:this.setRef,borderRadius:e,height:r,width:i})})})}}function u(e){let r=(0,a.ZP)();return(0,n.jsx)(c,{...e,i18n:r})}},417986:(e,r,i)=>{i.d(r,{Z:()=>o});var s=i(400416);function t(e,r){return{type:"PROFILE_COVER_SOURCE",payload:{id:e,coverSource:r}}}function o(e,r,i,o){return a=>{"image"===r.source?(0,s.Z)({url:"/v3/users/me/profile/cover/image/upload/",method:"PUT",data:{image_url:r.images?.["1200x"]?.url,...o?{orbac_subject_id:o}:Object.freeze({})}}).then(()=>{a(t(e,r)),i&&i()}):"video"===r.source?(0,s.Z)({url:"/v3/users/me/profile/cover/",method:"PUT",data:{source_type:"video",video_upload_id:r.video?.id}}).then(()=>a(t(e,r))):(0,s.Z)({url:"/v3/users/me/profile/cover/",method:"PUT",data:{source_type:r.source,source_id:r.source_id??null,...o?{orbac_subject_id:o}:Object.freeze({})}}).then(()=>a(t(e,r)))}}},513461:(e,r,i)=>{i.d(r,{Z:()=>l});var s=i(883119),t=i(758339),o=i(144326),a=i(785893);function l({error:e,onHide:r}){let i=(0,o.ZP)(),l=i._('Oops!', ' - ', ' -- ');return(0,a.jsx)(t.ZP,{accessibilityModalLabel:l,footer:(0,a.jsx)(s.kC,{alignItems:"stretch",justifyContent:"center",children:(0,a.jsx)(s.zx,{color:"red",onClick:r,size:"lg",text:i._('Okay', ' - ', ' -- ')})}),heading:l,onDismiss:r,role:"alertdialog",size:"sm",children:(0,a.jsx)(s.xu,{paddingX:8,children:(0,a.jsx)(s.xv,{align:"center",children:e.message})})})}},897628:(e,r,i)=>{i.d(r,{Af:()=>_,Ei:()=>n,II:()=>v,Lh:()=>p,U:()=>h,Zy:()=>l,dD:()=>o,er:()=>g,hb:()=>f,in:()=>d,j7:()=>m,kX:()=>c,mx:()=>P,n5:()=>a,q8:()=>u,xH:()=>t});var s=i(66810);let t=1048576,o=3,a=20,l=3,n=10,d=50,_=10,c=1200,u=375,h=375/s.ap,g=4096,p="#FFFFFF",m={blockStyle:{x_coord:4.27,y_coord:46.82,width:91.46,height:26.35,corner_radius:0},style:{font_id:6,hex_color:"#FFFFFF",font_size:36,alignment:1},text:"",type:"story_pin_paragraph_block"},f=420,P=325,v=768}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/40979-0d35e8155f11e23d.mjs.map