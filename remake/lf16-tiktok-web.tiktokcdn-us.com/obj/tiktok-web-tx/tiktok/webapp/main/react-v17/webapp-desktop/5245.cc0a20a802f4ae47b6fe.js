"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5245],{17984:(e,t,o)=>{o.d(t,{$:()=>m,L:()=>_});var a=o(46682),r=o(40099),s=o(49057),i=o(87654),n=o(19442),l=o(43271),d=o(60484),c=o(71281),u=o(93341),p=o(88920),h=o(47172),g=o(82715);const m=()=>{var e;const{abTestVersion:t}=(0,d.L$)((0,s.W)((()=>["abTestVersion"]),[])),o="v2"===(null!==(e=(0,c.qt)(t,"search_transfer_guesssearch"))&&void 0!==e?e:"v1"),l=(0,u.Ul)(),{count:h}=(0,p.gQ)(),[{historyList:g},{getTransferList:m}]=(0,a.S)(i._,{selector:e=>({historyList:e.historyList}),dependencies:[]}),_=(0,n.JD)((e=>e.showingBrowserMode));return(0,r.useCallback)((()=>{var e,t;o&&!_&&m({req_source:"web_blank_page",from_group_id:null!==(e=null==l?void 0:l.id)&&void 0!==e?e:"",history_list_v2:(t=g,encodeURIComponent(encodeURIComponent(JSON.stringify(t)))),count:h})}),[m,g,l,o,_,h])},_=()=>{const e=(0,h.useLocation)(),{pathname:t,search:o}=e,s=(0,h.useHistory)(),i=Boolean((0,h.matchPath)(t,{path:g.OZ.searchHome})),{resetSearchResult:n}=(0,a.w)(l.tq);return(0,r.useCallback)((()=>{i&&(n(),s.push({pathname:g.OZ.searchHome,search:o,state:{enterMethod:"manage_personalise"}}))}),[i,n,o,s])}},78289:(e,t,o)=>{o.d(t,{n:()=>r,z:()=>s});var a=o(82715);const r={[a.OZ.searchHome]:"general",[a.OZ.searchUser]:"user",[a.OZ.searchVideo]:"video",[a.OZ.searchLive]:"live"},s={[a.OZ.searchHome]:"general_search",[a.OZ.searchUser]:"search_user",[a.OZ.searchVideo]:"search_video",[a.OZ.searchLive]:"search_live"}},85245:(e,t,o)=>{o.d(t,{v:()=>Uo});var a=o(24643),r=o(46682),s=o(41271),i=o(4474),n=o(40099),l=o(47172),d=o(28261),c=o(88091),u=o(94810),p=o(51660),h=o(82715),g=o(93608),m=o(65365),_=o(82535),v=o(95868),f=o(25616),x=o(58305),b=o(88920),y=o(60484),w=o(71281),k=o(45297),S=o(16469),j=o(19442),C=o(2301),I=o(24728),T=o(89107),L=o(58632),M=o(64162),F=o(4126),O=o(93995),D=o(8536),B=o(23999),P=o(26324),E=o(72916),R=o(62564),H=o(74690),A=o(80339),G=o(24451),W=o(95719);const $={historyNotSeenID:[132952,133061],historyDisappearID:[132953,133062],parentIDs:[132954,132955,132956,132957,133063,133064,133065,133066],otherID:[132958,133067]},z=new Set([...$.otherID]),N=new Set([...$.historyNotSeenID]),V=new Set([...$.historyDisappearID]),q=new Set([...$.parentIDs]);var U=o(7672),K=o(55099);let Z=class{constructor(e){this.fetch=e}getFAQList(e){return this.fetch.get("/feedback/2/common_feedback_list/",{query:e})}postSubmitFaqList(e){return this.fetch.post("/feedback/2/post_message/",{query:e})}};Z=(0,L.__decorate)([(0,U._)(),(0,L.__metadata)("design:paramtypes",[K.p])],Z);var X=o(43271);let J=class extends M.E{constructor(e,t){super(),this.service=e,this.search=t,this.defaultState={isOpenReport:!1,isOpenSuccessModal:!1,loading:!1,buttonLoading:!1,reportList:[],checkRadioId:void 0,otherText:"",historyNotSeenText:"",historyDisappearText:"",suggestedGroup:[],isSuccess:void 0,feedbackId:void 0}}setIsOpenReport(e,t){e.isOpenReport=t}setIsOpenSuccessModal(e,t){e.isOpenSuccessModal=t}setOtherText(e,t){e.otherText=t}setHistoryNotSeenText(e,t){e.historyNotSeenText=t}setHistoryDisappearText(e,t){e.historyDisappearText=t}setSuggestedGroup(e,t){e.suggestedGroup=t}setLoading(e,t){e.loading=t}setButtonLoading(e,t){e.buttonLoading=t}setCheckRadioId(e,t){e.checkRadioId=t}setData(e,t){e.reportList=t}setIsSuccess(e,t){e.isSuccess=t}setFeedbackId(e,t){e.feedbackId=t}resetData(e){e.loading=!1,e.buttonLoading=!1,e.checkRadioId=void 0,e.otherText="",e.historyNotSeenText="",e.historyDisappearText="",e.suggestedGroup=[],e.isSuccess=void 0,e.feedbackId=void 0}getReport(e){return e.pipe((0,E.n)((e=>this.service.getFAQList(e).pipe((0,R.T)((e=>{var t;const{message:o,list:a=[]}=e;let r=[];return"success"===o&&a.length&&(r=null===(t=a[0])||void 0===t?void 0:t.children),Object.assign(Object.assign({},e),{data:r})})),(0,D.Z)((e=>(0,B.of)(this.getActions().setData(null==e?void 0:e.data)))),(0,H.Z)(this.getActions().setLoading(!0)),(0,A.q)(this.getActions().setLoading(!1))))))}submitReport(e){return e.pipe((0,G.E)(this.search.state$,this.state$),(0,R.T)((([e,{searchGlobalParams:t},{checkRadioId:o,suggestedGroup:a,otherText:r}])=>({payload:e,rootEnterFrom:null==t?void 0:t.rootEnterFrom,checkRadioId:o,suggestedGroup:a,otherText:r}))),(0,E.n)((({payload:e,checkRadioId:t,rootEnterFrom:o,suggestedGroup:a,otherText:r})=>this.service.postSubmitFaqList(e).pipe((0,R.T)((e=>{const{err_code:t}=e,o=0===t;return{feedbackId:e.feedback_id,isSuccess:o}})),(0,W.M)((({feedbackId:e})=>{let s="";t&&(z.has(t)&&(s=r),q.has(t)&&(s=String(a.filter((e=>e.checked)).map((e=>e.text)))),m.$G.handleSearchTextSubmit({enter_from:o,search_position:g.f.commonParams.page_name,text_type:"recom_search_feedback",question:t,answer:s,impr_id:String(e)}))})),(0,D.Z)((e=>(0,B.of)(this.getActions().setFeedbackId(e.feedbackId),this.getActions().setIsSuccess(e.isSuccess)))),(0,H.Z)(this.getActions().setButtonLoading(!0)),(0,A.q)(this.getActions().setButtonLoading(!1))))))}};(0,L.__decorate)([(0,F.h5)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Object,Boolean]),(0,L.__metadata)("design:returntype",void 0)],J.prototype,"setIsOpenReport",null),(0,L.__decorate)([(0,F.h5)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Object,Boolean]),(0,L.__metadata)("design:returntype",void 0)],J.prototype,"setIsOpenSuccessModal",null),(0,L.__decorate)([(0,F.h5)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Object,String]),(0,L.__metadata)("design:returntype",void 0)],J.prototype,"setOtherText",null),(0,L.__decorate)([(0,F.h5)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Object,String]),(0,L.__metadata)("design:returntype",void 0)],J.prototype,"setHistoryNotSeenText",null),(0,L.__decorate)([(0,F.h5)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Object,String]),(0,L.__metadata)("design:returntype",void 0)],J.prototype,"setHistoryDisappearText",null),(0,L.__decorate)([(0,F.h5)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Object,Array]),(0,L.__metadata)("design:returntype",void 0)],J.prototype,"setSuggestedGroup",null),(0,L.__decorate)([(0,F.h5)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Object,Boolean]),(0,L.__metadata)("design:returntype",void 0)],J.prototype,"setLoading",null),(0,L.__decorate)([(0,F.h5)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Object,Boolean]),(0,L.__metadata)("design:returntype",void 0)],J.prototype,"setButtonLoading",null),(0,L.__decorate)([(0,F.h5)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Object,Object]),(0,L.__metadata)("design:returntype",void 0)],J.prototype,"setCheckRadioId",null),(0,L.__decorate)([(0,F.h5)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Object,Array]),(0,L.__metadata)("design:returntype",void 0)],J.prototype,"setData",null),(0,L.__decorate)([(0,F.h5)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Object,Object]),(0,L.__metadata)("design:returntype",void 0)],J.prototype,"setIsSuccess",null),(0,L.__decorate)([(0,F.h5)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Object,Object]),(0,L.__metadata)("design:returntype",void 0)],J.prototype,"setFeedbackId",null),(0,L.__decorate)([(0,F.h5)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[Object]),(0,L.__metadata)("design:returntype",void 0)],J.prototype,"resetData",null),(0,L.__decorate)([(0,F.Mj)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[P.c]),(0,L.__metadata)("design:returntype",void 0)],J.prototype,"getReport",null),(0,L.__decorate)([(0,F.Mj)(),(0,L.__metadata)("design:type",Function),(0,L.__metadata)("design:paramtypes",[P.c]),(0,L.__metadata)("design:returntype",void 0)],J.prototype,"submitReport",null),J=(0,L.__decorate)([(0,O.n)("searchReport"),(0,L.__metadata)("design:paramtypes",[Z,X.tq])],J);var Q=o(50970),Y=o(54888),ee=o(87654),te=o(49057),oe=o(34131),ae=o(63363),re=o(78289),se=o(67518),ie=o(81825),ne=o(75778),le=o(93341),de=o(64231),ce=o(17984),ue=o(62186),pe=o(28367),he=o(72153);const ge=(0,ue.default)("form",{target:"e14ntknm0"})((({theme:{colors:e,direction:t},isBrowserMode:o,isFullSideNav:a})=>[{display:"flex",flexDirection:"row",alignItems:"center",padding:"12px 16px",background:o?"":e.BGInput,borderRadius:"92px",position:"relative",overflow:"hidden",zIndex:1,margin:"0"},a?{paddingTop:"10px",paddingBottom:"10px",marginInlineEnd:"0.5rem"}:{},a?(0,he.mp)({direction:t,paddingEnd:"4px"}):{}]),"label:FormElement;"),me=(0,ue.default)("div",{target:"e14ntknm1"})((({theme:{colors:e},isFocused:t,withNewStyle:o})=>({display:"none",position:"absolute",left:"0",top:"0",right:"0",bottom:"0",border:t?`2px solid ${e.Negative}`:`${o?"1px":"1.5px"} solid ${o?e.LinePrimary2:e.LinePrimary}`,borderRadius:"92px",zIndex:-1})),"label:DivInputBorder;"),_e=(0,ue.default)("div",{target:"e14ntknm2"})((({theme:{colors:e}})=>({display:"block",position:"absolute",left:"0",top:"0",right:"0",bottom:"0",border:`1px solid ${e.ConstTextInverse4}`,borderRadius:"92px",zIndex:-1})),"label:DivBrowserModeInputBorder;"),ve=(0,ue.default)("input",{target:"e14ntknm3"})((({theme:{colors:e,typography:t,fontFamilies:o,fontWeights:a},hovered:r,isBrowserMode:s,isFullSideNav:i})=>Object.assign(Object.assign(Object.assign({fontFamily:o.TikTokFont,fontWeight:s?a.semiBold:a.normal},t.P2),{border:"none",background:"transparent",outline:"none",padding:"0",width:"100%",color:s?e.ConstTextInverse:e.TextPrimary,caretColor:e.Primary,appearance:"textfield",[`:focus ~ ${me}`]:{display:"block"},"::placeholder":{color:i&&e.UITextPlaceholder||s&&e.ConstTextInverse3||e.TextSecondary},":placeholder-shown":{textOverflow:"ellipsis"},[` ~ ${me}`]:{display:!r||s||i?"none":"block"}}),i?{fontSize:"14px"}:{})),"label:InputElement;");ve.defaultProps=Object.assign(Object.assign({},ve.defaultProps),{"data-e2e":"search-user-input"});const fe=(0,ue.default)("div",{target:"e14ntknm4"})({fontSize:0},"label:DivIconWrapper;"),xe=(0,ue.default)(pe.A,{target:"e14ntknm5"})({animation:"loading-circle-anim linear 1s infinite","@keyframes loading-circle-anim":{"0%":{transform:"rotate(0)"},"100%":{transform:"rotate(360deg)"}}},"label:StyledLoadingCircle;"),be=(0,ue.default)("span",{target:"e14ntknm6"})((({theme:{colors:e},isBrowserMode:t})=>({width:"1px",height:"28px",margin:"-3px 0",background:t?e.ConstTextInverse5:e.LineSecondary})),"label:SpanSpliter;"),ye=(e,t,o)=>t?o?e.BGInput:e.BGView:"transparent",we=(0,ue.default)("button",{target:"e14ntknm7"})((({theme:{colors:e,direction:t},hovered:o,withNewStyle:a})=>[{padding:"11px 16px 11px 12px",margin:"-12px -16px",fontSize:"0",cursor:"pointer",outline:"none",border:"none",background:ye(e,o,a),":active":{background:e.BGInput2},"&:focus, :focus-visible":{outline:"none!important"}},(0,he.mp)({direction:t,marginStart:"0"})]),"label:ButtonSearch;");we.defaultProps=Object.assign(Object.assign({},we.defaultProps),{"data-e2e":"search-button"});const ke=(0,ue.default)("div",{target:"e14ntknm8"})((({focused:e,theme:t})=>({outline:e?`2px solid ${t.colors.Negative}`:"none"})),"label:DivSearchIconContainer;"),Se=(0,n.memo)((0,n.forwardRef)((function({initialValue:e,hovered:t,isBrowserMode:o=!1,onEnter:s,onTab:i,onBlur:d,onMouseEnter:c,onMouseLeave:u,isMouseOnSearchBtn:p,isFullSideNav:_},v){var f;const[{searchValue:x,loading:b,activeIndex:k,inputFocus:S,sugList:C,queryId:L,videoPageType:M},{handleInputFocusChange:F,setSearchValue:O,setActiveUp:D,setActiveDown:B,setActiveIndex:P}]=(0,r.S)(T.C,{dependencies:[],selector:e=>({searchValue:e.searchValue,loading:e.loading,activeIndex:e.activeIndex,inputFocus:e.inputFocus,sugList:e.sugList,queryId:e.queryId,videoPageType:e.videoPageType})}),[{rootEnterFrom:E}]=(0,r.S)(X.tq,{selector:e=>({rootEnterFrom:e.searchGlobalParams.rootEnterFrom}),dependencies:[]}),[{historyList:R,shouldUpdateData:H},A]=(0,r.S)(ee._,{dependencies:[],selector:e=>({historyList:e.historyList,shouldUpdateData:e.shouldUpdateData})}),G=(0,le.Ul)(),{abTestVersion:W,user:$}=(0,y.L$)((0,te.W)((()=>["abTestVersion","user"]),[])),z=Boolean($),N=(0,n.useRef)(null),V=(0,n.useCallback)((()=>{var e;null===(e=N.current)||void 0===e||e.blur()}),[]),q=(0,n.useCallback)((()=>{var e;null===(e=N.current)||void 0===e||e.focus()}),[]);(0,n.useImperativeHandle)(v,(()=>({onEnterBlur:V,onEnterFocus:q})),[V,q]);const{pathname:U}=(0,l.useLocation)(),K=(0,j.JD)((e=>e.showingBrowserMode)),Z=Boolean((0,l.matchPath)(U,{path:h.OZ.searchHome})),{placeholder:J,hasVideoSugWord:Q,word_id:Y}=(0,I.H1)(K),{colors:oe}=(0,se.u)(),ae="v2"===(null!==(f=(0,w.qt)(W,"search_transfer_history"))&&void 0!==f?f:"v1")&&z,re=(0,n.useMemo)((()=>({fill:K?oe.ConstTextInverse4:oe.TextQuaternary,width:16,height:16,style:{margin:"0 12px"}})),[oe,K]),ie=(0,n.useMemo)((()=>!b&&Boolean(x)&&C.length>0&&S),[S,b,x,C.length]);(0,n.useEffect)((()=>{O(e)}),[e,O]);const ue=(0,ce.$)(),pe=(0,n.useCallback)((()=>{ae&&R.length&&m.$G.handleSearchHistory({enter_from:E,search_entrance:E,search_position:g.f.commonParams.page_name,search_keyword:"",action_type:"show",order:-1})}),[R,ae,E]),he=(0,n.useCallback)((e=>{const t=e.target.value;(e=>!e.startsWith(" "))(t)&&(x&&""===t&&!o&&(A.setEnterMethod("cancel"),m.$G.handleEnterSearchBlankPage({enter_from:g.f.commonParams.page_name,enter_method:"cancel",search_keyword:"",is_from_video:"video_detail"===g.f.commonParams.page_name?"1":""}),pe(),ue()),O(t))}),[O,x,pe,ue,A,o]),ge=(0,de.i)({upHandler:D,downHandler:B,confirmHandler:s,tabHandler:i}),me=(0,n.useCallback)((()=>{var e;if(F(!0),H)if(x){const t={enter_from:E,raw_query:x,search_position:"browser_mode"===M?"video_detail":g.f.commonParams.page_name,video_page_type:M,enter_group_id:null!==(e=null==G?void 0:G.id)&&void 0!==e?e:""};m.$G.handleSugGroupImpression(Object.assign({words_source:"sug",words_num:String(C.length)},t)),C.forEach(((e,o)=>{var a;m.$G.handleSugImpression(Object.assign({impr_id:null!==(a=null==e?void 0:e.impr_id)&&void 0!==a?a:"",words_source:"sug",words_position:o,words_content:e.content,sug_type:e.extra_info.sug_user_id?"enrich_sug":"normal_sug",query_id:null!=L?L:"",group_id:e.word_record.group_id},t))}))}else o||(A.setEnterMethod("enter"),m.$G.handleEnterSearchBlankPage({enter_from:g.f.commonParams.page_name,enter_method:"enter",search_keyword:"",is_from_video:"video_detail"===g.f.commonParams.page_name?"1":""}),pe(),ue());else A.setShouldUpdateData(!0)}),[F,x,C,L,pe,ue,A,o,E,G,M,H]),_e=(0,n.useCallback)((()=>{Q&&p?setTimeout((()=>{F(!1)}),200):F(!1),P(-1),null==d||d()}),[Q,p,P,d,F]),be=(0,n.useCallback)((()=>{null==c||c()}),[c]),ye=(0,n.useCallback)((()=>{null==u||u()}),[u]),we=(0,n.useCallback)((()=>{O(""),A.setEnterMethod("cancel"),m.$G.handleEnterSearchBlankPage({enter_from:g.f.commonParams.page_name,enter_method:"cancel",search_keyword:"",is_from_video:"video_detail"===g.f.commonParams.page_name?"1":""}),pe(),setTimeout((()=>{var e;null===(e=N.current)||void 0===e||e.focus()}),0)}),[O,pe,A]);(0,n.useEffect)((()=>{Z||O("")}),[Z,O]),(0,n.useEffect)((()=>{Q?A.setVideoSuggestWord({word:J,word_id:Y}):A.setVideoSuggestWord(void 0)}),[Q,J,A,Y]);const ke=(0,n.useCallback)((()=>b?(0,a.jsx)(fe,{children:(0,a.jsx)(xe,Object.assign({},re))}):x?(0,a.jsx)(fe,{onClick:we,"data-e2e":"reset-search-form",children:(0,a.jsx)(ne.A,Object.assign({},re))}):null),[b,x,re,we]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ve,{ref:N,hovered:t,isBrowserMode:K,isFullSideNav:_,value:x,onChange:he,onKeyDown:ge,onFocus:me,onBlur:_e,onMouseEnter:be,onMouseLeave:ye,placeholder:J,name:"q",type:"search",autoComplete:"off",role:"combobox","aria-controls":ie?"header-sug-results":"","aria-label":J,"aria-expanded":ie,"aria-autocomplete":"list","aria-activedescendant":k>-1&&Boolean(x)?`sug-list-item-${k}`:void 0}),ke()]})}))),je=(0,n.memo)((0,n.forwardRef)((function({initialValue:e,isBrowserMode:t=!1,onSubmit:o,isFullSideNav:s=!1},d){const[{searchValue:c,activeIndex:u},p]=(0,r.S)(T.C,{dependencies:[],selector:e=>({searchValue:e.searchValue,activeIndex:e.activeIndex})}),[g,m]=(0,n.useState)(!1),{search:_}=(0,l.useLocation)(),{q:v}=(0,i.parse)(_),x=(0,f.s)(),{colors:b}=(0,se.u)(),{pathname:y}=(0,l.useLocation)(),w=(0,n.useRef)(!1),k=(0,n.useRef)(null),S=(0,n.useRef)(null),C=Boolean((0,l.matchPath)(y,{path:h.OZ.searchHome})),{isSearchBarStyleV1:I,isSearchBarStyleV3:L,withNewStyle:M}=(0,ae.hA)(),[F,O]=(0,n.useState)(!1),[D,B]=(0,n.useState)(!1),[P,E]=(0,n.useState)(!1),[R,H]=(0,n.useState)(!1),[A,G]=(0,n.useState)(!1),[W,$]=(0,n.useState)(!1),z=(0,n.useCallback)((()=>{var e;null===(e=null==S?void 0:S.current)||void 0===e||e.onEnterBlur()}),[]),N=(0,n.useCallback)((()=>{var e;null===(e=null==S?void 0:S.current)||void 0===e||e.onEnterFocus()}),[]),V=(0,j.JD)((e=>e.showingBrowserMode));(0,n.useImperativeHandle)(d,(()=>({onEnterInputBlur:z,onEnterInputFocus:N})),[z,N]);const q=(0,n.useCallback)((()=>{w.current=!0}),[]),U=(0,n.useCallback)((e=>{e.preventDefault(),p.setInputFocus(!1),null==o||o(e,w.current),w.current=!1}),[p,o]),K=(0,n.useCallback)((e=>{u<0||(p.setInputFocus(!1),null==o||o(e,!0))}),[p,o,u]);(0,n.useEffect)((()=>{const e=()=>{document.hidden&&B(!0)};return window.addEventListener("visibilitychange",e),()=>{window.removeEventListener("visibilitychange",e)}}),[]);const Z=(0,n.useCallback)((e=>()=>{D&&e?B(!1):e&&P||O(e)}),[P,D]),X=(0,n.useCallback)((()=>{L&&$(!0),G(!0),m(!0)}),[L]),J=(0,n.useCallback)((()=>{L&&$(!1),G(!1),m(!1)}),[L]),Q=(0,n.useCallback)((()=>{I||V||(L&&G(!0),$(!0))}),[V,I,L]),Y=(0,n.useCallback)((()=>{I||V||(L&&G(!1),$(!1))}),[V,I,L]),ee=(0,n.useCallback)((()=>{E(!0),O(!1)}),[]),te=(0,n.useCallback)((()=>{E(!1)}),[]),oe=(0,n.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),e.stopPropagation(),p.setInputFocus(!1),null==o||o(e,!0),w.current=!1)}),[p,o]),re=(0,n.useCallback)((e=>{9===e.keyCode&&H(e.target!==k.current)}),[]),ne=(0,n.useCallback)((()=>{H(!1)}),[]),le=(0,n.useCallback)((()=>V?c?b.ConstTextInverse2:b.ConstTextInverse3:M&&(A||W)?b.TextPrimary:c?b.TextSecondary:b.TextQuaternary),[V,c,b,M,A,W]);return(0,a.jsxs)(ge,{"data-e2e":"search-box",className:"search-input",action:"/search",onSubmit:U,onKeyUp:re,isBrowserMode:V,isFullSideNav:s,children:[C&&(0,a.jsx)("h1",{style:{display:"none",alignItems:"center"},children:v}),(0,a.jsx)(Se,{"data-e2e":"search-box-input",initialValue:e,onEnter:q,onTab:K,onBlur:ne,onMouseEnter:Q,onMouseLeave:Y,hovered:W,ref:S,isMouseOnSearchBtn:g,isBrowserMode:t,isFullSideNav:s}),!s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(be,{isBrowserMode:V}),(0,a.jsx)(we,{"data-e2e":"search-box-button",type:"submit",hovered:A,withNewStyle:M,ref:k,onFocus:Z(!0),onBlur:Z(!1),onMouseEnter:X,onMouseLeave:J,onMouseDown:ee,onMouseUp:te,onKeyDown:oe,"aria-label":x("accessibilityLabels_search_button"),children:(0,a.jsx)(ke,{focused:F&&!V,children:(0,a.jsx)(ie.A,{fill:le(),width:24,height:24})})})]}),V?(0,a.jsx)(_e,{}):(0,a.jsx)(me,{isFocused:R,withNewStyle:M})]})})));var Ce,Ie,Te,Le,Me=o(54622),Fe=o(47926);!function(e){e.GENERAL="general",e.TRANSFER_PAGE="transfer_page"}(Ce||(Ce={})),function(e){e.TIKTOK_SEARCH_PC="pc_tt_search_feedback-web"}(Ie||(Ie={})),function(e){e.TIKTOK_SEARCH_PC="pc_tt_search_feedback"}(Te||(Te={})),function(e){e[e.TIKTOK_SEARCH_PC=508044]="TIKTOK_SEARCH_PC"}(Le||(Le={}));const Oe=e=>e?e.toLocaleLowerCase().split("-")[0].replace("pt","pt_BR").replace("zh","zh-TW"):"en",De=(0,ue.default)("form",{target:"e1vzkicp0"})((({theme:e})=>[(0,he.zy)({theme:e,typography:"H6"}),{zIndex:2,background:e.colors.BGPrimary,borderRadius:"8px",overflow:"hidden",width:"700px",display:"flex",flexDirection:"column",margin:0}]),"label:FormReport;"),Be=(0,ue.default)("div",{target:"e1vzkicp1"})({display:"flex",alignItems:"center",padding:"24px 24px 16px",height:"72px"},"label:DivFormHeader;"),Pe=(0,ue.default)("div",{target:"e1vzkicp3"})({cursor:"pointer",padding:"9px",height:"32px"},"label:DivCloseButton;"),Ee=(0,ue.default)("h4",{target:"e1vzkicp4"})((({theme:e})=>({fontSize:"20px",lineHeight:"32px",color:e.colors.TextPrimary,fontFamily:e.fontFamilies.TikTokFont,fontWeight:e.fontWeights.bold,textAlign:"rtl"===e.direction?"right":"left",flex:1})),"label:H4FormTitle;"),Re=(0,ue.default)("div",{target:"e1vzkicp5"})((({theme:e})=>({borderTop:`1px solid ${e.colors.LineSecondary}`,height:"450px",overflowY:"auto",overflowX:"hidden",padding:"16px 12px 0px"})),"label:DivContainer;"),He=(0,ue.default)("div",{target:"e1vzkicp6"})((({theme:e})=>({borderTop:`1px solid ${e.colors.LineSecondary}`,height:"534px",overflowY:"auto",overflowX:"hidden",padding:"0px 12px",display:"flex",alignItems:"center"})),"label:DivLoading;"),Ae=(0,ue.default)("div",{target:"e1vzkicp7"})((({theme:e})=>({height:"32px",fontSize:"16px",lineHeight:"24px",padding:"0px 12px",color:e.colors.TextSecondary,fontFamily:e.fontFamilies.TikTokFont,fontWeight:e.fontWeights.normal,textAlign:"rtl"===e.direction?"right":"left",flex:1})),"label:DivTitle;"),Ge=(0,ue.default)("div",{target:"e1vzkicp8"})({flex:1},"label:DivItem;"),We=(0,ue.default)("div",{target:"e1vzkicp9"})((({theme:e})=>({height:"52px",padding:"14px 12px",textAlign:"rtl"===e.direction?"right":"left",flex:1,".TUXRadio-container .TUXRadio-label span":{fontWeight:e.fontWeights.semiBold,color:e.colors.TextPrimary,size:"16px",lineHeight:"24px"}})),"label:DivItemRadio;"),$e=(0,ue.default)("div",{target:"e1vzkicp10"})((({theme:e})=>({borderRadius:"8px",backgroundColor:e.colors.BGView,flex:1})),"label:DivItemChildrenBox;"),ze=(0,ue.default)("div",{target:"e1vzkicp11"})((({theme:e})=>({height:"48px",padding:"14px 12px",textAlign:"rtl"===e.direction?"right":"left",flex:1})),"label:DivItemChildren;"),Ne=(0,ue.default)("div",{target:"e1vzkicp12"})((({theme:e})=>({backgroundColor:e.colors.BGPrimary,display:"flex",flexDirection:"row",alignItems:"center",margin:"0px 12px",position:"relative",overflow:"hidden",width:"calc(100% - 24px)",height:"48px",borderBottom:`1px solid ${e.colors.LineInput}`})),"label:DivInput;"),Ve=(0,ue.default)("input",{target:"e1vzkicp13"})((({theme:e})=>({backgroundColor:e.colors.BGPrimary,color:e.colors.TextPrimary,width:"100%",height:"48px",border:"none",outline:"none"})),"label:InputItem;"),qe=(0,ue.default)("div",{target:"e1vzkicp14"})({width:"100%",height:"38px"},"label:DivBottom;"),Ue=(0,ue.default)("div",{target:"e1vzkicp15"})((({theme:e})=>({position:"relative",height:"84px",width:"100%",borderTop:`0.5px solid ${e.colors.LinePrimary2}`,backgroundColor:e.colors.BGPrimary})),"label:DivFooter;"),Ke=(0,ue.default)("div",{target:"e1vzkicp16"})({height:"36px",position:"absolute",cursor:"pointer",top:"24px",right:"24px"},"label:DivSubmit;"),Ze=(0,ue.default)("div",{target:"e1vzkicp17"})((({theme:{direction:e}})=>[(0,he.mp)({direction:e,paddingStart:"12px"}),{display:"flex",alignItems:"center"}]),"label:DivIconWrapper;"),Xe={minWidth:"120px",borderRadius:"4px"},Je=(0,n.memo)((function(e){const{groupList:t}=e,o=(0,f.s)(),s=(0,n.useRef)(null),{colors:i}=(0,se.u)(),[{otherText:l,historyNotSeenText:d,historyDisappearText:u,suggestedGroup:p,checkRadioId:h},g]=(0,r.S)(J,{dependencies:[],selector:e=>({otherText:e.otherText,historyNotSeenText:e.historyNotSeenText,historyDisappearText:e.historyDisappearText,suggestedGroup:e.suggestedGroup,checkRadioId:e.checkRadioId})}),m=(0,n.useMemo)((()=>({fill:i.TextQuaternary,width:16,height:16,style:{}})),[i]),_=(0,n.useCallback)((e=>()=>{g.setCheckRadioId(e)}),[g]),v=(0,n.useCallback)((e=>()=>{const t=p.map((t=>e===t.text?Object.assign(Object.assign({},t),{checked:!t.checked}):t));g.setSuggestedGroup(t)}),[g,p]),x=(0,n.useCallback)((e=>{const{name:t,value:o}=e.target;o.startsWith(" ")||("historyNotSeenText"===t?g.setHistoryNotSeenText(o):"historyDisappearText"===t?g.setHistoryDisappearText(o):g.setOtherText(o))}),[g]),b=(0,n.useCallback)((e=>()=>{var t;N.has(e)?g.setHistoryNotSeenText(""):V.has(e)?g.setHistoryDisappearText(""):z.has(e)&&g.setOtherText(""),null===(t=s.current)||void 0===t||t.focus()}),[g]),y=(0,n.useCallback)(((e,t)=>e?(0,a.jsx)(Ze,{onClick:b(t),children:(0,a.jsx)(ne.A,Object.assign({},m))}):null),[m,b]),w=(0,n.useCallback)((e=>{if(h===e.id)return(0,a.jsxs)(a.Fragment,{children:[z.has(e.id)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(Ne,{children:[(0,a.jsx)(Ve,{ref:s,value:l,maxLength:1500,placeholder:`(${o("suggested_search_feedback12")})`,onChange:x,name:"other",autoComplete:"off"}),y(l,e.id)]}),(0,a.jsx)(qe,{})]}),N.has(e.id)&&(0,a.jsxs)(Ne,{children:[(0,a.jsx)(Ve,{ref:s,value:d,maxLength:1500,onChange:x,name:"historyNotSeenText",autoComplete:"off"}),y(d,e.id)]}),V.has(e.id)&&(0,a.jsxs)(Ne,{children:[(0,a.jsx)(Ve,{ref:s,value:u,maxLength:1500,onChange:x,name:"historyDisappearText",autoComplete:"off"}),y(u,e.id)]}),q.has(e.id)&&(0,a.jsx)($e,{children:p.map(((e,t)=>(0,a.jsx)(ze,{children:(0,a.jsx)(c.h$,{label:e.text,checked:e.checked,onChange:v(e.text),labelPosition:"before"})},t)))})]})}),[o,x,y,h,l,d,u,p,v]);return(0,a.jsx)(a.Fragment,{children:t.map(((e,t)=>(0,a.jsxs)(Ge,{children:[(0,a.jsx)(We,{children:(0,a.jsx)(c.v3,{label:o(e.name),value:o(e.name),name:"question",labelPosition:"before",onChange:_(e.id)},t)}),w(e)]},t)))})})),Qe=(0,n.memo)((function(e){const{onClose:t,onSubmitSuccess:o}=e,s=(0,f.s)(),i=(0,c.Ab)({zIndex:10010}),{wid:l}=(0,y.L$)((0,te.W)((()=>["wid"]),[])),[{loading:d,reportList:u,checkRadioId:p,historyNotSeenText:h,historyDisappearText:_,otherText:v,suggestedGroup:x,isSuccess:b,feedbackId:w,buttonLoading:k},S]=(0,r.S)(J,{dependencies:[],selector:e=>({loading:e.loading,buttonLoading:e.buttonLoading,reportList:e.reportList,checkRadioId:e.checkRadioId,historyNotSeenText:e.historyNotSeenText,historyDisappearText:e.historyDisappearText,otherText:e.otherText,suggestedGroup:e.suggestedGroup,isSuccess:e.isSuccess,feedbackId:e.feedbackId})}),[{rootEnterFrom:j}]=(0,r.S)(X.tq,{dependencies:[],selector:e=>({rootEnterFrom:e.searchGlobalParams.rootEnterFrom})}),[{historyList:C,guessSearchList:I,logId:T}]=(0,r.S)(ee._,{dependencies:[],selector:e=>({historyList:e.historyList,guessSearchList:e.guessSearchList,logId:e.logId})});(0,n.useEffect)((()=>{const e=[];I.forEach((t=>{var o;t.word&&e.push({text:t.word,value:null!==(o=t.group_id)&&void 0!==o?o:"",checked:!1})})),S.setSuggestedGroup(e)}),[I,S]),(0,n.useEffect)((()=>{if("boolean"==typeof b&&"number"==typeof w){if(m.$G.handleSearchFeedbackStatus({enter_from:j,search_position:g.f.commonParams.page_name,text_type:"recom_search_feedback",impr_id:String(w),is_success:b?1:0}),b)return void o();setTimeout((()=>{i.open({message:s("search_Submission_Failed_tips"),durationMS:3e3})}),0)}}),[b,w,s,o,S,j]);const L=(0,n.useMemo)((()=>{if(!p)return"";let e="";e=V.has(p)?_:N.has(p)?h:v;let t="";return e.length<=14&&(t="[Transfer page feedback]"),t+e}),[p,h,_,v]),M=(0,n.useMemo)((()=>{const e="a".charCodeAt(0),t=u.map(((t,o)=>{const a=String.fromCharCode(e+o);return{[`question_${a}`]:t.name,[`answer_${a}`]:t.children.filter((({id:e})=>e===p)).map((({name:e="",id:t})=>{let o=[];return q.has(t)&&(o=x.filter((e=>e.checked)).map((e=>({title:e.text,value:e.value})))),z.has(t)&&(o=[{title:e,value:v}]),V.has(t)&&(o=[{title:e,value:_}]),N.has(t)&&(o=[{title:e,value:h}]),{title:e,id:t,subInfos:o}}))}}));return{userFeedbackDetail:JSON.stringify(t)}}),[u,p,v,_,h,x]),F=(0,n.useMemo)((()=>{const e=x.map((e=>e.text));return{aid:Le.TIKTOK_SEARCH_PC,app_name:"pc_tt_search_feedback",webid:l,content:L,appkey:"pc_tt_search_feedback-web",qr_id:p,skip_duplicate_content_check:!0,extra_params:JSON.stringify(M),from:"transfer_page",biz_appid:Le.TIKTOK_SEARCH_PC,extra_persistent_params:JSON.stringify({historyList:C,logId:T,suggestedWords:e})}}),[L,p,C,T,x,M,l]),O=(0,n.useCallback)((e=>{e.preventDefault()}),[]),D=(0,n.useCallback)((()=>{S.submitReport(F)}),[S,F]),B=(0,n.useMemo)((()=>{if(!p)return!1;let e=!1;return x.forEach((t=>{t.checked&&(e=!0)})),q.has(p)&&e||z.has(p)&&""!==v.trim()||!z.has(p)&&!q.has(p)}),[p,v,x]),P=(0,n.useCallback)((()=>(0,a.jsxs)(Be,{children:[(0,a.jsx)(Ee,{"data-e2e":"search-report-title",children:s("suggested_search_feedback10")}),(0,a.jsx)(Pe,{"data-e2e":"search-report-card-cancel",onClick:t,children:(0,a.jsx)(Me.A,{width:14,height:14})})]})),[t,s]),E=(0,n.useCallback)((()=>d?(0,a.jsx)(He,{children:(0,a.jsx)(c.sg,{center:!0})}):(0,a.jsxs)(a.Fragment,{children:[u.map(((e,t)=>(0,a.jsxs)(Re,{children:[(0,a.jsx)(Ae,{children:s(e.name)}),(0,a.jsx)(Je,{groupList:e.children})]},t))),(0,a.jsx)(Ue,{children:(0,a.jsx)(Ke,{children:(0,a.jsx)(c.I0,{label:s("Submit"),loading:k,onClick:D,disabled:!B,variant:"primary",deprecatedStyle:Xe})})})]})),[s,d,u,B,D,k]);return(0,a.jsx)(Fe.i,{compact:!0,isOpen:!0,onClose:t,children:(0,a.jsxs)(De,{"data-e2e":"report-form",onSubmit:O,children:[P(),E()]})})})),Ye=(0,ue.default)("div",{target:"e1hi1cmj0"})((({showingBrowserMode:e,searchBarWidth:t})=>({position:"relative",width:e?t:"",maxWidth:e?"calc(56.25vh - 32px)":""})),"label:DivSearchFormContainer;"),et=(0,ue.default)("button",{target:"e1hi1cmj1"})((({theme:e})=>({width:"100%",height:"48px",lineHeight:"22px",fontSize:"16px",cursor:"pointer",color:e.colors.ConstTextInverse,background:e.colors.Primary,border:"none",borderRadius:"8px"})),"label:ButtonSuccessModal;"),tt=(0,ue.default)("div",{target:"e1hi1cmj2"})({width:"100%",display:"flex",flexDirection:"column",alignItems:"center",flex:1},"label:DivModalBody;"),ot=(0,ue.default)("div",{target:"e1hi1cmj3"})((({theme:e})=>({width:"100%",fontWeight:e.fontWeights.bold,color:e.colors.TextPrimary,lineHeight:"36px",fontSize:"24px",textAlign:"center",padding:"0px 32px"})),"label:DivModalBodyTitle;"),at=(0,ue.default)("div",{target:"e1hi1cmj4"})((({theme:e})=>({marginTop:"18px",width:"100%",color:e.colors.TextSecondary,lineHeight:"18px",fontSize:"16px",textAlign:"center",padding:"0px 32px"})),"label:DivModalBodyText;"),rt=(0,ue.default)("div",{target:"e1hi1cmj5"})((({theme:e})=>({width:"100%",color:e.colors.TextSecondary,textAlign:"center",padding:"24px 32px"})),"label:DivModalFooter;");var st=o(50289),it=o(98910);const nt=e=>{const[{activeIndex:t},o]=(0,r.S)(T.C),a=t===e,s=(0,n.useCallback)((()=>{a||o.setActiveIndex(e)}),[a,o,e]);return{active:a,handleMouseEnter:s}};var lt=o(37694),dt=o(10819),ct=o(11983),ut=o(60342),pt=o(97706),ht=o(60751);const gt=(0,ue.default)("div",{target:"e13mjih40"})((({theme:{direction:e}})=>[(0,he.mp)({direction:e,marginStart:"8px"}),{width:"24px",flex:"0 0 24px",display:"flex",flexDirection:"column",alignItems:"center",marginLift:"auto",height:"22px"}]),"label:DivActionContainer;"),mt=(0,ue.default)("div",{target:"e13mjih41"})((({shouldShowMore:e})=>({position:"relative",display:e?"block":"none"})),"label:DivMoreContainer;"),_t=(0,ue.default)(ht.A,{target:"e13mjih42"})({width:"15.83px",height:"24px",cursor:"pointer",display:"block"},"label:StyledMoreIcon;");_t.defaultProps=Object.assign(Object.assign({},_t.defaultProps),{"data-e2e":"comment-more-icon"});const vt=(0,ue.default)("div",{target:"e13mjih43"})((({theme:e})=>(0,he.zy)({theme:e,typography:"P2",fontWeight:"semiBold",fontFamily:"TikTokFont"})),{padding:"0 12px",minWidth:"150px"},"label:DivPopupContainer;"),ft=(0,ue.default)("p",{target:"e13mjih44"})((({theme:{colors:e}})=>({display:"flex",alignItems:"center",padding:"12px 0",whiteSpace:"nowrap",cursor:"pointer","&:not(:last-of-type)":{borderBottom:`1px solid ${e.LineSecondary}`},":hover":{color:e.Primary}})),"label:PActionItem;"),xt=(e,t,o)=>o?e.Primary:t?"rgba(255, 255, 255, 0.9)":e.TextPrimary,bt=(0,ue.default)("span",{target:"e13mjih45"})((({theme:{direction:e,colors:t},isBrowserMode:o,hovered:a})=>[(0,he.mp)({direction:e,marginStart:"12px"}),{color:xt(t,o,a)}]),"label:SpanActionText;"),yt="rgba(255, 255, 255, 0.9)",wt=function({shouldShowMore:e=!1,isBrowserMode:t=!1,parentRef:o,itemInfo:i={}}){var l,d,c,u;const p=(0,f.s)(),h=(0,n.useRef)(null),{direction:g}=(0,se.u)(),{active:_,handleMouseEnter:v,handleMouseLeave:b}=(0,ut.K)(300),{user:y}=null!==(l=(0,te.W)((()=>["user"]),[]))&&void 0!==l?l:{},[{searchValue:w},k]=(0,r.S)(T.C,{selector:e=>e,dependencies:[]}),[S,j]=(0,n.useState)(!1),[C,I]=(0,n.useState)(!1),[L,M]=(0,n.useState)(-1),[F,O]=(0,n.useState)(0),[D,B]=(0,n.useState)("initial"),P=function({suggestion:e,extra:t,onShow:o}){const a=(0,s.P)(Q.L,{selector:e=>e.lang,dependencies:[]}),{handleShowReport:r}=(0,it.Ah)({onShow:o,reportTarget:{lang:a,report_type:"suggestion",object_id:e,item_id:e,suggestion_extra:t}});return r}({suggestion:encodeURI(i.content),extra:{sug_type:i.extra_info.sug_user_id?"enrich_sug":"normal_sug",raw_query:i.content,words_content:null!==(d=i.content)&&void 0!==d?d:"",words_position:i.index,words_source:"sug",feedback_id:`${(new Date).getTime()}`,group_id:null!==(c=i.word_record.group_id)&&void 0!==c?c:"",impr_id:null!==(u=i.impr_id)&&void 0!==u?u:""}}),E=(0,n.useCallback)((e=>()=>{0===e?j(!0):1===e&&I(!0)}),[h]),R=(0,n.useCallback)((e=>()=>{0===e?j(!1):1===e&&I(!1)}),[]),H=(0,n.useCallback)((e=>{13===e.keyCode||32===e.keyCode?((0,x.Gu)(e),_?b():v()):27===e.keyCode&&_&&((0,x.Gu)(e),b())}),[v,b,_]),A=(0,n.useCallback)((e=>t=>{13!==t.keyCode&&32!==t.keyCode||((0,x.Gu)(t),e(t))}),[]),G="ltr"===g?"bottomRight":"bottomLeft",{colors:W}=(0,se.u)(),$=(0,n.useCallback)((e=>{var t,o,a;e.preventDefault(),e.stopPropagation(),m.$G.handleSugReportConfirm({feedback_id:`${(new Date).getTime()}`,group_id:null!==(t=i.word_record.group_id)&&void 0!==t?t:"",words_content:null!==(o=i.content)&&void 0!==o?o:"",words_position:i.index,raw_query:w,impr_id:null!==(a=i.impr_id)&&void 0!==a?a:"",button_type:"not_relevant",words_source:"sug",sug_type:i.extra_info.sug_user_id?"enrich_sug":"normal_sug"}),b(),k.setActiveIndex(-1),ct.F.open({content:p("Thank you for your feedback"),duration:3})}),[p,y,i,k]),z=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),P(e)}),[P]),N=(0,n.useCallback)((e=>0===e?S?W.Primary:t?yt:void 0:1===e?C?W.Primary:t?yt:void 0:void 0),[S,C,t,W]);(0,n.useEffect)((()=>{var e,t,o;_&&m.$G.handleSugReportLaunch({feedback_id:`${(new Date).getTime()}`,group_id:null!==(e=i.word_record.group_id)&&void 0!==e?e:"",words_content:null!==(t=i.content)&&void 0!==t?t:"",words_position:i.index,words_source:"sug",raw_query:w,impr_id:null!==(o=i.impr_id)&&void 0!==o?o:"",sug_type:i.extra_info.sug_user_id?"enrich_sug":"normal_sug"})}),[_]),(0,n.useEffect)((()=>{var e,t;if(h.current&&_){const a=h.current.getBoundingClientRect().top;L<0&&M(a);const r=null!==(t=null===(e=null==o?void 0:o.current)||void 0===e?void 0:e.scrollTop)&&void 0!==t?t:0;B(`${L-r<=0?"initial":L-r}px`),O(h.current.clientWidth)}}),[h.current,_,null==o?void 0:o.current]);const V=(0,n.useCallback)((()=>{const e=F-18-12+4;return"ltr"===g?`-${e}px`:`${e}px`}),[F,g]);return(0,a.jsx)(gt,{children:(0,a.jsxs)(mt,{"aria-label":p("pc_web_more_btn"),role:"button",shouldShowMore:e,onMouseEnter:v,onMouseLeave:b,tabIndex:0,onKeyDown:H,children:[(0,a.jsx)(_t,{fill:t?yt:void 0}),(0,a.jsx)(pt.z,{backgroundColor:t?"#252525":W.BGSecondary,active:_,placement:G,style:{position:"fixed",top:D,transform:`translateX(${V()})`},margin:"initial",children:(0,a.jsxs)(vt,{ref:h,children:[(0,a.jsxs)(ft,{"aria-label":p("Report"),role:"button",tabIndex:0,"data-e2e":"related-search-report",onMouseEnter:E(0),onMouseLeave:R(0),onMouseDown:z,onKeyDown:A(z),children:[(0,a.jsx)(lt.A,{width:24,height:24,fill:N(0)}),(0,a.jsx)(bt,{isBrowserMode:t,hovered:S,children:p("Report")})]}),(0,a.jsxs)(ft,{"aria-label":p("sug_report_relevant"),role:"button",onMouseDown:$,tabIndex:1,onKeyDown:A($),"data-e2e":"sug-not-relevant",onMouseEnter:E(1),onMouseLeave:R(1),children:[(0,a.jsx)(dt.A,{width:24,height:24,fill:N(1)}),(0,a.jsx)(bt,{isBrowserMode:t,hovered:C,children:p("sug_report_relevant")})]})]})})]})})};var kt=o(92846);const St=(e,t,o)=>o?"0 2px 12px rgba(0, 0, 0, 0.12)":t?"":`0 2px 12px ${e.ShadowPrimary}`,jt=(0,ue.default)("ul",{target:"e1gva98t0"})((({theme:{colors:e,isDark:t},isBrowserMode:o,isFullSideNav:a})=>[{position:"absolute",width:"100%",boxSizing:"border-box",maxHeight:(a?"min(calc(100vh - 150px), 734px)":o&&"210px")||`min(calc(100vh - 96px - ${he.uF}px), 734px)`,overflowY:"auto",overflowX:"hidden",listStyleType:"none",paddingInlineStart:0},!a&&{paddingTop:"8px",marginTop:"8px",background:o?"rgba(18, 18, 18, 1)":e.BGSecondary,boxShadow:St(e,t,o),borderRadius:"8px"}]),"label:UlContainer;");jt.defaultProps=Object.assign(Object.assign({},jt.defaultProps),{"data-e2e":"sug-container"});const Ct=(0,ue.default)("li",{target:"e1gva98t1"})((({paddingVertical:e,active:t,theme:{colors:o}})=>({padding:`${e}px 16px`,cursor:"pointer",background:t?o.BGView:void 0,display:"flex",alignItems:"center"})),"label:LiItemContainer;"),It=(0,ue.default)("h4",{target:"e1gva98t2"})((({theme:{typography:e,fontWeights:t},isBrowserMode:o})=>Object.assign(Object.assign({},e.P2),{fontWeight:t.semiBold,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:o?"rgba(255, 255, 255, 0.9)":""})),"label:H4ItemTitle;"),Tt=(0,ue.default)("p",{target:"e1gva98t3"})((({theme:{typography:e,fontWeights:t,colors:o},isBrowserMode:a})=>Object.assign(Object.assign({},e.P3),{color:a?"rgba(255,255,255,0.5)":o.TextTertiary,fontWeight:t.normal,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})),"label:PItemDesc;"),Lt=(0,ue.default)("p",{target:"e1gva98t4"})((({theme:{fontFamilies:e,fontWeights:t,typography:o,colors:a},isBrowserMode:r})=>Object.assign(Object.assign({fontFamily:e.TikTokFont,fontWeight:t.semiBold},o.P2),{color:r?"rgba(255, 255, 255, 0.9)":a.TextPrimary,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"})),"label:PMoreText;"),Mt=(0,ue.default)("div",{target:"e1gva98t5"})((({theme:{direction:e}})=>Object.assign({height:"20px",flex:"0 0 20px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"15px"},(0,he.mp)({direction:e,marginEnd:"8px"}))),"label:DivSearchIconContainer;"),Ft=(0,ue.default)(kt.e,{target:"e1gva98t6"})((({theme:{direction:e}})=>Object.assign({},(0,he.mp)({direction:e,marginEnd:"12px"}))),"label:StyledAvatar;"),Ot=(0,ue.default)("div",{target:"e1gva98t7"})({flex:"0 1 auto",minWidth:0,width:"100%"},"label:DivSugItemContent;"),Dt=(0,ue.default)("div",{target:"e1gva98t8"})((({theme:{fontWeights:e,typography:t,colors:o},isBrowserMode:a})=>Object.assign(Object.assign({height:"30px",padding:"5px 12px"},t.P3),{fontWeight:e.semiBold,color:a?"rgba(255, 255, 255, 0.5)":o.TextTertiary})),"label:DivSugAccountTitle;"),Bt=(0,ue.default)("div",{target:"e1gva98t9"})({display:"flex",justifyContent:"space-between",alignItems:"center"},"label:DivSugItemWrapper;"),Pt=(0,ue.default)("div",{target:"e1gva98t10"})({},"label:DivSugUserInfo;"),Et=(0,n.memo)((function(e){const{item:t,index:o,onSelect:r,parentRef:i}=e,{user:l}=(0,s.P)(Q.L,{selector:e=>{var t;return{user:null===(t=e.appContext)||void 0===t?void 0:t.user}},dependencies:[]}),d=Boolean(l),{active:c,handleMouseEnter:u}=nt(o),p=(0,j.JD)((e=>e.showingBrowserMode)),{content:h,extra_info:g}=t,{nickname:m,unique_id:_,is_verified:v,rich_sug_avatar_uri:f}=g,{hasSugReport:x}=(0,ae.CA)(),b=Boolean(_),y=(0,n.useCallback)((e=>{null==r||r(e,t,o)}),[o,t,r]),w=(0,n.useCallback)(((e,t)=>Object.assign({index:t},e)),[]),k=b?"user-sug-item":"content-sug-item";return(0,a.jsxs)(Ct,{id:`sug-list-item-${o}`,"data-e2e":k,paddingVertical:9,active:c,onMouseDown:y,onMouseMove:u,role:"option",children:[b?(0,a.jsx)(Ft,{"data-e2e":"sug-user-avatar",src:f,size:40}):(0,a.jsx)(Mt,{children:(0,a.jsx)(ie.A,{fill:p?"rgba(255, 255, 255, 0.9)":void 0})}),(0,a.jsx)(Ot,{children:b?(0,a.jsxs)(Bt,{children:[(0,a.jsxs)(Pt,{children:[(0,a.jsxs)(It,{"data-e2e":"sug-username",isBrowserMode:p,children:[_," ",v&&(0,a.jsx)(st.s,{"data-e2e":"sug-bluev",width:14,height:14},"badge")]}),(0,a.jsx)(Tt,{"data-e2e":"sug-nickname",isBrowserMode:p,children:m})]}),x&&d&&(0,a.jsx)(wt,{shouldShowMore:c,isBrowserMode:p,parentRef:i,itemInfo:w(t,o)})]}):(0,a.jsxs)(Bt,{children:[(0,a.jsx)(It,{isBrowserMode:p,children:h}),x&&d&&(0,a.jsx)(wt,{shouldShowMore:c,isBrowserMode:p,parentRef:i,itemInfo:w(t,o)})]})})]})})),Rt=(0,n.memo)((function({index:e,onClick:t}){const o=(0,s.P)(T.C,{dependencies:[],selector:e=>e.searchValue}),{active:r,handleMouseEnter:i}=nt(e),l=(0,j.JD)((e=>e.showingBrowserMode)),d=(0,f.s)()("view_all_results",{keyword:o}),c=(0,n.useCallback)((e=>{null==t||t(e,"click_view_all")}),[t]);return(0,a.jsx)(Ct,{id:`sug-list-item-${e}`,"data-e2e":"sug-more",paddingVertical:15,active:r,onMouseMove:i,onMouseDown:c,role:"option",children:(0,a.jsx)(Lt,{isBrowserMode:l,children:d})})})),Ht=(0,n.memo)((function(e){const t=(0,f.s)(),o=(0,n.useRef)(null),[s,i]=(0,r.S)(T.C,{selector:e=>e.sugList,dependencies:[]}),l=(0,n.useCallback)((()=>{i.setActiveIndex(-1)}),[i]),[d,c]=(0,n.useMemo)((()=>s.reduce((([e,t],o)=>(o.extra_info.sug_user_id?e.push(o):t.push(o),[e,t])),[[],[]])),[s]),u=(0,j.JD)((e=>e.showingBrowserMode)),p=(t,r=0)=>t.map(((t,s)=>(0,a.jsx)(Et,{item:t,index:s+r,onSelect:e.onSelect,parentRef:o},t.content)));return(0,a.jsxs)(jt,{id:"header-sug-results",onMouseLeave:l,role:"listbox","aria-label":t("accessibilityLabels_search_suggestions"),isBrowserMode:u,onScroll:x.dG,onWheel:x.dG,isFullSideNav:e.isFullSideNav,ref:o,children:[p(c),0===d.length?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Dt,{"data-e2e":"sug-account",isBrowserMode:u,children:t("search_account")}),p(d,c.length)]}),(0,a.jsx)(Rt,{index:s.length,onClick:e.onSelectMore})]})}));var At=o(28745),Gt=o(38063),Wt=o(7859),$t=o(68880);const zt=e=>{const[{activeIndex:t},o]=(0,r.S)(ee._),a=t===e,s=(0,n.useCallback)((()=>{a||o.setActiveIndex(e)}),[a,o,e]);return{active:a,handleMouseEnter:s}};var Nt=o(84987);const Vt={id:"chevron_down_fill-96328bc0",use:"chevron_down_fill-96328bc0-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="chevron_down_fill-96328bc0"><path fill="#161823" fill-opacity=".6" fill-rule="evenodd" d="M5.47 8.28 1.896 4.707a.25.25 0 0 1 0-.353l.708-.708a.25.25 0 0 1 .353 0L6 6.69l3.043-3.043a.25.25 0 0 1 .353 0l.708.708a.25.25 0 0 1 0 .353L6.53 8.28a.75.75 0 0 1-1.06 0" clip-rule="evenodd" /></symbol>'};function qt(e){const t=(0,n.useContext)(Nt.X);return(0,n.useLayoutEffect)((()=>(t.add(Vt),()=>{t.remove("chevron_down_fill-96328bc0")})),[]),(0,a.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,a.jsx)("use",{xlinkHref:"#chevron_down_fill-96328bc0"},void 0)}),void 0)}const Ut={id:"chevron_down_fill_dark-1c029b26",use:"chevron_down_fill_dark-1c029b26-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="chevron_down_fill_dark-1c029b26"><path fill="white" fill-opacity=".6" fill-rule="evenodd" d="M5.47 8.28 1.896 4.707a.25.25 0 0 1 0-.353l.708-.708a.25.25 0 0 1 .353 0L6 6.69l3.043-3.043a.25.25 0 0 1 .353 0l.708.708a.25.25 0 0 1 0 .353L6.53 8.28a.75.75 0 0 1-1.06 0" clip-rule="evenodd" /></symbol>'};function Kt(e){const t=(0,n.useContext)(Nt.X);return(0,n.useLayoutEffect)((()=>(t.add(Ut),()=>{t.remove("chevron_down_fill_dark-1c029b26")})),[]),(0,a.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,a.jsx)("use",{xlinkHref:"#chevron_down_fill_dark-1c029b26"},void 0)}),void 0)}const Zt={id:"clock_fill-499d0f2f",use:"clock_fill-499d0f2f-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="clock_fill-499d0f2f"><g clip-path="url(#clock_fill-499d0f2f_a)"><path fill="#161823" fill-opacity=".34" d="M.8 8a7.2 7.2 0 1 1 14.4 0A7.2 7.2 0 0 1 .8 8m9.764 2.853c.15.106.359.069.464-.082l.612-.874a.333.333 0 0 0-.082-.464L9.01 7.65a.33.33 0 0 1-.143-.273V4.334a.333.333 0 0 0-.333-.333H7.467a.333.333 0 0 0-.333.333v3.771c0 .218.106.421.284.546z" /></g><defs><clipPath id="clock_fill-499d0f2f_a"><path fill="white" d="M0 0h16v16H0z" /></clipPath></defs></symbol>'};function Xt(e){const t=(0,n.useContext)(Nt.X);return(0,n.useLayoutEffect)((()=>(t.add(Zt),()=>{t.remove("clock_fill-499d0f2f")})),[]),(0,a.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,a.jsx)("use",{xlinkHref:"#clock_fill-499d0f2f"},void 0)}),void 0)}const Jt={id:"clock_fill_dark-f214b7e1",use:"clock_fill_dark-f214b7e1-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="clock_fill_dark-f214b7e1"><g clip-path="url(#clock_fill_dark-f214b7e1_a)"><path fill="white" fill-opacity=".34" d="M.8 8a7.2 7.2 0 1 1 14.4 0A7.2 7.2 0 0 1 .8 8m9.764 2.853c.15.106.358.069.464-.082l.611-.874a.333.333 0 0 0-.082-.464L9.01 7.65a.33.33 0 0 1-.142-.273V4.334a.333.333 0 0 0-.333-.333H7.467a.333.333 0 0 0-.333.333v3.771c0 .218.106.421.284.546z" /></g><defs><clipPath id="clock_fill_dark-f214b7e1_a"><path fill="white" d="M0 0h16v16H0z" /></clipPath></defs></symbol>'};function Qt(e){const t=(0,n.useContext)(Nt.X);return(0,n.useLayoutEffect)((()=>(t.add(Jt),()=>{t.remove("clock_fill_dark-f214b7e1")})),[]),(0,a.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,a.jsx)("use",{xlinkHref:"#clock_fill_dark-f214b7e1"},void 0)}),void 0)}const Yt={id:"fire-52626e4f",use:"fire-52626e4f-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="fire-52626e4f"><path fill="#FE2C55" fill-rule="evenodd" d="M13.942 10.338c.196-1.164-.017-3.798-2.031-5.434-.165-.134-.408-.073-.515.11-.457.785-1.2 1.741-2.11 2.08.556-1.91.833-5.2-2.108-6.871a.327.327 0 0 0-.486.26c-.128 1.212-.275 2.216-2.227 4.18C3.3 6.093 1.7 8.096 2.05 10.337 2.44 12.853 4.647 15 8.039 15s5.49-2.201 5.903-4.662" clip-rule="evenodd" /></symbol>'};function eo(e){const t=(0,n.useContext)(Nt.X);return(0,n.useLayoutEffect)((()=>(t.add(Yt),()=>{t.remove("fire-52626e4f")})),[]),(0,a.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,a.jsx)("use",{xlinkHref:"#fire-52626e4f"},void 0)}),void 0)}const to={id:"fire_dark-43d2a9e0",use:"fire_dark-43d2a9e0-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="fire_dark-43d2a9e0"><path fill="#FF3B5C" fill-rule="evenodd" d="M13.942 10.338c.196-1.164-.017-3.798-2.031-5.434-.165-.134-.408-.073-.515.11-.457.785-1.2 1.741-2.11 2.08.556-1.91.833-5.2-2.108-6.871a.327.327 0 0 0-.486.26c-.128 1.212-.275 2.216-2.227 4.18C3.3 6.093 1.7 8.096 2.05 10.337 2.44 12.853 4.647 15 8.039 15s5.49-2.201 5.903-4.662" clip-rule="evenodd" /></symbol>'};function oo(e){const t=(0,n.useContext)(Nt.X);return(0,n.useLayoutEffect)((()=>(t.add(to),()=>{t.remove("fire_dark-43d2a9e0")})),[]),(0,a.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,a.jsx)("use",{xlinkHref:"#fire_dark-43d2a9e0"},void 0)}),void 0)}const ao={id:"music-3b9fa23c",use:"music-3b9fa23c-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="music-3b9fa23c"><path fill="#FE2C55" d="M13.667 1.401v9.933a2.333 2.333 0 1 1-2.334-2.333h1.2V3.147L6 3.997v8.337a2.333 2.333 0 1 1-2.334-2.333h1.2V2.462c0-.167.125-.309.291-.33L13.29 1.07c.2-.026.377.129.377.33" /></symbol>'};function ro(e){const t=(0,n.useContext)(Nt.X);return(0,n.useLayoutEffect)((()=>(t.add(ao),()=>{t.remove("music-3b9fa23c")})),[]),(0,a.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,a.jsx)("use",{xlinkHref:"#music-3b9fa23c"},void 0)}),void 0)}const so={id:"music_dark-177d07e7",use:"music_dark-177d07e7-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="music_dark-177d07e7"><path fill="#FF3B5C" d="M13.667 1.401v9.933a2.333 2.333 0 1 1-2.333-2.333h1.2V3.147l-6.533.85v8.337a2.333 2.333 0 1 1-2.334-2.333h1.2V2.462c0-.167.125-.309.29-.33l8.134-1.061c.2-.026.376.129.376.33" /></symbol>'};function io(e){const t=(0,n.useContext)(Nt.X);return(0,n.useLayoutEffect)((()=>(t.add(so),()=>{t.remove("music_dark-177d07e7")})),[]),(0,a.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,a.jsx)("use",{xlinkHref:"#music_dark-177d07e7"},void 0)}),void 0)}const no={id:"sav-154c9c02",use:"sav-154c9c02-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="sav-154c9c02"><path fill="#FE2C55" fill-rule="evenodd" d="M8.333.507a.437.437 0 0 0-.666 0L1.105 8.209a.437.437 0 0 0 .333.721h3.529v5.86c0 .24.196.437.437.437H10.6a.437.437 0 0 0 .437-.438V8.93h3.526a.437.437 0 0 0 .333-.72z" clip-rule="evenodd" /></symbol>'};function lo(e){const t=(0,n.useContext)(Nt.X);return(0,n.useLayoutEffect)((()=>(t.add(no),()=>{t.remove("sav-154c9c02")})),[]),(0,a.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,a.jsx)("use",{xlinkHref:"#sav-154c9c02"},void 0)}),void 0)}const co={id:"sav_dark-7a488257",use:"sav_dark-7a488257-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="sav_dark-7a488257"><path fill="#FF3B5C" fill-rule="evenodd" d="M8.333.507a.437.437 0 0 0-.666 0L1.105 8.209a.437.437 0 0 0 .333.721h3.528v5.86c0 .24.196.437.438.437h5.194a.437.437 0 0 0 .438-.438V8.93h3.525a.437.437 0 0 0 .333-.72z" clip-rule="evenodd" /></symbol>'};function uo(e){const t=(0,n.useContext)(Nt.X);return(0,n.useLayoutEffect)((()=>(t.add(co),()=>{t.remove("sav_dark-7a488257")})),[]),(0,a.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,a.jsx)("use",{xlinkHref:"#sav_dark-7a488257"},void 0)}),void 0)}const po={id:"x_mark-ed30da86",use:"x_mark-ed30da86-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="x_mark-ed30da86"><path fill="#161823" fill-opacity=".34" d="M7.057 8 3.431 4.374a.333.333 0 0 1 0-.472l.472-.471c.13-.13.34-.13.47 0L8 7.057l3.626-3.626c.13-.13.342-.13.472 0l.471.471c.13.13.13.342 0 .472L8.943 8l3.626 3.626c.13.13.13.341 0 .472l-.471.471a.333.333 0 0 1-.472 0L8 8.943l-3.626 3.626a.333.333 0 0 1-.471 0l-.472-.471a.333.333 0 0 1 0-.472z" /></symbol>'};function ho(e){const t=(0,n.useContext)(Nt.X);return(0,n.useLayoutEffect)((()=>(t.add(po),()=>{t.remove("x_mark-ed30da86")})),[]),(0,a.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,a.jsx)("use",{xlinkHref:"#x_mark-ed30da86"},void 0)}),void 0)}const go={id:"x_mark_dark-d4e23371",use:"x_mark_dark-d4e23371-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="x_mark_dark-d4e23371"><path fill="white" fill-opacity=".34" d="M7.057 8 3.431 4.374a.333.333 0 0 1 0-.472l.472-.471c.13-.13.34-.13.47 0L8 7.057l3.626-3.626c.13-.13.342-.13.472 0l.471.471c.13.13.13.342 0 .472L8.943 8l3.626 3.626c.13.13.13.341 0 .472l-.471.471a.333.333 0 0 1-.472 0L8 8.943l-3.626 3.626a.333.333 0 0 1-.471 0l-.472-.471a.333.333 0 0 1 0-.472z" /></symbol>'};function mo(e){const t=(0,n.useContext)(Nt.X);return(0,n.useLayoutEffect)((()=>(t.add(go),()=>{t.remove("x_mark_dark-d4e23371")})),[]),(0,a.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,a.jsx)("use",{xlinkHref:"#x_mark_dark-d4e23371"},void 0)}),void 0)}const _o={id:"arrow_broken_line_up-deab4f6d",use:"arrow_broken_line_up-deab4f6d-usage",viewBox:"0 0 16 14",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 14" id="arrow_broken_line_up-deab4f6d"><path fill="#FE2C55" fill-rule="evenodd" d="M5.461 5.026a.83.83 0 0 1 .642.098l3.61 2.221 3.879-6.57 1.148.679a.333.333 0 0 1 .118.456l-4.14 7.014a.833.833 0 0 1-1.155.286L5.961 6.993l-3.906 6.8a.333.333 0 0 1-.455.123l-.867-.498a.333.333 0 0 1-.123-.455l4.334-7.545a.83.83 0 0 1 .517-.392" clip-rule="evenodd" /><path fill="#FE2C55" fill-rule="evenodd" d="m10.585 1.86 3.97-1.77a.358.358 0 0 1 .49.282l.453 4.327a.258.258 0 0 1-.387.25L10.557 2.32a.256.256 0 0 1 .028-.46" clip-rule="evenodd" /></symbol>'};function vo(e){const t=(0,n.useContext)(Nt.X);return(0,n.useLayoutEffect)((()=>(t.add(_o),()=>{t.remove("arrow_broken_line_up-deab4f6d")})),[]),(0,a.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,a.jsx)("use",{xlinkHref:"#arrow_broken_line_up-deab4f6d"},void 0)}),void 0)}const fo=(0,ue.default)("ul",{target:"e1ysk6kp0"})((({theme:{colors:e,isDark:t},isFullSideNav:o})=>[{position:"absolute",width:"100%",boxSizing:"border-box",maxHeight:o?"min(calc(100vh - 150px), 734px)":`min(calc(100vh - 96px - ${he.uF}px), 760px)`,overflowY:"auto",overflowX:"hidden",listStyleType:"none",paddingInlineStart:0},!o&&{paddingTop:"8px",marginTop:"8px",background:e.BGSecondary,boxShadow:t?"":`0 2px 12px ${e.ShadowPrimary}`,borderRadius:"8px"}]),"label:UlContainer;");fo.defaultProps=Object.assign(Object.assign({},fo.defaultProps),{"data-e2e":"transfer-container"});const xo=(0,ue.default)("div",{target:"e1ysk6kp1"})((({theme:e,theme:{colors:t}})=>[(0,he.zy)({theme:e,fontWeight:"semiBold",fontFamily:"TikTokFont"}),{fontSize:"14px",lineHeight:"22px",color:t.TextSecondary,padding:"5px 12px 3px"}]),"label:DivHeader;"),bo=(0,ue.default)("li",{target:"e1ysk6kp2"})((({active:e,theme:{colors:t}})=>({padding:"9px 16px",cursor:"pointer",background:e?t.BGView:void 0,display:"flex",alignItems:"center"})),"label:LiItemContainer;"),yo=(0,ue.default)("h4",{target:"e1ysk6kp3"})((({theme:e,theme:{direction:t}})=>[(0,he.zy)({theme:e,fontWeight:"semiBold",fontFamily:"TikTokFont"}),{fontSize:"16px",lineHeight:"24px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},(0,he.mp)({direction:t,paddingStart:"8px",paddingEnd:"12px"})]),"label:H4ItemText;"),wo=(0,ue.default)("div",{target:"e1ysk6kp4"})((({theme:{direction:e}})=>[(0,he.mp)({direction:e}),{width:"100%",padding:"12px 0px",cursor:"pointer",display:"flex",justifyContent:"center",textAlign:"center",alignItems:"center"}]),"label:DivFooter;"),ko=(0,ue.default)("div",{target:"e1ysk6kp5"})((({theme:e,theme:{direction:t,colors:o}})=>[(0,he.zy)({theme:e,fontWeight:"semiBold",fontFamily:"TikTokFont"}),(0,he.mp)({direction:t,marginStart:"2px"}),{color:o.TextTertiaryAlt,fontSize:"15px",lineHeight:"18px"}]),"label:DivFooterText;"),So=(0,ue.default)("div",{target:"e1ysk6kp6"})((({theme:e,theme:{colors:t}})=>[(0,he.zy)({theme:e,fontWeight:"semiBold",fontFamily:"TikTokFont"}),{fontSize:"15px",lineHeight:"18px",color:t.TextTertiaryAlt}]),"label:DivFeedback;"),jo=(0,ue.default)(qt,{target:"e1ysk6kp7"})((({theme:{direction:e}})=>[(0,he.mp)({direction:e,marginStart:"2px"}),{width:"12px",height:"12px"}]),"label:StyledChevronDown;"),Co=(0,ue.default)(Kt,{target:"e1ysk6kp8"})((({theme:{direction:e}})=>[(0,he.mp)({direction:e,marginStart:"2px"}),{width:"12px",height:"12px"}]),"label:StyledChevronDownDark;"),Io={width:"16px",height:"16px",flexShrink:0},To=(0,ue.default)(Xt,{target:"e1ysk6kp9"})(Io,"label:StyledClockFill;"),Lo=(0,ue.default)(Qt,{target:"e1ysk6kp10"})(Io,"label:StyledClockFillDark;"),Mo=(0,ue.default)(ho,{target:"e1ysk6kp11"})((({theme:{direction:e}})=>[(0,he.mp)({direction:e,marginStart:"auto"}),Io]),"label:StyledXMark;"),Fo=(0,ue.default)(mo,{target:"e1ysk6kp12"})((({theme:{direction:e}})=>[(0,he.mp)({direction:e,marginStart:"auto"}),Io]),"label:StyledXMarkDark;"),Oo=(0,ue.default)("div",{target:"e1ysk6kp13"})({width:"16px",height:"16px",display:"flex",flexShrink:0,justifyContent:"center",alignItems:"center"},"label:DivMark;"),Do=(0,ue.default)("div",{target:"e1ysk6kp14"})((({theme:{colors:e}})=>({width:"6px",height:"6px",borderRadius:"50%",background:e.TextQuaternary})),"label:DivMarkDot;"),Bo={2:(0,ue.default)(eo,{target:"e1ysk6kp16"})(Io),17:(0,ue.default)(lo,{target:"e1ysk6kp17"})(Io),18:(0,ue.default)(ro,{target:"e1ysk6kp18"})(Io)},Po={2:(0,ue.default)(oo,{target:"e1ysk6kp19"})(Io),17:(0,ue.default)(uo,{target:"e1ysk6kp20"})(Io),18:(0,ue.default)(io,{target:"e1ysk6kp21"})(Io)},Eo={2:(0,ue.default)(vo,{target:"e1ysk6kp22"})(Io)},Ro={2:(0,ue.default)(vo,{target:"e1ysk6kp23"})(Io)},Ho=(0,ue.default)("div",{target:"e1ysk6kp24"})({display:"flex",justifyContent:"center",alignItems:"center",height:"18px",marginTop:"11.5px",marginBottom:"20.5px"},"label:DivTransferFooter;"),Ao=(0,ue.default)("div",{target:"e1ysk6kp25"})((({theme:{colors:e}})=>({cursor:"pointer",fontSize:"14px",fontWeight:500,lineHeight:"18px",color:e.TextTertiaryAlt,display:"flex"})),"label:DivFooterButton;"),Go=(0,ue.default)("div",{target:"e1ysk6kp26"})((({theme:{colors:e}})=>({height:"12px",color:e.LineSecondary,margin:"0 16px",display:"flex",alignItems:"center"})),"label:DivFooterSeparator;"),Wo=(0,ue.default)("div",{target:"e1ysk6kp27"})((({theme:{colors:e,direction:t}})=>[{display:"flex",width:"16px",height:"16px",justifyContent:"center",alignItems:"center","*":{fill:e.TextTertiaryAlt}},(0,he.mp)({direction:t,marginEnd:"4px"})]),"label:DivFooterIconWrapper;"),$o=(0,n.memo)((function(e){const{offset:t,index:o,item:s,onSelect:i}=e,{isDark:l}=(0,se.u)(),{active:d,handleMouseEnter:c}=zt(t+o),[{rootEnterFrom:u}]=(0,r.S)(X.tq,{selector:e=>({rootEnterFrom:e.searchGlobalParams.rootEnterFrom}),dependencies:[]}),[{videoPageType:p}]=(0,r.S)(T.C,{selector:e=>({videoPageType:e.videoPageType}),dependencies:[]}),h=(0,le.Ul)(),{shouldRecomReduceIconRisk:_}=(0,ae.a8)(),v=(0,n.useCallback)((e=>{var t,a,r,n,l;e.preventDefault(),(null==s?void 0:s.word)&&(m.$G.handleTrendingWordsClick({enter_from:u,words_source:"recom_search",words_position:o,words_content:null==s?void 0:s.word,search_position:g.f.commonParams.page_name,words_type:null!==(a=$t._[null!==(t=null==s?void 0:s.word_type)&&void 0!==t?t:""])&&void 0!==a?a:"",group_id:null!==(r=null==s?void 0:s.group_id)&&void 0!==r?r:"",impr_id:null!==(n=null==s?void 0:s.impr_id)&&void 0!==n?n:"",enter_group_id:null!==(l=null==h?void 0:h.id)&&void 0!==l?l:"",video_page_type:p}),null==i||i(e,null==s?void 0:s.word,"recom_search",null==s?void 0:s.impr_id,!1))}),[s,o,i,u,h,p]);return(0,a.jsxs)(bo,{"data-e2e":"search-transfer-guess-search-item",id:`transfer-list-item-${o}`,active:d,onMouseMove:c,onMouseDown:v,children:[(()=>{var e,t;if(null==s?void 0:s.word_type){let o=Bo[null==s?void 0:s.word_type],r=Po[null==s?void 0:s.word_type];if(_&&(o=null!==(e=Eo[null==s?void 0:s.word_type])&&void 0!==e?e:o,r=null!==(t=Ro[null==s?void 0:s.word_type])&&void 0!==t?t:r),l&&r)return(0,a.jsx)(r,{});if(o)return(0,a.jsx)(o,{})}return(0,a.jsx)(Oo,{children:(0,a.jsx)(Do,{})})})(),(0,a.jsx)(yo,{children:s.word})]})})),zo=(0,n.memo)((function(e){const{index:t,item:o,onSelect:s,onDeleteHistory:i}=e,{isDark:l}=(0,se.u)(),{active:d,handleMouseEnter:c}=zt(t),[{rootEnterFrom:u}]=(0,r.S)(X.tq,{selector:e=>({rootEnterFrom:e.searchGlobalParams.rootEnterFrom}),dependencies:[]}),p=(0,n.useCallback)((e=>{e.preventDefault(),m.$G.handleSearchHistory({enter_from:u,search_entrance:u,search_position:g.f.commonParams.page_name,search_keyword:o,action_type:"click",order:t}),null==s||s(e,o,"search_history")}),[o,t,s,u]),h=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),null==i||i(o,t)}),[o,t,i]);return(0,a.jsxs)(bo,{"data-e2e":"search-transfer-history-item",id:`transfer-list-item-${t}`,active:d,onMouseMove:c,onMouseDown:p,children:[l?(0,a.jsx)(Lo,{}):(0,a.jsx)(To,{}),(0,a.jsx)(yo,{children:o}),l?(0,a.jsx)(Fo,{onMouseDown:h}):(0,a.jsx)(Mo,{onMouseDown:h})]})})),No=(0,n.memo)((function(e){var t,o;const{hasHistory:i,hasGuessSearch:l,onSelect:d,isFullSideNav:c}=e,u=(0,f.s)(),{isDark:p}=(0,se.u)(),[h,_]=(0,n.useState)(!0),{language:v}=null!==(t=(0,te.W)((()=>["language"]),[]))&&void 0!==t?t:{},[{rootEnterFrom:b,preSearchId:j}]=(0,r.S)(X.tq,{selector:e=>({rootEnterFrom:e.searchGlobalParams.rootEnterFrom,preSearchId:e.searchGlobalParams.preSearchId}),dependencies:[]}),[{historyList:C,guessSearchList:I},L]=(0,r.S)(ee._,{dependencies:[],selector:e=>({historyList:e.historyList,guessSearchList:e.guessSearchList})}),M=(0,r.w)(J),F=(0,r.w)(T.C),{user:O}=(0,s.P)(Q.L,{selector:e=>{var t;return{user:null===(t=e.appContext)||void 0===t?void 0:t.user}},dependencies:[]}),D=null==O?void 0:O.uid,B=Boolean(O),{abTestVersion:P}=(0,y.L$)((0,te.W)((()=>["abTestVersion"]),[])),E="v2"===(null!==(o=(0,w.qt)(P,"search_report"))&&void 0!==o?o:"v1")&&B,{hasPersonalizedSwitch:R}=(0,ae.uJ)(),H=(0,n.useCallback)((()=>{L.setShouldRemainOpen(!1),F.handleInputFocusChange(!0)}),[L,F]),A=(0,ce.$)(),G=(0,ce.L)(),{PersonalizedModal:W,handleOpenModal:$}=(0,Wt.D0)({beforeModalCloseCallback:H,afterStatusChangeCallback:()=>{A(),G()},preSearchId:j,showToastRightAfterChange:!0});(0,n.useEffect)((()=>{var e;if(D){const t=(0,x._S)(k.Z3);let o=[];o=null!==(e=S.LU.getItem(D))&&void 0!==e?e:[],0===o.length&&t&&(o=JSON.parse(t)),L.setHistoryList(null!=o?o:[])}}),[L,D]);const z=(0,n.useCallback)((()=>{L.setActiveIndex(-1)}),[L]),N=(0,n.useCallback)((e=>{e.preventDefault(),m.$G.handleSearchHistory({enter_from:b,search_entrance:b,search_position:g.f.commonParams.page_name,search_keyword:"",action_type:"show_all",order:-1}),_(!1)}),[_,b]),V=(0,n.useCallback)((e=>{e.preventDefault(),m.$G.handleSearchHistory({enter_from:b,search_entrance:b,search_position:g.f.commonParams.page_name,search_keyword:"",action_type:"clear_all",order:-1}),L.setHistoryList([]),S.LU.removeAll()}),[L,b]),q=(0,n.useCallback)((()=>{M.getReport({aid:Le.TIKTOK_SEARCH_PC,app_name:"pc_tt_search_feedback",lang:Oe(null!=v?v:"en"),entrance:"transfer_page",faq_type:"",appkey:"pc_tt_search_feedback-web"}),M.setIsOpenReport(!0),L.setShouldUpdateData(!1),L.setShouldRemainOpen(!0),m.$G.handleClickSearchFeedback({enter_from:b,search_position:g.f.commonParams.page_name,button_type:"open",text_type:"recom_search_feedback"})}),[M,L,v,b]),U=()=>{if(h&&!(C.length<=5))return(0,a.jsxs)(wo,{"data-e2e":"search-transfer-history-see-more",onMouseDown:N,children:[(0,a.jsx)(ko,{children:u("embed_music_card_see_more")}),p?(0,a.jsx)(Co,{}):(0,a.jsx)(jo,{})]})},K=()=>{if(!(h||C.length<=5))return(0,a.jsx)(wo,{"data-e2e":"search-transfer-history-clear-all",onMouseDown:V,children:(0,a.jsx)(ko,{children:u("web_search_clear_btn")})})},Z=(0,n.useCallback)(((e,t)=>{if(D){m.$G.handleSearchHistory({enter_from:b,search_entrance:b,search_position:g.f.commonParams.page_name,search_keyword:"",action_type:"clear",order:t});const o=C.filter((t=>t!==e));L.setHistoryList(o),S.LU.setItem(D,o)}}),[C,L,b,D]),Y=()=>{if(E&&!R)return(0,a.jsx)(wo,{"data-e2e":"search-transfer-feedback",onMouseDown:q,children:(0,a.jsx)(So,{children:u("suggested_search_feedback9")})})},oe=(0,n.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),L.setShouldRemainOpen(!0),L.setShouldUpdateData(!1),$()}),[$,L]),re=()=>{if(!R)return;let e=[{name:u("searchquerycomment_feedbackpanel_header"),event:q,icon:(0,a.jsx)(Wo,{children:(0,a.jsx)(At.O,{size:13})})},{name:u("personalisedSearch_searchResults_searchBlankPage_manageSearchLabel"),event:oe,icon:(0,a.jsx)(Wo,{children:(0,a.jsx)(Gt.K,{size:13})})}];return E||(e=e.slice(1)),(0,a.jsx)(Ho,{children:e.map(((t,o)=>(0,a.jsxs)(n.Fragment,{children:[(0,a.jsxs)(Ao,{onMouseDown:t.event,children:[t.icon,t.name]}),o<e.length-1&&(0,a.jsx)(Go,{children:"|"})]},o)))})};return(0,a.jsxs)(fo,{"data-e2e":"search-transfer",id:"header-transfer",onMouseLeave:z,isFullSideNav:c,children:[(()=>{if(!C.length||!i)return;let e=C;return C.length>5&&h&&(e=C.slice(0,5)),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(xo,{"data-e2e":"search-transfer-history-title",children:u("web_search_recent_header")}),e.map(((e,t)=>(0,a.jsx)(zo,{item:e,index:t,onDeleteHistory:Z,onSelect:d},e))),U(),K()]})})(),(()=>{var e;if(!l||!I.length)return;let t=null!==(e=Number(C.length))&&void 0!==e?e:0;return C.length>5&&h&&(t=5),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(xo,{"data-e2e":"search-transfer-guess-search-title",children:u("pc_web_you_may_like")}),I.map(((e,o)=>(0,a.jsx)($o,{item:e,offset:t,index:o,onSelect:d},e.word))),Y(),re()]})})(),R?W:null]})})),{getPureUserPath:Vo}=u.h,qo=h.OZ.searchReminder,Uo=(0,n.memo)((function({onBrowserModeClose:e,isBrowserMode:t=!1,isFullSideNav:o=!1,onSubmitSuccess:u}){var L,M,F;const{search:O,pathname:D}=(0,l.useLocation)(),B=(0,c.eb)(),{q:P}=(0,i.parse)(O),{withNewStyle:E}=(0,ae.hA)(),R=(0,j.JD)((e=>e.showingBrowserMode)),[H,A]=(0,n.useState)(""),G=(0,n.useMemo)((()=>R?"browser_mode":"video"===(0,v.sn)(D)?"video_detail":""),[D,R]),W=(0,C.gc)(re.n[D]),$=(0,n.useRef)(null),{placeholder:z,hasVideoSugWord:N,word_id:V,logId:q,videoId:U}=(0,I.H1)(R),[{searchValue:K,loading:Z,sugList:se,inputFocus:ie,activeIndex:ne},le]=(0,r.S)(T.C,{dependencies:[],selector:e=>({searchValue:e.searchValue,loading:e.loading,sugList:e.sugList,inputFocus:e.inputFocus,activeIndex:e.activeIndex})}),[{isOpenReport:de,isOpenSuccessModal:ce},ue]=(0,r.S)(J,{dependencies:[],selector:e=>({isOpenReport:e.isOpenReport,isOpenSuccessModal:e.isOpenSuccessModal})}),{lang:pe,user:he}=(0,s.P)(Q.L,{selector:e=>{var t;return{lang:e.lang,user:null===(t=e.appContext)||void 0===t?void 0:t.user}},dependencies:[]}),ge=null==he?void 0:he.uid,{searchVideoForLoggedin:me}=(0,s.P)(Y.$,{selector:e=>{var t,o;return{searchVideoForLoggedin:null!==(o=null===(t=e.bizContext)||void 0===t?void 0:t.searchVideoForLoggedin)&&void 0!==o?o:[]}},dependencies:[]}),{isOpenNewTab:_e}=(0,b.M4)(),[{currentKeyword:ve,rootEnterFrom:fe},xe]=(0,r.S)(X.tq,{selector:e=>{var t,o;return{currentKeyword:null!==(o=null===(t=e[re.n[D]])||void 0===t?void 0:t.keyword)&&void 0!==o?o:"",rootEnterFrom:e.searchGlobalParams.rootEnterFrom}},dependencies:[D]}),[{transferHistoryList:be,guessSearchList:ye,blankpageEnterMethod:we,shouldRemainOpen:ke},Se]=(0,r.S)(ee._,{dependencies:[],selector:e=>({transferHistoryList:e.historyList,guessSearchList:e.guessSearchList,blankpageEnterMethod:e.blankpageEnterMethod,shouldRemainOpen:e.shouldRemainOpen})}),Ce=Boolean(he),Ie=null===(L=null==he?void 0:he.hasSearchPermission)||void 0===L||L,Te=(0,n.useRef)([]),{abTestVersion:Le}=(0,y.L$)((0,te.W)((()=>["abTestVersion"]),[])),Me=null!==(M=(0,w.qt)(Le,"search_transfer_history"))&&void 0!==M?M:"v1",Fe=null!==(F=(0,w.qt)(Le,"search_transfer_guesssearch"))&&void 0!==F?F:"v1",Oe="v2"===Me&&Ce,De="v2"===Fe,Be=(0,n.useMemo)((()=>Oe&&be.length||De&&ye.length),[Oe,be,De,ye]),Pe=(0,l.useHistory)(),Ee=(0,l.useLocation)(),Re=(0,n.useCallback)((()=>{le.getSugList({app_language:(0,p.uk)(pe),history_list:encodeURIComponent(JSON.stringify(Te.current)),keyword:K,abTestVersion:Le})}),[le,pe,K]),He=(0,n.useMemo)((()=>{var e;if(ge){let t=[];const o=(0,x._S)(k.Z3),a=S.LU.getItem(ge);return a?(t=null!=a?a:[],t):(0===t.length&&o&&(t=null!==(e=JSON.parse(o))&&void 0!==e?e:[],S.LU.setItem(ge,t),(0,x.sc)(k.Z3)),t)}}),[ge]),Ae=(0,n.useCallback)((()=>{Se.setHistoryList(null!=He?He:[])}),[Se,He]),Ge=!Boolean((0,l.matchPath)(D,{path:qo}))&&Boolean((0,l.matchPath)(D,{path:h.OZ.searchHome})),We=(0,n.useCallback)((e=>{if(ge){let t=[];const o=S.LU.getItem(ge);o&&(t=o.filter((t=>t!==e))),t.unshift(e),t.length>10&&(t=t.slice(0,10)),Se.setHistoryList(t),S.LU.setItem(ge,t)}}),[Se,ge]);(0,n.useEffect)((()=>{le.setVideoPageType(G)}),[le,G]),(0,n.useEffect)((()=>{Ge&&P&&le.setSearchValue(String(P))}),[P,Ge]),(0,n.useEffect)((()=>{Oe&&P&&We(String(P))}),[P,Oe]),(0,n.useEffect)((()=>{Re()}),[Re]),(0,n.useEffect)((()=>{R||Ae()}),[Ae,R]),(0,n.useEffect)((()=>{fe||xe.setSearchGlobalParams({rootEnterFrom:Ge?"search_outer":g.f.commonParams.page_name})}),[fe,Ge,xe]),(0,n.useEffect)((()=>{var e,t,o,a;if(R){const r=20,s=84,i=16,n=null!==(t=null===(e=document.getElementById("browser-mode-logo-icon"))||void 0===e?void 0:e.clientWidth)&&void 0!==t?t:0,l=null!==(a=null===(o=document.getElementById("browser-mode-report-btn"))||void 0===o?void 0:o.clientWidth)&&void 0!==a?a:0,d=2*Math.max(r+l,s+n);A(`calc(100% - ${i+d}px)`)}}),[R]),(0,n.useEffect)((()=>{ie||ke||Se.setNewGuessSearchWord(void 0)}),[ie,ke,Se]),(0,n.useEffect)((()=>{t&&R||!N||R&&!E||m.$G.handleTrendingWordsShow({enter_from:fe,search_position:R?"video_detail":g.f.commonParams.page_name,words_source:"related_search_anchor_v2",words_position:0,words_content:z,words_type:"search_bar_outer",group_id:null!=V?V:"",impr_id:null!=q?q:"",previous_page:g.f.commonParams.previous_page,video_page_type:G,enter_group_id:U})}),[U,N,R,q,z,fe,V,E,G,t]);const $e=(0,n.useCallback)(((t,o,a,r)=>{var s;le.setInputFocus(!1);const n=Date.now();let l=Ge?Ee.pathname:h.$T.searchHome();if(null===(s=null==$?void 0:$.current)||void 0===s||s.onEnterInputBlur(),Ge&&o===ve)return void W(!0,!0);!Ce&&me&&void 0===r&&(l=h.$T.searchUser());let d=(0,v.p5)(Ee.pathname);const c=(0,v.sM)(Ee.pathname);d&&(l=h.$T.searchLive());const u=(0,oe.FR)({location:Ee,to:{pathname:l,search:{q:o,t:n}}});R&&_e?window.open((0,i.stringifyUrl)({url:u,query:Object.assign({searchSource:"normal_search",videoPageType:G},a)})):d||c?window.location.href=(0,i.stringifyUrl)({url:u,query:Object.assign({searchSource:"normal_search",videoPageType:G},a)}):(null==e||e(t,!0),Pe.push(u,Object.assign({searchSource:"normal_search",videoPageType:G},a)))}),[Ge,Ee,Ce,W,Pe,le,me,ve,e,R,_e,G]),ze=(0,n.useCallback)(((e,t,o)=>{const{extra_info:{unique_id:a,sug_user_id:r},word_record:{words_content:s,group_id:n},content:l,impr_id:d}=t;Te.current.push(l);const c=Boolean(r);m.$G.handleSugClick({impr_id:d,words_source:"sug",words_position:o,words_content:s,raw_query:K,sug_type:c?"enrich_sug":"normal_sug",query_id:"",group_id:n,video_page_type:G,search_position:R?"video_detail":g.f.commonParams.page_name,enter_group_id:U}),c?(_.q.handleEnterUser({enter_from:"search_sug",search_keyword:K,to_user_id:r,search_id:d,impr_id:d,rank:o,search_type:re.n[D]}),window.location.href=(0,i.stringifyUrl)({url:Vo({uniqueId:a}),query:{lang:pe}})):(xe.resetSearchResult(),$e(e,l,{enterMethod:"click_icon",searchSource:"search_sug",imprId:d,blankpageEnterFrom:g.f.commonParams.page_name,blankpageEnterMethod:we}))}),[K,G,R,D,pe,xe,$e,we,U]),Ne=(0,n.useCallback)(((e,t,o,a,r)=>{Te.current.push(t),le.setSearchValue(t),$e(e,t,{enterMethod:"click_icon",searchSource:o,imprId:a,blankpageEnterFrom:g.f.commonParams.page_name,blankpageEnterMethod:we},r)}),[$e,le,we]),Ve=(0,n.useCallback)(((e,t)=>{xe.resetSearchResult(),$e(e,K,{enterMethod:t})}),[$e,xe,K]),qe=(0,n.useCallback)(((e,t)=>{le.setSearchValue(z),xe.resetSearchResult(),m.$G.handleTrendingWordsClick({enter_from:fe,search_position:R?"video_detail":g.f.commonParams.page_name,words_source:"related_search_anchor_v2",words_position:0,words_content:z,words_type:"search_bar_outer",group_id:null!=V?V:"",impr_id:null!=q?q:"",previous_page:g.f.commonParams.previous_page,video_page_type:G,enter_group_id:U}),$e(e,z,{enterMethod:t,searchSource:"default_search_keyword",preClickId:q})}),[le,z,xe,fe,R,V,q,G,U,$e]),Ue=(0,n.useCallback)((()=>{le.setInputFocus(!0),ue.setIsOpenReport(!1),Se.setShouldRemainOpen(!1),m.$G.handleClickSearchFeedback({enter_from:fe,search_position:g.f.commonParams.page_name,button_type:"close",text_type:"recom_search_feedback"}),ue.resetData()}),[ue,le]),Ke=(0,n.useCallback)((()=>{ue.setIsOpenReport(!1),B.open(),ue.setIsOpenSuccessModal(!0),ue.resetData()}),[ue,le]),Ze=(0,n.useCallback)((()=>{ue.setIsOpenSuccessModal(!1),Se.setShouldUpdateData(!1),setTimeout((()=>{var e;null===(e=null==$?void 0:$.current)||void 0===e||e.onEnterInputFocus(),Se.setShouldRemainOpen(!1)}),0)}),[ue,le,fe]),Xe=(0,n.useCallback)(((e,t)=>{if(K){if(t&&se[ne])return ze(e,se[ne],ne),void(null==u||u());Ve(e,t?"click_enter":"click_icon"),null==u||u()}else N&&qe(e,t?"click_enter":"click_icon")}),[K,se,ne,Ve,N,qe,ze]),Je=(0,ae.AF)(),st=(0,n.useMemo)((()=>(Je||!Z)&&Boolean(K)&&se.length>0&&(ie||o)),[Je,Z,K,se.length,ie,o]),it=(0,n.useMemo)((()=>!R&&!K.length&&(ie||o)&&Be||ke),[R,K,ie,Be,ke,o]),[nt,lt]=(0,n.useState)("");(0,n.useEffect)((()=>{var e;o&&(null===(e=null==$?void 0:$.current)||void 0===e||e.onEnterInputFocus(),K&&lt(K))}),[o]);const dt=(0,f.s)();return Ie?(0,a.jsxs)(Ye,{showingBrowserMode:R,onClick:x.dG,searchBarWidth:H,children:[(0,a.jsx)(je,{initialValue:nt,onSubmit:Xe,ref:$,isBrowserMode:t,isFullSideNav:o}),st&&(0,a.jsx)(Ht,{onSelect:ze,onSelectMore:Ve,isFullSideNav:o}),it&&(0,a.jsx)(No,{onSelect:Ne,hasHistory:Oe,hasGuessSearch:De,isFullSideNav:o}),de&&(0,a.jsx)(Qe,{onClose:Ue,onSubmitSuccess:Ke}),(()=>{if(ce)return(0,a.jsxs)(c.nO,Object.assign({},B,{width:"Small",height:"Compact",children:[(0,a.jsx)(c.ND,{children:(0,a.jsx)(c.Ft,{icon:d.A,size:72})}),(0,a.jsxs)(tt,{children:[(0,a.jsx)(ot,{children:dt("search_feedback_success_tips1")}),(0,a.jsx)(at,{children:dt("suggested_search_feedback13")})]}),(0,a.jsx)(rt,{children:(0,a.jsx)(et,{onClick:Ze,children:dt("OK")})})]}))})()]}):null}))},24728:(e,t,o)=>{o.d(t,{Fc:()=>v,H1:()=>m,iA:()=>f});var a=o(41271),r=o(40099),s=o(47172),i=o(25616),n=o(95868),l=o(93341),d=o(71281),c=o(49057),u=o(89107),p=o(87654),h=o(52333),g=o(82512);function m(e){var t;const o=(0,i.s)(),h=(0,r.useMemo)((()=>o(e?"search_videosearchbar_recommended_generic_1":"please_input_search_keyword")),[o,e]),g=(0,l.Ul)(),{id:m}=null!=g?g:{},{abTestVersion:_}=null!==(t=(0,c.W)((()=>["abTestVersion"]),[]))&&void 0!==t?t:{},v="v2"===(0,d.qt)(_,"search_entry_search_bar"),{wordList:x,logId:b}=f(null!=m?m:"","feed_bar"),{newGuessSearchWord:y}=(0,a.P)(p._),{inputFocus:w}=(0,a.P)(u.C),{shouldRemainOpen:k}=(0,a.P)(p._),{pathname:S}=(0,s.useLocation)();return(0,r.useMemo)((()=>{var t;const{word:o,word_id:a}=null!==(t=x[0])&&void 0!==t?t:{},{word:r="",group_id:s=""}=null!=y?y:{},i={placeholder:h,hasVideoSugWord:!1},l=(0,n.sn)(S);return v?o&&(e||["fyp","following","video"].includes(l))?{placeholder:o,word_id:a,hasVideoSugWord:!0,logId:b,videoId:m}:(w||k)&&r&&!e?{placeholder:r,word_id:s,hasVideoSugWord:!0,logId:b,videoId:m}:i:i}),[x,y,h,S,v,e,w,k,b,m])}const _=(e,t)=>t&&0!==t.length?e.filter((({word_id:e})=>!t.includes(e))):e,v=(e,t)=>{var o;return null!==(o=null==t?void 0:t.includes(e))&&void 0!==o&&o};function f(e,t){var o;const{user:s}=null!==(o=(0,c.W)((()=>["user"]),[]))&&void 0!==o?o:{},{wordIdList:i,videoIdList:n}=(0,a.P)(g.Zr,{selector:e=>{var t,o;return null!==(o=e.blockListMap[null!==(t=null==s?void 0:s.uid)&&void 0!==t?t:g.yJ])&&void 0!==o?o:{}},dependencies:[s]}),l=(0,a.P)(h.k,{selector:t=>t[null!=e?e:""],dependencies:[e]});return(0,r.useMemo)((()=>{var e,o,a,r;if(!l||s&&!s.hasSearchPermission||v(null==l?void 0:l.id,n))return{wordList:[],hintText:""};const d=(null!==(o=null===(e=l.videoSuggestWordsList)||void 0===e?void 0:e.video_suggest_words_struct)&&void 0!==o?o:[]).find((e=>e.scene===t)),c=null!==(a=null==d?void 0:d.words)&&void 0!==a?a:[];return{wordList:_(c,i),hintText:null!==(r=null==d?void 0:d.hint_text)&&void 0!==r?r:"",logId:l.logId}}),[n,i,t,s,l])}},68880:(e,t,o)=>{o.d(t,{_:()=>a});const a={2:"hot",17:"top",18:"music"}},87654:(e,t,o)=>{o.d(t,{_:()=>S});var a=o(58632),r=o(64162),s=o(4126),i=o(93995),n=o(8536),l=o(23999),d=o(26324),c=o(24451),u=o(62564),p=o(72916),h=o(95719),g=o(74690),m=o(93608),_=o(65365),v=o(43271),f=o(89107),x=o(45489),b=o(68880),y=o(7672),w=o(55099);let k=class{constructor(e){this.fetch=e}getTransferList(e){return this.fetch.get("/api/search/suggest/guide/",{query:e,baseUrlType:2})}};k=(0,a.__decorate)([(0,y._)(),(0,a.__metadata)("design:paramtypes",[w.p])],k);let S=class extends r.E{constructor(e,t,o,a){super(),this.service=e,this.search=t,this.sug=o,this.personalization=a,this.defaultState={historyList:[],guessSearchList:[],mobileGuessSearchList:[],activeIndex:-1,blankpageEnterMethod:void 0,preRecomShowId:"",videoSuggestWord:void 0,newGuessSearchWord:void 0,logId:void 0,mobileLogId:void 0,shouldRemainOpen:!1,shouldUpdateData:!0}}setData(e,t){e.guessSearchList=t}setMobileData(e,t){e.mobileGuessSearchList=t}setLogId(e,t){e.logId=t}setMobileLogId(e,t){e.mobileLogId=t}setActiveIndex(e,t){e.activeIndex=t}setEnterMethod(e,t){e.blankpageEnterMethod=t}setHistoryList(e,t){e.historyList=t}setVideoSuggestWord(e,t){e.videoSuggestWord=t}setNewGuessSearchWord(e,t){e.newGuessSearchWord=t}setShouldRemainOpen(e,t){e.shouldRemainOpen=t}setShouldUpdateData(e,t){e.shouldUpdateData=t}getTransferList(e){return e.pipe((0,c.E)(this.search.state$,this.sug.state$,this.state$,this.personalization.state$),(0,u.T)((([e,{searchGlobalParams:t},{videoPageType:o},{videoSuggestWord:a},{isSearchPersonalized:r}])=>({payload:e,rootEnterFrom:null==t?void 0:t.rootEnterFrom,videoSuggestWord:a,videoPageType:o,nonPersonalized:r?void 0:1}))),(0,p.n)((({payload:e,rootEnterFrom:t,videoSuggestWord:o,videoPageType:a,nonPersonalized:r})=>{var s;return this.service.getTransferList(Object.assign(Object.assign({},e),{is_non_personalized_search:r,current_placeholder:null!==(s=null==o?void 0:o.word)&&void 0!==s?s:""})).pipe((0,u.T)((e=>{const{status_code:t,data:o=[],log_id:a}=e;let r=[];return 0===t&&o.length&&(r=o.map((e=>Object.assign(Object.assign({},e),{impr_id:a})))),Object.assign(Object.assign({},e),{data:r})})),(0,h.M)((({data:o,log_id:r})=>{const s={enter_from:t,words_source:"recom_search",search_position:m.f.commonParams.page_name,enter_group_id:e.from_group_id,impr_id:null!=r?r:"",raw_query:"",video_page_type:a};_.$G.handleTrendingShow(Object.assign({words_num:o.length},s)),o.forEach(((e,t)=>{var o,a,r,i;return _.$G.handleTrendingWordsShow(Object.assign({words_position:t,words_content:null!==(o=null==e?void 0:e.word)&&void 0!==o?o:"",words_type:null!==(r=b._[null!==(a=null==e?void 0:e.word_type)&&void 0!==a?a:""])&&void 0!==r?r:"",group_id:null!==(i=null==e?void 0:e.group_id)&&void 0!==i?i:""},s))}))})),(0,n.Z)((e=>{var t;return(0,l.of)(this.getActions().setData(null==e?void 0:e.data),this.getActions().setLogId(null==e?void 0:e.log_id),this.getActions().setNewGuessSearchWord(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t[0]))})),(0,g.Z)(this.getActions().setActiveIndex(-1)))})))}getMobileTransferList(e){return e.pipe((0,c.E)(this.search.state$,this.sug.state$,this.state$,this.personalization.state$),(0,u.T)((([e,{searchGlobalParams:t},{videoPageType:o},{videoSuggestWord:a},{isSearchPersonalized:r}])=>({payload:e,rootEnterFrom:null==t?void 0:t.rootEnterFrom,videoSuggestWord:a,videoPageType:o,nonPersonalized:r?void 0:1}))),(0,p.n)((({payload:e,videoSuggestWord:t,nonPersonalized:o})=>{var a;return this.service.getTransferList(Object.assign(Object.assign({},e),{is_non_personalized_search:o,current_placeholder:null!==(a=null==t?void 0:t.word)&&void 0!==a?a:""})).pipe((0,u.T)((e=>{const{status_code:t,data:o=[],log_id:a}=e;let r=[];return 0===t&&o.length&&(r=o.map((e=>Object.assign(Object.assign({},e),{impr_id:a})))),Object.assign(Object.assign({},e),{data:r})})),(0,h.M)((({data:e,log_id:t})=>{const o={words_source:"recom_search",search_position:"search_blankpage_web",impr_id:null!=t?t:""};e.forEach(((e,t)=>{var a,r,s,i;_.$G.handleTrendingWordsShow(Object.assign({words_position:t,words_content:null!==(a=null==e?void 0:e.word)&&void 0!==a?a:"",words_type:null!==(s=b._[null!==(r=null==e?void 0:e.word_type)&&void 0!==r?r:""])&&void 0!==s?s:"",group_id:null!==(i=null==e?void 0:e.group_id)&&void 0!==i?i:""},o))}))})),(0,n.Z)((e=>(0,l.of)(this.getActions().setMobileData(null==e?void 0:e.data),this.getActions().setMobileLogId(null==e?void 0:e.log_id)))))})))}};(0,a.__decorate)([(0,s.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Array]),(0,a.__metadata)("design:returntype",void 0)],S.prototype,"setData",null),(0,a.__decorate)([(0,s.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Array]),(0,a.__metadata)("design:returntype",void 0)],S.prototype,"setMobileData",null),(0,a.__decorate)([(0,s.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,String]),(0,a.__metadata)("design:returntype",void 0)],S.prototype,"setLogId",null),(0,a.__decorate)([(0,s.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,String]),(0,a.__metadata)("design:returntype",void 0)],S.prototype,"setMobileLogId",null),(0,a.__decorate)([(0,s.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Number]),(0,a.__metadata)("design:returntype",void 0)],S.prototype,"setActiveIndex",null),(0,a.__decorate)([(0,s.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],S.prototype,"setEnterMethod",null),(0,a.__decorate)([(0,s.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Array]),(0,a.__metadata)("design:returntype",void 0)],S.prototype,"setHistoryList",null),(0,a.__decorate)([(0,s.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],S.prototype,"setVideoSuggestWord",null),(0,a.__decorate)([(0,s.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Object]),(0,a.__metadata)("design:returntype",void 0)],S.prototype,"setNewGuessSearchWord",null),(0,a.__decorate)([(0,s.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],S.prototype,"setShouldRemainOpen",null),(0,a.__decorate)([(0,s.h5)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object,Boolean]),(0,a.__metadata)("design:returntype",void 0)],S.prototype,"setShouldUpdateData",null),(0,a.__decorate)([(0,s.Mj)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[d.c]),(0,a.__metadata)("design:returntype",void 0)],S.prototype,"getTransferList",null),(0,a.__decorate)([(0,s.Mj)(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[d.c]),(0,a.__metadata)("design:returntype",void 0)],S.prototype,"getMobileTransferList",null),S=(0,a.__decorate)([(0,i.n)("Transfer"),(0,a.__metadata)("design:paramtypes",[k,v.tq,f.C,x.fu])],S)}}]);