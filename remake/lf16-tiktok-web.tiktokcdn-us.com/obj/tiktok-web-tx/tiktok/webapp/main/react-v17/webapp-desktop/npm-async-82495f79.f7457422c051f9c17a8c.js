"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2924],{55924:(e,o,t)=>{t.d(o,{A:()=>X});var n=t(33221),i=t(34430),r=t(22523),s=t(2303),u=t(76439),a=t(28803),l=t(39075),c=t(7569),p=t(40099),d=t(18499),f=t(88090),h=t(27483),m=t(857),v=t(91524),A=t(64615),g=t(17569),C=t(61978),M=t.n(C);function T(e,o,t){return t?e[0]===o[0]:e[0]===o[0]&&e[1]===o[1]}var y=t(52765),k=t(26739),D=t(7197),w=t(86675);function P(e){var o=e.prefixCls,t=e.motion,n=e.animation,i=e.transitionName;return t||(n?{motionName:"".concat(o,"-").concat(n)}:i?{motionName:i}:null)}function x(e){var o=e.prefixCls,t=e.visible,r=e.zIndex,s=e.mask,u=e.maskMotion,a=e.maskAnimation,l=e.maskTransitionName;if(!s)return null;var c={};return(u||l||a)&&(c=(0,n.A)({motionAppear:!0},P({motion:u,prefixCls:o,transitionName:l,animation:a}))),p.createElement(w.Ay,(0,i.A)({},c,{visible:t,removeOnLeave:!0}),(function(e){var t=e.className;return p.createElement("div",{style:{zIndex:r},className:M()("".concat(o,"-mask"),t)})}))}var b=t(14301),E=t(83960),O=t(51821),N=t(59593),H=t(44246),S=["measure","alignPre","align",null,"motion"],V=p.forwardRef((function(e,o){var t=e.visible,r=e.prefixCls,s=e.className,u=e.style,a=e.children,l=e.zIndex,c=e.stretch,d=e.destroyPopupOnHide,h=e.forceRender,m=e.align,v=e.point,A=e.getRootDomNode,g=e.getClassNameFromAlign,C=e.onAlign,T=e.onMouseEnter,k=e.onMouseLeave,D=e.onMouseDown,x=e.onTouchStart,V=e.onClick,R=(0,p.useRef)(),L=(0,p.useRef)(),F=(0,p.useState)(),I=(0,y.A)(F,2),B=I[0],_=I[1],z=function(e){var o=p.useState({width:0,height:0}),t=(0,y.A)(o,2),n=t[0],i=t[1];return[p.useMemo((function(){var o={};if(e){var t=n.width,i=n.height;-1!==e.indexOf("height")&&i?o.height=i:-1!==e.indexOf("minHeight")&&i&&(o.minHeight=i),-1!==e.indexOf("width")&&t?o.width=t:-1!==e.indexOf("minWidth")&&t&&(o.minWidth=t)}return o}),[e,n]),function(e){var o=e.offsetWidth,t=e.offsetHeight,n=e.getBoundingClientRect(),r=n.width,s=n.height;Math.abs(o-r)<1&&Math.abs(t-s)<1&&(o=r,t=s),i({width:o,height:t})}]}(c),U=(0,y.A)(z,2),W=U[0],X=U[1],Y=function(e){var o=(0,H.A)(null),t=(0,y.A)(o,2),n=t[0],i=t[1],r=(0,p.useRef)();function s(e){i(e,!0)}function u(){f.A.cancel(r.current)}return(0,p.useEffect)((function(){s("measure")}),[e]),(0,p.useEffect)((function(){"measure"===n&&(c&&X(A())),n&&(r.current=(0,f.A)((0,N.A)((0,O.A)().mark((function e(){var o,t;return(0,O.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=S.indexOf(n),(t=S[o+1])&&-1!==o&&s(t);case 3:case"end":return e.stop()}}),e)})))))}),[n]),(0,p.useEffect)((function(){return function(){u()}}),[]),[n,function(e){u(),r.current=(0,f.A)((function(){s((function(e){switch(n){case"align":return"motion";case"motion":return"stable"}return e})),null==e||e()}))}]}(t),K=(0,y.A)(Y,2),j=K[0],q=K[1],G=(0,p.useState)(0),J=(0,y.A)(G,2),Q=J[0],Z=J[1],$=(0,p.useRef)();function ee(){var e;null===(e=R.current)||void 0===e||e.forceAlign()}function oe(e,o){var t=g(o);B!==t&&_(t),Z((function(e){return e+1})),"align"===j&&(null==C||C(e,o))}(0,E.A)((function(){"alignPre"===j&&Z(0)}),[j]),(0,E.A)((function(){"align"===j&&(Q<3?ee():q((function(){var e;null===(e=$.current)||void 0===e||e.call($)})))}),[Q]);var te=(0,n.A)({},P(e));function ne(){return new Promise((function(e){$.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var o=te[e];te[e]=function(e,t){return q(),null==o?void 0:o(e,t)}})),p.useEffect((function(){te.motionName||"motion"!==j||q()}),[te.motionName,j]),p.useImperativeHandle(o,(function(){return{forceAlign:ee,getElement:function(){return L.current}}}));var ie=(0,n.A)((0,n.A)({},W),{},{zIndex:l,opacity:"motion"!==j&&"stable"!==j&&t?0:void 0,pointerEvents:t||"stable"===j?void 0:"none"},u),re=!0;null==m||!m.points||"align"!==j&&"stable"!==j||(re=!1);var se=a;return p.Children.count(a)>1&&(se=p.createElement("div",{className:"".concat(r,"-content")},a)),p.createElement(w.Ay,(0,i.A)({visible:t,ref:L,leavedClassName:"".concat(r,"-hidden")},te,{onAppearPrepare:ne,onEnterPrepare:ne,removeOnLeave:d,forceRender:h}),(function(e,o){var t=e.className,i=e.style,u=M()(r,s,B,t);return p.createElement(b.A,{target:v||A,key:"popup",ref:R,monitorWindowResize:!0,disabled:re,align:m,onAlign:oe},p.createElement("div",{ref:o,className:u,onMouseEnter:T,onMouseLeave:k,onMouseDownCapture:D,onTouchStartCapture:x,onClick:V,style:(0,n.A)((0,n.A)({},i),ie)},se))}))}));V.displayName="PopupInner";const R=V;var L=p.forwardRef((function(e,o){var t=e.prefixCls,r=e.visible,s=e.zIndex,u=e.children,a=e.mobile,l=(a=void 0===a?{}:a).popupClassName,c=a.popupStyle,d=a.popupMotion,f=void 0===d?{}:d,h=a.popupRender,m=e.onClick,v=p.useRef();p.useImperativeHandle(o,(function(){return{forceAlign:function(){},getElement:function(){return v.current}}}));var A=(0,n.A)({zIndex:s},c),g=u;return p.Children.count(u)>1&&(g=p.createElement("div",{className:"".concat(t,"-content")},u)),h&&(g=h(g)),p.createElement(w.Ay,(0,i.A)({visible:r,ref:v,removeOnLeave:!0},f),(function(e,o){var i=e.className,r=e.style,s=M()(t,l,i);return p.createElement("div",{ref:o,className:s,onClick:m,style:(0,n.A)((0,n.A)({},r),A)},g)}))}));L.displayName="MobilePopupInner";const F=L;var I=["visible","mobile"],B=p.forwardRef((function(e,o){var t=e.visible,r=e.mobile,s=(0,k.A)(e,I),u=(0,p.useState)(t),a=(0,y.A)(u,2),l=a[0],c=a[1],d=(0,p.useState)(!1),f=(0,y.A)(d,2),h=f[0],m=f[1],v=(0,n.A)((0,n.A)({},s),{},{visible:l});(0,p.useEffect)((function(){c(t),t&&r&&m((0,D.A)())}),[t,r]);var A=h?p.createElement(F,(0,i.A)({},v,{mobile:r,ref:o})):p.createElement(R,(0,i.A)({},v,{ref:o}));return p.createElement("div",null,p.createElement(x,v),A)}));B.displayName="Popup";const _=B,z=p.createContext(null);function U(){}var W=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];const X=(Y=g.A,K=function(e){(0,a.A)(t,e);var o=(0,l.A)(t);function t(e){var n,s;return(0,r.A)(this,t),n=o.call(this,e),(0,c.A)((0,u.A)(n),"popupRef",p.createRef()),(0,c.A)((0,u.A)(n),"triggerRef",p.createRef()),(0,c.A)((0,u.A)(n),"portalContainer",void 0),(0,c.A)((0,u.A)(n),"attachId",void 0),(0,c.A)((0,u.A)(n),"clickOutsideHandler",void 0),(0,c.A)((0,u.A)(n),"touchOutsideHandler",void 0),(0,c.A)((0,u.A)(n),"contextMenuOutsideHandler1",void 0),(0,c.A)((0,u.A)(n),"contextMenuOutsideHandler2",void 0),(0,c.A)((0,u.A)(n),"mouseDownTimeout",void 0),(0,c.A)((0,u.A)(n),"focusTime",void 0),(0,c.A)((0,u.A)(n),"preClickTime",void 0),(0,c.A)((0,u.A)(n),"preTouchTime",void 0),(0,c.A)((0,u.A)(n),"delayTimer",void 0),(0,c.A)((0,u.A)(n),"hasPopupMouseDown",void 0),(0,c.A)((0,u.A)(n),"onMouseEnter",(function(e){var o=n.props.mouseEnterDelay;n.fireEvents("onMouseEnter",e),n.delaySetPopupVisible(!0,o,o?null:e)})),(0,c.A)((0,u.A)(n),"onMouseMove",(function(e){n.fireEvents("onMouseMove",e),n.setPoint(e)})),(0,c.A)((0,u.A)(n),"onMouseLeave",(function(e){n.fireEvents("onMouseLeave",e),n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)})),(0,c.A)((0,u.A)(n),"onPopupMouseEnter",(function(){n.clearDelayTimer()})),(0,c.A)((0,u.A)(n),"onPopupMouseLeave",(function(e){var o;e.relatedTarget&&!e.relatedTarget.setTimeout&&(0,h.A)(null===(o=n.popupRef.current)||void 0===o?void 0:o.getElement(),e.relatedTarget)||n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)})),(0,c.A)((0,u.A)(n),"onFocus",(function(e){n.fireEvents("onFocus",e),n.clearDelayTimer(),n.isFocusToShow()&&(n.focusTime=Date.now(),n.delaySetPopupVisible(!0,n.props.focusDelay))})),(0,c.A)((0,u.A)(n),"onMouseDown",(function(e){n.fireEvents("onMouseDown",e),n.preClickTime=Date.now()})),(0,c.A)((0,u.A)(n),"onTouchStart",(function(e){n.fireEvents("onTouchStart",e),n.preTouchTime=Date.now()})),(0,c.A)((0,u.A)(n),"onBlur",(function(e){n.fireEvents("onBlur",e),n.clearDelayTimer(),n.isBlurToHide()&&n.delaySetPopupVisible(!1,n.props.blurDelay)})),(0,c.A)((0,u.A)(n),"onContextMenu",(function(e){e.preventDefault(),n.fireEvents("onContextMenu",e),n.setPopupVisible(!0,e)})),(0,c.A)((0,u.A)(n),"onContextMenuClose",(function(){n.isContextMenuToShow()&&n.close()})),(0,c.A)((0,u.A)(n),"onClick",(function(e){if(n.fireEvents("onClick",e),n.focusTime){var o;if(n.preClickTime&&n.preTouchTime?o=Math.min(n.preClickTime,n.preTouchTime):n.preClickTime?o=n.preClickTime:n.preTouchTime&&(o=n.preTouchTime),Math.abs(o-n.focusTime)<20)return;n.focusTime=0}n.preClickTime=0,n.preTouchTime=0,n.isClickToShow()&&(n.isClickToHide()||n.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var t=!n.state.popupVisible;(n.isClickToHide()&&!t||t&&n.isClickToShow())&&n.setPopupVisible(!n.state.popupVisible,e)})),(0,c.A)((0,u.A)(n),"onPopupMouseDown",(function(){var e;n.hasPopupMouseDown=!0,clearTimeout(n.mouseDownTimeout),n.mouseDownTimeout=window.setTimeout((function(){n.hasPopupMouseDown=!1}),0),n.context&&(e=n.context).onPopupMouseDown.apply(e,arguments)})),(0,c.A)((0,u.A)(n),"onDocumentClick",(function(e){if(!n.props.mask||n.props.maskClosable){var o=e.target,t=n.getRootDomNode(),i=n.getPopupDomNode();(0,h.A)(t,o)&&!n.isContextMenuOnly()||(0,h.A)(i,o)||n.hasPopupMouseDown||n.close()}})),(0,c.A)((0,u.A)(n),"getRootDomNode",(function(){var e=n.props.getTriggerDOMNode;if(e)return e(n.triggerRef.current);try{var o=(0,m.Ay)(n.triggerRef.current);if(o)return o}catch(e){}return d.findDOMNode((0,u.A)(n))})),(0,c.A)((0,u.A)(n),"getPopupClassNameFromAlign",(function(e){var o=[],t=n.props,i=t.popupPlacement,r=t.builtinPlacements,s=t.prefixCls,u=t.alignPoint,a=t.getPopupClassNameFromAlign;return i&&r&&o.push(function(e,o,t,n){for(var i=t.points,r=Object.keys(e),s=0;s<r.length;s+=1){var u=r[s];if(T(e[u].points,i,n))return"".concat(o,"-placement-").concat(u)}return""}(r,s,e,u)),a&&o.push(a(e)),o.join(" ")})),(0,c.A)((0,u.A)(n),"getComponent",(function(){var e=n.props,o=e.prefixCls,t=e.destroyPopupOnHide,r=e.popupClassName,s=e.onPopupAlign,u=e.popupMotion,a=e.popupAnimation,l=e.popupTransitionName,c=e.popupStyle,d=e.mask,f=e.maskAnimation,h=e.maskTransitionName,m=e.maskMotion,v=e.zIndex,A=e.popup,g=e.stretch,C=e.alignPoint,M=e.mobile,T=e.forceRender,y=e.onPopupClick,k=n.state,D=k.popupVisible,w=k.point,P=n.getPopupAlign(),x={};return n.isMouseEnterToShow()&&(x.onMouseEnter=n.onPopupMouseEnter),n.isMouseLeaveToHide()&&(x.onMouseLeave=n.onPopupMouseLeave),x.onMouseDown=n.onPopupMouseDown,x.onTouchStart=n.onPopupMouseDown,p.createElement(_,(0,i.A)({prefixCls:o,destroyPopupOnHide:t,visible:D,point:C&&w,className:r,align:P,onAlign:s,animation:a,getClassNameFromAlign:n.getPopupClassNameFromAlign},x,{stretch:g,getRootDomNode:n.getRootDomNode,style:c,mask:d,zIndex:v,transitionName:l,maskAnimation:f,maskTransitionName:h,maskMotion:m,ref:n.popupRef,motion:u,mobile:M,forceRender:T,onClick:y}),"function"==typeof A?A():A)})),(0,c.A)((0,u.A)(n),"attachParent",(function(e){f.A.cancel(n.attachId);var o,t=n.props,i=t.getPopupContainer,r=t.getDocument,s=n.getRootDomNode();i?(s||0===i.length)&&(o=i(s)):o=r(n.getRootDomNode()).body,o?o.appendChild(e):n.attachId=(0,f.A)((function(){n.attachParent(e)}))})),(0,c.A)((0,u.A)(n),"getContainer",(function(){if(!n.portalContainer){var e=(0,n.props.getDocument)(n.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",n.portalContainer=e}return n.attachParent(n.portalContainer),n.portalContainer})),(0,c.A)((0,u.A)(n),"setPoint",(function(e){n.props.alignPoint&&e&&n.setState({point:{pageX:e.pageX,pageY:e.pageY}})})),(0,c.A)((0,u.A)(n),"handlePortalUpdate",(function(){n.state.prevPopupVisible!==n.state.popupVisible&&n.props.afterPopupVisibleChange(n.state.popupVisible)})),(0,c.A)((0,u.A)(n),"triggerContextValue",{onPopupMouseDown:n.onPopupMouseDown}),s="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,n.state={prevPopupVisible:s,popupVisible:s},W.forEach((function(e){n["fire".concat(e)]=function(o){n.fireEvents(e,o)}})),n}return(0,s.A)(t,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,o=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=o.getDocument(this.getRootDomNode()),this.clickOutsideHandler=(0,A.A)(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||o.getDocument(this.getRootDomNode()),this.touchOutsideHandler=(0,A.A)(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||o.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=(0,A.A)(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=(0,A.A)(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),f.A.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,o=e.popupPlacement,t=e.popupAlign,i=e.builtinPlacements;return o&&i?function(e,o,t){var i=e[o]||{};return(0,n.A)((0,n.A)({},i),t)}(i,o,t):t}},{key:"setPopupVisible",value:function(e,o){var t=this.props.alignPoint,n=this.state.popupVisible;this.clearDelayTimer(),n!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:n}),this.props.onPopupVisibleChange(e)),t&&o&&e&&this.setPoint(o)}},{key:"delaySetPopupVisible",value:function(e,o,t){var n=this,i=1e3*o;if(this.clearDelayTimer(),i){var r=t?{pageX:t.pageX,pageY:t.pageY}:null;this.delayTimer=window.setTimeout((function(){n.setPopupVisible(e,r),n.clearDelayTimer()}),i)}else this.setPopupVisible(e,t)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var o=this.props.children.props,t=this.props;return o[e]&&t[e]?this["fire".concat(e)]:o[e]||t[e]}},{key:"isClickToShow",value:function(){var e=this.props,o=e.action,t=e.showAction;return-1!==o.indexOf("click")||-1!==t.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,o=e.action,t=e.showAction;return-1!==o.indexOf("contextMenu")||-1!==t.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,o=e.action,t=e.hideAction;return-1!==o.indexOf("click")||-1!==t.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,o=e.action,t=e.showAction;return-1!==o.indexOf("hover")||-1!==t.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,o=e.action,t=e.hideAction;return-1!==o.indexOf("hover")||-1!==t.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,o=e.action,t=e.showAction;return-1!==o.indexOf("focus")||-1!==t.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,o=e.action,t=e.hideAction;return-1!==o.indexOf("focus")||-1!==t.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,o){var t=this.props.children.props[e];t&&t(o);var n=this.props[e];n&&n(o)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var e=this.state.popupVisible,o=this.props,t=o.children,i=o.forceRender,r=o.alignPoint,s=o.className,u=o.autoDestroy,a=p.Children.only(t),l={key:"trigger"};this.isContextMenuToShow()?l.onContextMenu=this.onContextMenu:l.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(l.onClick=this.onClick,l.onMouseDown=this.onMouseDown,l.onTouchStart=this.onTouchStart):(l.onClick=this.createTwoChains("onClick"),l.onMouseDown=this.createTwoChains("onMouseDown"),l.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(l.onMouseEnter=this.onMouseEnter,r&&(l.onMouseMove=this.onMouseMove)):l.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?l.onMouseLeave=this.onMouseLeave:l.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(l.onFocus=this.onFocus,l.onBlur=this.onBlur):(l.onFocus=this.createTwoChains("onFocus"),l.onBlur=this.createTwoChains("onBlur"));var c=M()(a&&a.props&&a.props.className,s);c&&(l.className=c);var d=(0,n.A)({},l);(0,v.f3)(a)&&(d.ref=(0,v.K4)(this.triggerRef,a.ref));var f,h=p.cloneElement(a,d);return(e||this.popupRef.current||i)&&(f=p.createElement(Y,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!e&&u&&(f=null),p.createElement(z.Provider,{value:this.triggerContextValue},h,f)}}],[{key:"getDerivedStateFromProps",value:function(e,o){var t=e.popupVisible,n={};return void 0!==t&&o.popupVisible!==t&&(n.popupVisible=t,n.prevPopupVisible=o.popupVisible),n}}]),t}(p.Component),(0,c.A)(K,"contextType",z),(0,c.A)(K,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:function(){return""},getDocument:function(e){return e?e.ownerDocument:window.document},onPopupVisibleChange:U,afterPopupVisibleChange:U,onPopupAlign:U,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),K);var Y,K}}]);