"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7985],{77985:(e,t,o)=>{o.d(t,{E:()=>er});var n=o(2787),i=o(24643),r=o(40099),a=o(16680),l=o(60322),s=o(49057),d=o(71281),u=o(47172),c=o(46682),p=o(42617),m=o(54622),h=o(25616),v=o(58305),g=o(60484),f=o(79881),b=o(67169),x=o(79983),_=o(20157),y=o(45285),C=o(4474),k=o(97397),w=o(72688),j=o(29098),I=o(11328),M=o(4538),P=o(62186),S=o(72153),L=o(53439);const T=(0,P.default)("div",{target:"e1ebu80n4"})({display:"flex",justifyContent:"flex-start",alignItems:"center",height:38,cursor:"pointer"},"label:DivUserProfile;"),O=(0,P.default)("div",{target:"e1ebu80n5"})({flex:1},"label:DivProfileInfo;"),B=(0,P.default)(u.Link,{target:"e1ebu80n6"})({display:"block",textDecoration:"none","&:hover":{textDecoration:"none"}},"label:StyledProfileLink;"),D=(0,P.default)("div",{target:"e1ebu80n7"})((({theme:e})=>[(0,S.mp)({direction:e.direction,marginEnd:12})]),"label:DivAvatarContainer;"),E=(0,P.default)(L.I,{target:"e1ebu80n8"})((({theme:e})=>[(0,S.mp)({direction:e.direction,marginEnd:12}),{width:40,height:40,borderRadius:"50%",position:"relative"}]),"label:StyledProfileAvatar;"),R=(0,P.default)("div",{target:"e1ebu80n9"})((({theme:e})=>({fontSize:16,lineHeight:"22px",color:e.colors.TextPrimary,fontWeight:"bold",fontFamily:e.fontFamilies.TikTokDisplayFont,display:"inline-flex",alignItems:"center",justifyContent:"center",textDecoration:"none"})),"label:DivUniqueId;"),V=(0,P.default)("h2",{target:"e1ebu80n10"})((({theme:e})=>[(0,S.zy)({theme:e,typography:"P2",fontWeight:"bold",fontFamily:"TikTokFont",color:"TextPrimary"}),{lineHeight:"26px",fontSize:"18px",display:"block",overflow:"hidden",textOverflow:"ellipsis"}]),"label:H2UniqueId;"),F=(0,P.default)("h3",{target:"e1ebu80n11"})((({theme:e})=>[(0,S.zy)({theme:e,typography:"P3",fontWeight:"normal",fontFamily:"TikTokFont",color:"TextSecondary"}),{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}]),"label:H3Nickname;"),A=(0,P.default)("div",{target:"e1ebu80n12"})({display:"flex",alignItems:"center"},"label:DivExtraContainer;"),z=(0,r.memo)((e=>{const{avatarUri:t,uniqueId:o,nickname:n,verified:r,href:a="",avatarCircle:l=!1,loading:s,onMouseEnter:d,onMouseLeave:u}=e,c=(0,i.jsxs)(T,{children:[(0,i.jsx)(E,{src:"",size:48,skeleton:"avatar"}),(0,i.jsxs)(O,{children:[(0,i.jsx)(R,{children:(0,i.jsx)(I.EA.Title,{style:{width:140,height:24}})}),(0,i.jsx)(A,{children:(0,i.jsx)(I.EA.Title,{style:{width:160,height:15}})})]})]}),p=(0,i.jsx)(B,{to:a,target:"tiktok_live_view_window",rel:"noreferrer noopener",children:(0,i.jsxs)(T,{onMouseEnter:d,onMouseLeave:u,children:[(0,i.jsx)(D,{children:(0,i.jsx)(M.i,{size:40,needAnimation:!0,isShowLive:l,src:t})}),(0,i.jsxs)(O,{children:[(0,i.jsxs)(R,{children:[(0,i.jsx)(V,{children:o}),r&&(0,i.jsx)(j.A,{width:14,height:14,style:{margin:"0 4px"}})]}),(0,i.jsx)(A,{children:(0,i.jsx)(F,{children:n})})]})]})});return s?c:p}));var N=o(30023);const G=(0,P.default)("div",{target:"e4h3q9j0"})({flex:"0 0 544px",width:"544px",display:"flex",flexDirection:"column",padding:"32px 30px"},"label:DivLiveRoomDescriptionPanel;"),U=(0,P.default)("div",{target:"e4h3q9j1"})({margin:"16px 0",fontStyle:"normal",fontWeight:400,fontSize:16,lineHeight:"24px"},"label:DivLiveRoomDescriptionContent;"),q=(0,r.memo)((({isEnd:e=!1,liveInfo:t,requestId:o})=>{const{commonLiveParams:n}=function({liveInfo:e,isEnd:t,requestId:o}){const n=(0,r.useMemo)((()=>{var t;return{room_id:null==e?void 0:e.roomID,anchor_id:null===(t=null==e?void 0:e.ownerInfo)||void 0===t?void 0:t.id,play_mode:"browser_mode",request_id:o,enter_from_merge:"homepage_hot",live_room_mode:null==e?void 0:e.mode}}),[o,e]);return(0,r.useEffect)((()=>{t||(N.YH.handleLiveShow(Object.assign(Object.assign({},n),{enter_method:"live_head"})),N.YH.handleLiveShow(Object.assign(Object.assign({},n),{enter_method:"live_btn"})))}),[t]),{commonLiveParams:n}}({requestId:o,liveInfo:t,isEnd:e}),a=(0,r.useCallback)((e=>(0,C.stringifyUrl)({url:(0,w.G2o)({uniqueId:null==t?void 0:t.ownerInfo.uniqueId,secUid:null==t?void 0:t.ownerInfo.secUid}),query:{enter_from_merge:n.enter_from_merge,from_play_mode:n.play_mode,enter_method:e?"live_btn":"live_head"}})),[t,n]),l=(0,r.useCallback)((()=>{(null==t?void 0:t.ownerInfo.uniqueId)&&window.open(a(!0),"tiktok_live_view_window")}),[a,t]),s=(0,h.s)(),d=(0,r.useMemo)((()=>e?(0,w.fJR)({uniqueId:null==t?void 0:t.ownerInfo.uniqueId,secUid:null==t?void 0:t.ownerInfo.secUid}):a(!1)),[e,null==t?void 0:t.ownerInfo.uniqueId,null==t?void 0:t.ownerInfo.secUid,a]);return(0,i.jsxs)(G,{children:[(0,i.jsx)(z,{avatarUri:t.ownerInfo.avatarThumb,uniqueId:t.ownerInfo.uniqueId,nickname:t.ownerInfo.nickname,href:d,avatarCircle:!e,verified:t.ownerInfo.verified}),(0,i.jsx)(U,{children:t.title}),!e&&(0,i.jsx)(k.y,{buttonTheme:"primary",size:"largeNew",onClick:l,children:s("pm_web_fullpage_entry")})]})}));var H=o(35374),W=o(23500),$=o(16501),K=o(41271),Y=o(90159),X=o(75248),Q=o(58632),J=o(64162),Z=o(4126),ee=o(93995),te=o(57432),oe=o.n(te),ne=o(23999),ie=o(26324),re=o(8536),ae=o(34360);let le=class extends J.E{constructor(){super(),this.defaultState={isOpen:!1,url:"",isRedirectToProfilePage:!1,closeable:!1,isBannerActive:!1,bannerEnabled:!1,content:{title:"",desc:"",btnOpenText:""},iframeStyle:{},handleDownload:oe(),handleLogin:oe(),closeCallback:oe(),loginModalShow:!1,maskCloseable:!1,userId:"",groupId:"",enterMethod:void 0,pageType:5,modalType:"",hasCheckedPeriodicLogin:!1,hasCheckedPredictionLogin:!1,hasCheckedGuestMode:!1,showLoginOnLoad:!1,isLoginOnLoadClosed:!1,redirectToHomePage:!1,isGuestMode:!1,isGuestModeUI:!1}}setCloseable(e,t){(0,a.CP)().setCloseable(t)}setUrl(e,t){(0,a.CP)().setUrl(t)}setLoginPath(e,t){(0,a.CP)().setLoginPath(t)}setCloseCallback(e,t){t&&(0,a.CP)().setCloseCallback(t)}setIsOpen(e,t){(0,a.CP)().setIsOpen(t)}setContent(e,t){t&&(0,a.CP)().setContent(t)}setHandleDownload(e,t){t&&(0,a.CP)().setHandleDownload(t)}setHandleLogin(e,t){t&&(0,a.CP)().setHandleLogin(t)}setIframeStyle(e,t){(0,a.CP)().setIframeStyle(t)}setModalType(e,t){(0,a.CP)().setModalType(t)}setLoginModalShow(e,t){(0,a.CP)().setLoginModalShow(t)}setMaskCloseable(e,t){(0,a.CP)().setMaskCloseable(t)}setPageType(e,t){(0,a.CP)().setPageType(t)}setUserId(e,t){(0,a.CP)().setUserId(t)}setGroupId(e,t){(0,a.CP)().setGroupId(t)}setLastGroupId(e,t){(0,a.CP)().setLastGroupId(t)}setEnterMethod(e,t){(0,a.CP)().setEnterMethod(t)}setModalImage(e,t){(0,a.CP)().setModalImage(t)}setPopupType(e,t){(0,a.CP)().setPopupType(t)}setIsRedirectToProfilePage(e,t){(0,a.CP)().setIsRedirectToProfilePage(t)}setIsGuestMode(e,t){(0,a.CP)().setIsGuestMode(t)}setIsGuestModeUI(e,t){(0,a.CP)().setIsGuestModeUI(t)}setPredictionPayload(e,t){(0,a.CP)().setPredictionPayload(t)}setIsLinkPhoneOrEmail(e,t){(0,a.CP)().setIsLinkPhoneOrEmail(t)}openModal(e){return e.pipe((0,re.Z)((e=>(0,ne.of)((0,a.CP)().openModal(e)).pipe((0,re.Z)((()=>(0,ne.of)(this.noop())))))))}setCheckPeriodicLogin(e,t){(0,a.CP)().setCheckPeriodicLogin(t)}setCheckPredictionLogin(e,t){(0,a.CP)().setCheckPredictionLogin(t)}setCheckGuestModeLogin(e,t){(0,a.CP)().setCheckGuestModeLogin(t)}setIsLoginOnLoadClosed(e,t){(0,a.CP)().setIsLoginOnLoadClosed(t)}setClearShowLoginOnLoad(e){(0,a.CP)().setClearShowLoginOnLoad()}closeModal(e){return e.pipe((0,re.Z)((e=>(0,ne.of)((0,a.CP)().closeModal(e)).pipe((0,re.Z)((()=>(0,ne.of)(this.noop())))))))}setIsBannerActive(e,t){(0,a.CP)().setIsBannerActive(t)}};le.jotaiAtom=a.JF,(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Boolean]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setCloseable",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,String]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setUrl",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,String]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setLoginPath",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setCloseCallback",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Boolean]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setIsOpen",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setContent",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setHandleDownload",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setHandleLogin",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setIframeStyle",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setModalType",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Boolean]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setLoginModalShow",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setMaskCloseable",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Number]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setPageType",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setUserId",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setGroupId",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setLastGroupId",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setEnterMethod",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setModalImage",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setPopupType",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Boolean]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setIsRedirectToProfilePage",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Boolean]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setIsGuestMode",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Boolean]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setIsGuestModeUI",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,String]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setPredictionPayload",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Boolean]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setIsLinkPhoneOrEmail",null),(0,Q.__decorate)([(0,Z.Mj)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[ie.c]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"openModal",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setCheckPeriodicLogin",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setCheckPredictionLogin",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setCheckGuestModeLogin",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setIsLoginOnLoadClosed",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setClearShowLoginOnLoad",null),(0,Q.__decorate)([(0,Z.Mj)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[ie.c]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"closeModal",null),(0,Q.__decorate)([(0,Z.h5)(),(0,Q.__metadata)("design:type",Function),(0,Q.__metadata)("design:paramtypes",[Object,Boolean]),(0,Q.__metadata)("design:returntype",void 0)],le.prototype,"setIsBannerActive",null),le=(0,Q.__decorate)([(0,ee.n)("LoginModal"),(0,Q.__metadata)("design:paramtypes",[])],le),a.JF.__SIGI_MODULE__=le,(0,ae.y)(le);var se=o(16469),de=o(84987);const ue={id:"logo-icon-5f8ed36e",use:"logo-icon-5f8ed36e-usage",viewBox:"0 0 48 48",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" id="logo-icon-5f8ed36e"><g fill-rule="evenodd" clip-path="url(#logo-icon-5f8ed36e_a)" clip-rule="evenodd"><path d="M0 36c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12V12c0-6.628-5.373-12-12-12H12C5.373 0 0 5.372 0 12z" /><path fill="#25F4EE" d="M30.636 6.288A9.2 9.2 0 0 1 30.35 4h-6.97v26.133c0 3.014-2.056 5.457-5.062 5.457s-5.443-2.443-5.443-5.456 2.437-5.457 5.443-5.457c.6 0 .797.098 1.337.278v-7.051c-.562-.079-.754-.12-1.337-.12C11.515 17.785 6 23.315 6 30.135s5.515 12.349 12.318 12.349c6.708 0 12.357-5.375 12.51-12.062V17.049c2.528 1.733 5.395 2.746 8.689 2.746V13.19c-4.275 0-7.866-2.933-8.88-6.902z" /><path fill="#fff" d="M33.12 8.77a9.2 9.2 0 0 1-.287-2.288h-6.971v26.134c0 3.014-2.055 5.456-5.061 5.456s-5.443-2.442-5.443-5.456a5.45 5.45 0 0 1 5.443-5.456c.6 0 .797.097 1.337.277v-7.05c-.562-.08-.754-.12-1.337-.12-6.803 0-12.318 5.529-12.318 12.349S13.998 44.965 20.8 44.965c6.707 0 12.357-5.374 12.51-12.062V19.531c2.528 1.733 5.395 2.747 8.689 2.747v-6.606c-4.275 0-7.866-2.933-8.88-6.901z" /><path fill="#FE2C55" d="M15.92 35.033a5.45 5.45 0 0 1-.562-2.416c0-3.014 2.437-5.457 5.443-5.457.523 0 .739.074 1.143.212l.194.066v-7.051l-.21-.03c-.411-.059-.623-.09-1.127-.09q-.58 0-1.146.053v4.635l-.194-.066c-.404-.138-.62-.212-1.143-.212-3.006 0-5.443 2.443-5.443 5.457a5.46 5.46 0 0 0 3.045 4.9zm-4.972 4.997a12.29 12.29 0 0 0 9.853 4.935c6.707 0 12.357-5.374 12.51-12.061V19.532c2.528 1.733 5.395 2.746 8.689 2.746v-6.605a9.2 9.2 0 0 1-2.483-.341v4.463c-3.294 0-6.161-1.013-8.69-2.746v13.372c-.152 6.688-5.802 12.062-12.509 12.062-2.763 0-5.314-.912-7.37-2.453m23.455-28.401a9.2 9.2 0 0 1-3.715-5.146h2.145a9.15 9.15 0 0 0 1.57 5.146" /></g><defs><clipPath id="logo-icon-5f8ed36e_a"><rect width="48" height="48" fill="#fff" rx="10.5" /></clipPath></defs></symbol>'};function ce(e){const t=(0,r.useContext)(de.X);return(0,r.useLayoutEffect)((()=>(t.add(ue),()=>{t.remove("logo-icon-5f8ed36e")})),[]),(0,i.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,i.jsx)("use",{xlinkHref:"#logo-icon-5f8ed36e"},void 0)}),void 0)}const pe=(0,P.default)("div",{target:"e1g3y02w0"})((({theme:{colors:e}})=>({position:"fixed",left:0,top:0,right:0,bottom:0,background:e.BGPrimary,zIndex:3e3,display:"flex",flexDirection:"row"})),"label:DivBrowserModeContainer;"),me=(0,P.default)("div",{target:"e1g3y02w1"})({position:"absolute",width:"10%",height:"10%",filter:"blur(2px)",left:"50%",top:"50%",transform:"scale(11)",opacity:"0.3",background:"center no-repeat",backgroundSize:"cover"},"label:DivBlurBackground;"),he=(0,P.default)("svg",{target:"e1g3y02w2"})({position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",pointerEvents:"none"},"label:SvgPlayIcon;");he.defaultProps=Object.assign(Object.assign({},he.defaultProps),{"data-e2e":"browse-video-play"});const ve=(0,P.default)("button",{target:"e1g3y02w3"})((({theme:{colors:e}})=>({position:"absolute",zIndex:1,display:"flex",justifyContent:"center",alignItems:"center",width:"40px",height:"40px",background:e.ConstLineInverse,borderRadius:"50%",cursor:"pointer",border:"none",outline:"none",fontsize:0,WebkitAppRegion:"no-drag"})),(({theme:e,isUiOptimise:t})=>(0,S.oO)({theme:e,isUiOptimise:t})),"label:ButtonBasicButtonContainer;"),ge=(0,P.default)(ve,{target:"e1g3y02w4"})((({theme:e,isUiOptimise:t})=>({top:"20px",transition:"opacity .3s",backgroundColor:t?"":e.colors.ConstBGContainer,":hover":{opacity:.7},":active":{opacity:.5}})),(({theme:{direction:e}})=>(0,S.mp)({direction:e,start:"20px"})),"label:StyledCloseIconContainer;");ge.defaultProps=Object.assign(Object.assign({},ge.defaultProps),{"data-e2e":"browse-close"});const fe=(0,P.default)(ce,{target:"e1g3y02w5"})({position:"absolute",zIndex:1,top:"20px",borderRadius:"100px",fill:"black"},(({theme:{direction:e}})=>(0,S.mp)({direction:e,start:"84px"})),"label:StyledLogo;");fe.defaultProps=Object.assign(Object.assign({},fe.defaultProps),{"data-e2e":"browse-logo"});const be=(0,P.default)("div",{target:"e1g3y02w6"})((({theme:{colors:e}})=>({flex:"1 0 600px",background:e.ConstBGInverse,position:"relative",overflow:"hidden"})),"label:DivPlayerContainer;"),xe=(0,r.memo)((function({itemListKey:e,currentIndex:t,onCloseBrowserMode:o,onNextVideo:n,onPrevVideo:a,zIndex:l=3e3}){const{handlePlayErrorReport:s}=(0,$.Fb)(),d=(0,H.b)(),{currentId:u="",listLength:k}=(0,g.L$)((0,f.Ky)({itemListKey:e,currentIndex:t})),[j,I]=(0,r.useState)(!1),[M,P]=(0,r.useState)(!1),[S,L]=(0,r.useState)(!1),T=t<k-1,O=(0,h.s)();(0,b.Ux)(2);const B=(0,r.useCallback)((()=>{L(!0)}),[]),D=(0,r.useCallback)((()=>{I(!j)}),[j]),E=(0,r.useCallback)((()=>{n()}),[n]),R=(0,r.useCallback)((()=>{a()}),[a]),V=(0,r.useCallback)((()=>{o()}),[o]),F=(0,f.FQ)({handleNext:E,handlePrev:R,hasNext:T,currentIndex:t,itemListKey:e}),{liveRoomInfo:A,requestId:z}=(0,f.jd)({itemListKey:e,currentIndex:t}),N=(0,c.w)(x.O);!function({liveRoomInfo:e,onCloseBrowserMode:t}){(0,r.useEffect)((()=>{if(!e)return;const t=(0,C.stringifyUrl)({url:(0,w.G2o)({uniqueId:e.ownerInfo.uniqueId}),query:{live_room_mode:null==e?void 0:e.mode,play_mode:"browser_mode",enter_from_merge:"homepage_hot",enter_method:"live_cell"}});window.history.replaceState(window.history.state,"live-card",t)}),[e]),(0,r.useEffect)((()=>{const e=()=>{t({fromPopState:!0})};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}}),[])}({liveRoomInfo:A,onCloseBrowserMode:o}),function({currentId:e,togglePlay:t,handleNext:o,handlePrev:n,handleClose:i}){const a=(0,r.useRef)(!0),l=(0,X.i3)(),s=(0,X.S4)(),d=(0,r.useRef)(-1),u=(0,K.P)(le,{selector:e=>e.isOpen,dependencies:[]}),c=(0,r.useCallback)((()=>{se.lA.setItem("muted",!l),s.setMute(!l)}),[s,l]),p=(0,r.useCallback)((e=>{if(u)return;const r=new Map([[27,()=>{i()}],[40,()=>{o()}],[32,()=>{t()}],[38,()=>{n()}],[77,()=>{c()}]]);if(r.has(e.keyCode)){e.preventDefault(),e.stopPropagation();const t=r.get(e.keyCode);return null==t||t(),!1}}),[u,i,n,t,o,c]),m=(0,r.useRef)(p);m.current=p,(0,r.useEffect)((()=>{const e=e=>m.current(e);return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]);const h=(0,Y._g)((e=>{e.stopPropagation(),d.current&&clearTimeout(d.current),d.current=window.setTimeout((()=>{if(a.current)return;const t=-e.deltaY||-e.detail;Math.max(-1,Math.min(1,t))<0?o():n(),a.current=!1}),100)}),[e,o,n],20);(0,r.useEffect)((()=>(document.addEventListener("wheel",h),()=>{document.removeEventListener("wheel",h)})),[h]),(0,r.useEffect)((()=>{setTimeout((()=>{a.current=!1}),2e3)}),[])}({currentId:u,togglePlay:D,handleNext:E,handlePrev:R,handleClose:V});const{showModal:G,hideModal:U}=(0,_.g9)();(0,r.useEffect)((()=>(G(!0),I(!0),()=>{U(),I(!1)})),[U,G]);const Q=(0,r.useCallback)((()=>{P(!0)}),[]),J=(0,r.useCallback)((()=>{B()}),[B]);(0,r.useEffect)((()=>{S&&u&&N.deleteLiveItem(u)}),[S,u,N]),(0,r.useEffect)((()=>{A||o()}),[A,o]);const Z=(0,W.t4)();return(0,i.jsx)(p.Ay,{returnFocus:!0,children:(0,i.jsxs)(pe,{style:{zIndex:l},children:[(0,i.jsxs)(be,{children:[(0,i.jsx)(me,{style:{backgroundImage:`url(${null==A?void 0:A.coverUrl})`}}),(0,i.jsx)(y.C,{liveInfo:A,requestId:z,loggerConfig:Z,onLiveEndTimeoutStart:Q,onLiveEndTimeoutEnd:J,onPlayError:s,isBrowserMode:!0,active:j,autoplay:!0,volumeProps:d}),(0,i.jsx)(ge,{role:"button","aria-label":O("Close"),onClick:V,onMouseDown:v.dG,children:(0,i.jsx)(m.A,{width:18,height:18,fill:"#fff"})}),(0,i.jsx)(fe,{width:40,height:40}),F]}),A&&(0,i.jsx)(q,{requestId:z,isEnd:M,liveInfo:A})]})})}));var _e=o(35323),ye=o(93987),Ce=o(43626),ke=o(73580),we=o(48980),je=o(43175),Ie=o(38470),Me=o(26059),Pe=o(98332),Se=o(56546),Le=o(97071),Te=o(2584),Oe=o(95357),Be=o(91055),De=o(49677),Ee=o(61740),Re=o(4103),Ve=o(509),Fe=o(8046),Ae=o(14107),ze=o(11983),Ne=o(32125),Ge=o(99282),Ue=o(88920),qe=o(94039),He=o(19442),We=o(71777),$e=o(53438),Ke=o(86634),Ye=o(48180),Xe=o(7772),Qe=o(97059),Je=o(28936),Ze=o(40650),et=o(22248),tt=o(63363),ot=o(85245),nt=o(29793),it=o(78305),rt=o(93341),at=o(4712),lt=o(63438),st=o(53924),dt=o(37350),ut=o(96689),ct=o(60492),pt=o(85349),mt=o(80357),ht=o(45448),vt=o(83600),gt=o(89367),ft=o(86751),bt=o(76497),xt=o(99893),_t=o(5441),yt=o(42287),Ct=o(80131),kt=o(40935),wt=o(59952),jt=o(78208),It=o(93965),Mt=o(39743),Pt=o(53656),St=o(52333),Lt=o(7859),Tt=o(53764),Ot=o(95481);const Bt=(0,P.default)("div",{target:"e19twy0g0"})((({theme:{colors:e}})=>({position:"relative",width:310,height:218,boxSizing:"content-box",borderRadius:8,backgroundColor:e.BGPrimary,textAlign:"center"})),"label:DivLeaveModalContainer;"),Dt=(0,P.default)("div",{target:"e19twy0g1"})((({theme:e})=>[(0,S.zy)({theme:e,color:"TextPrimary",typography:"H5"}),{position:"absolute",top:22,left:20,right:20}]),"label:DivTitle;"),Et=(0,P.default)("div",{target:"e19twy0g2"})((({theme:e})=>[(0,S.zy)({theme:e,color:"TextSecondary",typography:"H6"}),{position:"absolute",top:60,left:20,right:20}]),"label:DivSubTitle;"),Rt=(0,P.default)("div",{target:"e19twy0g3"})({position:"absolute",top:118,left:20,right:20,height:100},"label:DivButtonContainer;"),Vt=(0,P.default)("div",{target:"e19twy0g4"})((({theme:e})=>[(0,S.zy)({theme:e,color:"ConstTextInverse",typography:"H6"}),{height:48,lineHeight:"48px",borderRadius:2,backgroundColor:e.colors.Primary,cursor:"pointer"}]),"label:DivConfirmButton;"),Ft=(0,P.default)("div",{target:"e19twy0g5"})((({theme:e})=>[(0,S.zy)({theme:e,color:"TextTertiary",typography:"H6"}),{height:48,lineHeight:"48px",cursor:"pointer",marginTop:2}]),"label:DivCancelButton;"),At=(0,r.memo)((function({needLeaveCheck:e,visible:t,onConfirmLeave:o,onCancelLeave:n}){const a=(0,h.s)(),l=(0,u.useHistory)(),s=(0,r.useRef)(null),[d,c]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),v=(0,r.useCallback)((()=>{c(!1),m(!0),o()}),[o]),g=(0,r.useCallback)((()=>{c(!1),s.current=null,n()}),[n]),f=(0,r.useCallback)((t=>!(!p&&e&&(c(!0),s.current=t,1))),[p,e]);(0,r.useEffect)((()=>{const e=s.current;p&&e&&l.push(e)}),[p,l]);const b=(0,Tt.M)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.Prompt,{when:e,message:f}),(0,i.jsx)(Ot.aF,{parentRef:b,visible:t||d,maskCloseable:!1,children:(0,i.jsxs)(Bt,{children:[(0,i.jsx)(Dt,{children:a("comment_tray_exit_title")}),(0,i.jsx)(Et,{children:a("comment_tray_exit_des")}),(0,i.jsxs)(Rt,{children:[(0,i.jsx)(Vt,{onClick:v,children:a("comment_tray_exit_leave")}),(0,i.jsx)(Ft,{onClick:g,children:a("comment_tray_exit_stay")})]})]})})]})}));var zt=o(70294),Nt=o(27375),Gt=o(8513),Ut=o(31918),qt=o(18410),Ht=o(45515),Wt=o(67960),$t=o(38401),Kt=o(67518),Yt=o(29857),Xt=o(42434),Qt=o(24716),Jt=o(25342),Zt=o(98014),eo=o(84908),to=o(82858);const oo={id:"favorite-f29ef602",use:"favorite-f29ef602-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="favorite-f29ef602"><path fill="#FACE15" d="M4 4.5a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v15.13a1 1 0 0 1-1.555.831l-6.167-4.12a.5.5 0 0 0-.556 0l-6.167 4.12A1 1 0 0 1 4 19.63z" /><path fill="black" fill-opacity=".03" d="M4.032 4.144Q4 4.317 4 4.5v15.13a1 1 0 0 0 1.555.831l6.167-4.12a.5.5 0 0 1 .41-.066l-.427-.198a1.49 1.49 0 0 0-1.377.063c-.581.339-1.45.85-2.25 1.339-.59.359-1.427.695-2.187.962-.929.325-1.86-.387-1.86-1.37zm8.251 12.202 6.162 4.115A1 1 0 0 0 20 19.63V4.5a2 2 0 0 0-1.123-1.798c.21.254.334.58.33.936a117 117 0 0 1-.896 13.408c-.124.99-1.17 1.553-2.076 1.133z" /></symbol>'};function no(e){const t=(0,r.useContext)(de.X);return(0,r.useLayoutEffect)((()=>(t.add(oo),()=>{t.remove("favorite-f29ef602")})),[]),(0,i.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,i.jsx)("use",{xlinkHref:"#favorite-f29ef602"},void 0)}),void 0)}var io=o(6985);const ro={id:"uncollect-7652bb5c",use:"uncollect-7652bb5c-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="uncollect-7652bb5c"><path fill="currentColor" d="M4 4.5a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v15.13a1 1 0 0 1-1.555.831l-6.167-4.12a.5.5 0 0 0-.556 0l-6.167 4.12A1 1 0 0 1 4 19.63z" /><path fill="currentColor" fill-opacity=".03" d="M4.032 4.144Q4 4.317 4 4.5v15.13a1 1 0 0 0 1.555.831l6.167-4.12a.5.5 0 0 1 .41-.066l-.427-.198a1.49 1.49 0 0 0-1.377.063c-.581.339-1.45.85-2.25 1.339-.59.359-1.427.695-2.187.962-.929.325-1.86-.387-1.86-1.37zm8.251 12.202 6.162 4.115A1 1 0 0 0 20 19.63V4.5a2 2 0 0 0-1.123-1.798c.21.254.334.58.33.936a117 117 0 0 1-.896 13.408c-.124.99-1.17 1.553-2.076 1.133z" /></symbol>'};function ao(e){const t=(0,r.useContext)(de.X);return(0,r.useLayoutEffect)((()=>(t.add(ro),()=>{t.remove("uncollect-7652bb5c")})),[]),(0,i.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,i.jsx)("use",{xlinkHref:"#uncollect-7652bb5c"},void 0)}),void 0)}var lo=o(17566),so=o(68182),uo=o(60342),co=o(97706),po=o(44935),mo=o(44494),ho=o(25941),vo=o(86776),go=o(6944),fo=o(96737),bo=o(79395),xo=o(70669),_o=o(64317),yo=o(10332);const Co=(0,i.jsx)(Yt.A,{width:20,height:20}),ko=(0,r.memo)((function(e){var t,o,n,a;const l=(0,Kt.u)(),d="rtl"===l.direction,u=(0,ke.Nj)(Se.A),p=(0,h.s)(),{itemId:m,hideComment:v=!1,teaParams:f,onTabChange:b,activeTab:_}=e,y=(0,c.w)(St.k),C=(0,bo.k)(m),{ad_info:k,item_control:w,stats:j,statsV2:I,digged:M,id:P="",collected:S}=(0,g.L$)(C),L=null!=I?I:j,T=!!k,O=!1===(null==w?void 0:w.can_share),B=!1===(null==w?void 0:w.can_comment),D=(0,po.AP)(m),E=(0,to.Eo)(),R=(0,c.w)(x.O),V=(0,eo.nW)((e=>{var t;return e.users[null!==(t=null==C?void 0:C.author)&&void 0!==t?t:""]}),Ne.bN),[F,A]=(0,r.useState)(!1),{shouldOptimizeCta:z}=(0,Ue.kb)(),N=z?24:20,G=(0,r.useMemo)((()=>(0,i.jsx)(no,{width:N,height:N})),[N]),{uniqueId:U=""}=null!=V?V:{},q=(0,lo._u)()(C),{wid:H=""}=null!==(t=(0,s.W)((()=>["wid"]),[]))&&void 0!==t?t:{},W=`https://www.tiktok.com${q}?is_from_webapp=1&sender_device=pc&web_id=${H}`,$=(0,r.useRef)(null),K=(0,r.useMemo)((()=>e=>(0,mo.io)({platform:"copy",url:W,targetDOM:e})),[W]),Y=(0,r.useCallback)((()=>{const e=$.current;u.handleShare(Object.assign(Object.assign({},f),{platform:"copy",author_id:null==V?void 0:V.id,group_id:m,play_mode:"browser_mode",share_click_from:"short"})),T&&Fe.pg.handleShare(f),y.addMlModelTrainData({id:m,action:"share"}),K(e)(),ze.F.open({content:p("Copied"),duration:1.2,widthType:"half",getContainer:Tt.M,getContainerPosition:"fixed"})}),[K,m,u,p,null==V?void 0:V.id,f,T]),{isAddToCollectionEnabled:X,popoverTriggerType:Q,toastTheme:J,toastDuration:Z}=(0,Ue.Ge)(),{isInExperiment:ee,isBrowserMode:te}=(0,Ue.NV)(),oe=(0,qe.FV)(),{isSharedPulsing:ne,lastSharedMethod:ie}=(0,ho.p)(),[re,ae]=(0,r.useState)([]),le=(0,r.useCallback)((e=>{ae(e)}),[]),se=(0,r.useCallback)((()=>{var e;ee&&C&&!C.digged&&oe.turnOnSharePulsing({videoId:m,authorId:null!==(e=null==C?void 0:C.authorId)&&void 0!==e?e:""}),y.postLikeVideo(Object.assign(Object.assign({},f),{id:m,enter_method:"click",play_mode:"browser_mode"}))}),[y,m,f,null==C?void 0:C.digged,ee]),de=(0,ut.G)({actionWhenUserLoggedIn:se,reportClickEvent:()=>{Te.O.handleGeneralClick("like",{scene:"video_feed",group_id:m,play_mode:"browser_mode"})},modalConfig:{query:{enter_method:"click_like",group_id:m}}});const ue=(0,r.useCallback)((()=>{S&&R.removeItemListById({key:"favorites",groupId:m}),y.postCollectVideo({itemId:m})}),[S,y,m,R]),ce=(0,ut.G)({actionWhenUserLoggedIn:ue,modalConfig:{query:{enter_method:"click_favorite",group_id:m}},reportClickEvent:()=>{Te.O.handleGeneralClick("favorite",{group_id:P,play_mode:"browser_mode"})}}),pe=(0,r.useMemo)((()=>(0,i.jsx)(io.A,{fill:M?l.colors.Primary:l.colors.Primary2,width:N,height:N})),[M,N,l.colors.Primary,l.colors.Primary2]),me=(0,r.useMemo)((()=>S?G:(0,i.jsx)(ao,{style:{color:l.colors.Primary2},width:N,height:N})),[G,S,N,l.colors.Primary2]),he=(0,r.useMemo)((()=>Object.assign(Object.assign({},f),{author_id:null==V?void 0:V.id,group_id:m,play_mode:"browser_mode"})),[f,m,null==V?void 0:V.id]),{active:ve,handleMouseEnter:ge,handleMouseLeave:fe,handleOtherModalOpen:be,handleButtonShareOnBlur:xe,actionItemRef:_e,buttonShareRef:ye}=(0,uo.K)(z?300:200),{expanded:Ce}=(0,vo.kw)(),we=(0,$e.MA)(C),je=(0,r.useCallback)((()=>{var e,t;u.handleSharePanelShow(Object.assign(Object.assign({},we),{group_id:m,author_id:null==V?void 0:V.id,share_option_type:Ce,poi_id:null===(e=null==C?void 0:C.poi)||void 0===e?void 0:e.id,playlist_id:null!==(t=null==f?void 0:f.playlist_id)&&void 0!==t?t:"",popup_type:null==f?void 0:f.popup_type,is_sub_only_video:(null==C?void 0:C.subVideoMeta)?1:0,scene:"video_feed"})),ge()}),[u,m,null==V?void 0:V.id,Ce,null===(o=null==C?void 0:C.poi)||void 0===o?void 0:o.id,null==f?void 0:f.playlist_id,null==C?void 0:C.subVideoMeta,null==f?void 0:f.popup_type,we,ge]),Ie=(0,vo.XF)();(0,r.useEffect)((()=>{Ie()}),[Ie]);const Me=(0,r.useCallback)((()=>{A(!0)}),[A]),Pe=(0,r.useCallback)((()=>{A(!1)}),[A]),Le=(0,r.useCallback)((e=>{27===e.keyCode&&(e.stopPropagation(),e.preventDefault(),Pe())}),[Pe]),{shouldShowCommentsCnt:Oe}=(0,Ue.kb)(),Be=(0,r.useCallback)((e=>{var t,o;13===e.keyCode||32===e.keyCode?(e.stopPropagation(),e.preventDefault(),je()):27===e.keyCode&&(e.stopPropagation(),e.preventDefault(),z?null===(t=_e.current)||void 0===t||t.setFocus():null===(o=ye.current)||void 0===o||o.focus(),fe())}),[_e,ye,je,fe,z]),De=()=>{T&&Fe.pg.handleOtherclick(Object.assign(Object.assign({},f),{refer:Jt.Hq.Share}))},Ee=(0,$e.mx)(C),Re=(null==V?void 0:V.isEmbedBanned)||Ee,Ve=(0,r.useCallback)(((e,t)=>{Zt.mr.handleChannelGeneralClick("share_video","video_feed",t)}),[]),Ae=(0,i.jsx)(co.z,{placement:d?"bottomLeft":"bottomRight",active:ve,margin:-12,arrowMargin:12,backgroundColor:l.colors.BGSecondary,children:(0,i.jsx)(xo.o8,{children:(0,i.jsx)(go.SY,{videoId:P,uniqueId:U,mode:1,url:W,enabled:null==C?void 0:C.shareEnabled,embedCode:D,isEmbedBanned:Re,onEmbedModalVisibleChange:e.onEmbedModalVisibleChange,teaParams:he,onSendMessagePanelOpen:Me,from:3,onClickShare:z?Ve:void 0,onOtherModalOpen:z?be:void 0})})}),Ge=!O&&!z&&(0,i.jsxs)(xo.i6,{children:[(0,i.jsx)(xo.jP,{children:W}),(0,i.jsx)(xo._E,{onClick:Y,children:p("copy_link")})]}),He=!z&&!O&&(0,i.jsxs)(xo.eT,{"data-e2e":"browse-share-group",children:[(0,i.jsx)(go.SY,{videoId:P,uniqueId:U,enabled:null==C?void 0:C.shareEnabled,mode:0,url:W,embedCode:D,isEmbedBanned:Re,onEmbedModalVisibleChange:e.onEmbedModalVisibleChange,teaParams:he,onSendMessagePanelOpen:Me,onClickShare:Ve,showLastSharedPulsing:te,onPlatformChange:le}),(0,i.jsxs)(xo.ue,{"aria-expanded":ve,"aria-label":`${p("webapp_share_btn")}`,onMouseEnter:je,onMouseLeave:fe,onKeyDown:Be,onBlur:xe,ref:ye,children:[te&&ne&&ie&&!re.includes(ie)?(0,i.jsx)(fo.T,{iconSize:24,lastSharedIconStyle:{marginTop:"8px"},onClick:De,children:(0,i.jsx)(Xt.A,{width:"16",height:"16",onClick:De})}):(0,i.jsx)(Xt.A,{width:"16",height:"16",onClick:De}),Ae]})]}),We=(0,i.jsx)(so.A,{styleType:3,text:E?"":(0,g.D1)(Number(null!==(n=null==L?void 0:L.collectCount)&&void 0!==n?n:0)),Icon:me,onClick:ce}),Ke=(0,i.jsxs)(i.Fragment,{children:[!T&&(X?(0,i.jsx)(Qt.e,{trigger:We,itemId:m,playModeForTea:"browser_mode",popoverTriggerType:Q,toastTheme:J,toastDuration:Z}):We),z&&!O&&(0,i.jsx)(so.A,{style:{color:l.colors.Primary2},styleType:3,Icon:(0,i.jsx)(Xt.A,{width:24,height:24,onClick:De}),e2eTag:"browse-share",text:(null==L?void 0:L.shareCount)&&!E?(0,g.D1)(null==L?void 0:L.shareCount):p("Share"),onMouseEnter:je,onMouseLeave:fe,onBlur:xe,onKeyDown:Be,ariaLabel:p("accessibilityLabels_forYou_btn_share",{number:(0,g.D1)(null==L?void 0:L.shareCount)}),ariaExpanded:ve,ref:_e,children:Ae})]}),Ye=(0,r.useMemo)((()=>({isColor:!1,isStrong:!0,size:N,showTick:!1})),[N]),Xe=(0,yo.g)({itemId:m,iconConfig:Ye}),{handleClickRepost:Qe,canRepost:Je,isReposted:Ze}=(0,yo.l)({itemId:m,playMode:"browser_mode",playlistId:null!==(a=null==f?void 0:f.playlist_id)&&void 0!==a?a:""}),{repostActionVid:et}=(0,Ue.hn)(),tt=Je&&"v1"===et&&(0,i.jsx)(so.A,{style:{color:Ze?l.colors.AssistColorYellow:l.colors.TextSecondary},styleType:3,text:E?"":(0,g.D1)(null==I?void 0:I.repostCount),Icon:Xe,onClick:Qe,e2eTag:"browse-repost",ariaLabel:`${(0,g.D1)(null==I?void 0:I.repostCount)} ${p("pcWeb_repostTab")}`,ariaPressed:Ze});return(0,i.jsxs)(xo.Le,{ref:$,children:[(0,i.jsxs)(xo.d4,{shouldOptimizeCta:z,children:[(0,i.jsxs)(xo.eT,{style:{gap:"20px"},children:[(0,i.jsx)(so.A,{styleType:3,text:E?"":(0,g.D1)(null==L?void 0:L.diggCount),Icon:pe,onClick:de,e2eTag:"browse-like",ariaLabel:`${(0,g.D1)(null==L?void 0:L.diggCount)} ${p("fixed_likes")}`,ariaPressed:M}),!v&&!z&&(0,i.jsx)(so.A,{styleType:3,text:E?"":(0,g.D1)(B?0:null==L?void 0:L.commentCount),Icon:Co,disabled:!0,e2eTag:"browse-comment"}),Ke,tt]}),He]}),Ge,Oe&&(0,i.jsx)(_o.r,{itemId:m,onTabChange:b,activeTab:_,isCommentDisabled:B}),F&&(0,i.jsx)(yt.k,{visible:F,videoId:P,onClose:Pe,onKeyDown:Le})]})}));var wo=o(88091),jo=o(62738),Io=o(22006),Mo=o(22993),Po=o(50289),So=o(46803),Lo=o(44061),To=o(46251),Oo=o(38975),Bo=o(50970),Do=o(51664),Eo=o(30772),Ro=o(97057),Vo=o(69152);const Fo=function({author:e,video:t,videoReportParams:o}){var n;const a=(0,K.P)(Bo.L,{selector:t=>{var o,n;return(null===(n=null===(o=t.appContext)||void 0===o?void 0:o.user)||void 0===n?void 0:n.uniqueId)===e.uniqueId},dependencies:[e.uniqueId]}),l=null==t?void 0:t.ad_info,s=(0,Le.n5)({ad_info:l,play_mode:"browser_mode"}),d=(0,ut.K)({query:{enter_method:"click_follow",group_id:null==t?void 0:t.id}}),{text:u,handleFollow:c,isFollowing:p,relation:m}=(0,kt.Tu)({uniqueId:e.uniqueId,onNeedLogin:d,teaParams:Object.assign(Object.assign(Object.assign({},o),s),{group_id:null==t?void 0:t.id,play_mode:"browser_mode"})}),h=(0,r.useMemo)((()=>(0,i.jsx)(i.Fragment,{children:2===m?(0,i.jsx)(jo.A,{}):null})),[m]);if(null==t?void 0:t.scheduleTime)return(0,i.jsx)(Eo.D,{video:t});if(a)return(0,i.jsx)(Vo.KE,{videoId:null!==(n=null==t?void 0:t.id)&&void 0!==n?n:""});const v=p?"secondary":"primary";return(0,i.jsx)(Ro.xV,{children:(0,i.jsx)(wo.I0,{onClick:c,label:u,variant:v,icon:h})})},Ao=(0,r.memo)((function(e){const{uniqueId:t,nicknameEllipsis:o=!1,videoId:n,teaParams:a,target:l="_self"}=e,s=(0,eo.nW)((e=>e.users[t]),Ne.bN),d=(0,bo.k)(n),{ad_info:u,item_control:c}=(0,g.L$)(d),{nickname:p,secUid:m,verified:h,stateControlledMedia:v}=(0,g.L$)(s),{shouldAvatarShowNickName:f}=(0,Ue.kb)(),{t:b,timeTranslator:x}=(0,So.T)(),_=!!u,y=null==u?void 0:u.is_normal,C=!1===(null==c?void 0:c.can_creator_redirect),k=_&&!y||C,{secret:w,forFriend:j,createTime:I,adAuthorization:P}=null!=d?d:{},{showing:S,handleCardEnter:L,handleCardLeave:T,handleItemEnter:O,handleItemLeave:B}=(0,Lo.C)(),D=(0,Do.r$)(s),{isShowLive:E}=D;(0,Do.Fu)({isShowLive:E,reportTrigger:E,user:s,enterMethod:E?"video_head_browser":"creator",autoReport:!0,reportValidator:()=>void 0!==(null==s?void 0:s.relation),once:!0});const R=(0,r.useCallback)((()=>{Te.O.handleGeneralClick("user",{scene:"video_feed"})}),[]),V=(0,Do.AL)(Object.assign({user:s,enterMethod:E?"video_head_browser":"creator",playMode:"browser_mode"},a)),F=(0,r.useMemo)((()=>Object.assign(Object.assign({},V),{author_id:V.to_user_id,group_id:n,ttamRefer:_?Jt.Hq.Photo:void 0})),[V,n,_]),A=(0,r.useMemo)((()=>{if(s)return Object.assign(Object.assign({},V),{author_id:s.id,to_user_id:s.id,group_id:n,enterMethod:"creator",ttamRefer:_?Jt.Hq.Name:void 0})}),[s,V,n,_]),z=(0,r.useMemo)((()=>({margin:"-11px 0 6px 52px"})),[]),{colors:N}=(0,Kt.u)();if(!s)return(0,et.d)(["authorInfo"]);const G=(0,Ro.CH)(E),U={uniqueId:t,secUid:m,onMouseEnter:O,onMouseLeave:B,isInBrowserMode:!0,onClick:e.onClick,onLinkClick:e.onLinkClick},q=f?p:t,H=f?t:p,W={shouldAvatarShowNickName:f},$=f?(0,i.jsx)(Ro.M8,{}):(0,i.jsx)("span",{style:{margin:"0 4px"},children:" · "});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(Ro.D_,{children:[(0,i.jsx)((({children:e})=>(0,i.jsx)(G,Object.assign({rel:"opener",target:l,teaParams:F,"data-e2e":"browse-user-avatar"},U,{adInfo:u,children:e}))),{children:(0,i.jsx)(M.i,Object.assign({needAnimation:!0,liveTheme:2,size:40},D))}),(0,i.jsxs)((({children:e})=>(0,i.jsx)(Ro.ah,Object.assign({target:l,rel:"opener",teaParams:A},U,{adInfo:u,children:e}))),{children:[(0,i.jsxs)(Ro.HI,Object.assign({},W,{children:[o?(0,i.jsx)(Ro.IW,{children:q}):q,h&&(0,i.jsx)(Po.s,{width:14,height:14,"data-e2e":"browse-bluev"})]})),(0,i.jsx)("br",{}),(0,i.jsxs)(Ro.ap,Object.assign({},W,{children:[o?(0,i.jsx)(Ro.IW,{children:H}):H,$,(0,i.jsx)("span",{children:x(1e3*Number(I))}),w&&!P&&(0,i.jsxs)(i.Fragment,{children:[$,(0,i.jsx)(Io.A,{width:16,height:16,style:{fill:N.TextPrimary,opacity:.5,margin:"0 4px"}}),(0,i.jsx)("span",{children:b("video_label_private")})]}),j&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:" · "}),(0,i.jsx)(Mo.A,{style:{margin:"0 4px"},width:20,height:20}),(0,i.jsx)("span",{className:"friend",children:b("Friends only")})]})]}))]}),!k&&(0,i.jsx)(Fo,{author:s,video:d,videoReportParams:a}),S&&!k&&(0,i.jsx)(To.t,{top:30,fixedLeft:32,onMouseEnter:L,onMouseLeave:T,uniqueId:t,onClick:R})]}),(0,i.jsx)(Oo.w,{style:z,stateControlledMedia:v,labelType:0})]})}));var zo=o(8270),No=o(7931),Go=o(10745),Uo=o(90217);const qo=(0,P.default)("div",{target:"e1mgfe70"})({width:"100%",position:"relative",flexWrap:"wrap",display:"flex"},"label:DivVideoListSkeletonContainer;"),Ho=(0,P.default)("div",{target:"e1mgfe71"})((({theme:e})=>[(0,S.mp)({marginEnd:"7.5px",direction:e.direction}),{width:"160px",height:"240px",marginBottom:"8px",background:e.colors.BGPlaceholderDefault,borderRadius:"4px"}]),"label:DivVideoItemSkeletonWrapper;"),Wo=(0,r.memo)((function({rowNum:e=3}){const t=Array.from({length:3*e},((e,t)=>t));return(0,i.jsx)(qo,{children:t.map((e=>(0,i.jsx)(Ho,{},e)))})})),$o=(0,P.default)("div",{target:"e1o3lsy80"})((({theme:{colors:e}})=>({width:"100%",boxSizing:"border-box",overflowY:"hidden",overflowX:"hidden",flexGrow:1,position:"relative",display:"flex",flexDirection:"column",background:e.BGCreation3,borderTop:`1px solid ${e.LineSecondary}`})),"label:DivListContainer;"),Ko=(0,P.default)("div",{target:"e1o3lsy81"})({width:"100%",overflowY:"auto",overflowX:"hidden",position:"relative",":first-of-type":{paddingTop:"20px"},paddingInlineStart:"23.5px",flexWrap:"wrap",display:"flex"},"label:DivVideoListContainer;");var Yo=o(10084),Xo=o(71334),Qo=o(38739),Jo=o(28050),Zo=o(95628),en=o(91842),tn=o(17781);const on=(0,P.default)("img",{target:"eadndt60"})((({theme:{colors:e}})=>({width:"100%",height:"100%",objectFit:"cover",background:e.BGPlaceholderDefault})),"label:ImgCover;"),nn=(0,P.default)("img",{target:"eadndt61"})({width:"100%",height:"100%",objectFit:"cover",transition:"transform 150ms linear",":hover":{transform:"scale(1.1)"}},"label:ImgPoster;"),rn=(0,P.default)("div",{target:"eadndt62"})({width:"100%",height:"239px",position:"relative",borderRadius:"4px",marginBottom:"8px",overflow:"hidden"},"label:DivCoverContainer;"),an=(0,P.default)("div",{target:"eadndt63"})({width:"100%",height:"100%",position:"absolute",left:"0",top:"0"},"label:DivPlayerWrapper;"),ln=(0,P.default)("div",{target:"eadndt64"})({position:"absolute",bottom:0,left:0,right:0},"label:DivWarnInfoPosition;"),sn=(0,P.default)("div",{target:"eadndt65"})((({theme:{direction:e}})=>[Object.assign({position:"absolute",top:"12px",color:"#fff"},(0,tn.I)()),(0,S.mp)({direction:e,end:"12px"})]),"label:DivPhotoIconContainer;"),dn=(0,P.default)("div",{target:"eadndt66"})((({theme:e})=>(0,S.mp)({marginEnd:"7.5px",direction:e.direction})),{width:"160px",height:"239px",marginBottom:"8px",cursor:"pointer"},"label:DivItemContainer;"),un=(0,P.default)("div",{target:"eadndt67"})((({theme:e,hasSolidBackground:t,hasGradientBackground:o})=>({width:"100%",height:"100%",left:"0",top:"0",backdropFilter:t?"none":"blur(50px)",background:t?e.colors.ConstBGInverse:o?"linear-gradient(180deg, #2b2b2b 0%, #000000 90%)":e.colors.SDSecondary,position:"absolute",borderRadius:"4px"})),"label:DivMask;"),cn=(0,P.default)("div",{target:"eadndt68"})((({theme:e})=>({position:"absolute",top:"50%",left:"50%",color:e.colors.ConstTextInverse,transform:"translate(-50%, -50%)",width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",background:e.colors.ConstBGContainer,borderRadius:"50px"})),"label:DivMaskContainer;"),pn=(0,P.default)("div",{target:"eadndt69"})((({theme:e})=>({position:"absolute",height:"40px",left:0,right:0,bottom:0,background:"linear-gradient(180deg, rgba(22, 24, 35, 0.0001) 2.92%, rgba(22, 24, 35, 0.3) 98.99%)",color:e.colors.ConstTextInverse,fontSize:"13px",lineHeight:"17px",padding:"12px 8px 8px 8px",display:"flex",alignItems:"center"})),"label:DivPlayCount;"),mn=(0,P.default)(en.A,{target:"eadndt610"})((({theme:e})=>(0,S.mp)({direction:e.direction,marginEnd:4})),"label:StyledPlay;"),hn=(0,r.memo)((0,r.forwardRef)((({item:e,index:t,playing:o,handleClickCreatorVid:n},a)=>{var l,s;const{video:d,authorId:u="",stats:p,statsV2:m,warnInfo:h}=(0,g.L$)(e),v=null!=m?m:p,{cover:f,playAddr:b="",zoomCover:x,bitrate:_}=(0,g.L$)(d),y=(0,ke.Nj)(Qo.Gs),[C,k]=(0,He.BI)((e=>e.isCreatorBrowserMode)),w=(0,r.useRef)(null),[j,I]=(0,r.useState)(!1),M=(0,to.Eo)(),{withNoBG:P,withLinearGradientBG:S}=(0,Ue.KS)();(0,r.useEffect)((()=>{var e,t,o,n;j&&w.current?null===(t=(e=w.current).play)||void 0===t||t.call(e):w.current&&(null===(n=(o=w.current).pause)||void 0===n||n.call(o))}),[j]);const L=(0,r.useCallback)((o=>{n&&n(o),C?k.handleCreatorModeVideoClick({creatorFeedIndex:t}):(k.handleEnterCreatorMode({creatorFeedIndex:t}),Be.G.handleCreatorPageShow({group_id:e.id,author_id:u}))}),[n,k,t,C,u,e.id]),{showVideoMask:T}=(0,jt.d)({item:null!=e?e:{},playMode:7}),O=(0,Ue.tj)(),B=(0,$e.mx)(e),{hideMaskTempVideoId:D}=(0,K.P)(wt.w),E=T&&D!==e.id,R=(0,c.w)(nt.hf),V=(0,c.w)(it.y7),F=(0,r.useMemo)((()=>{var t,o,n;return{itemId:e.id,authorId:null!==(t=e.authorId)&&void 0!==t?t:"",isScheduled:!1,autoplayStatus:0,playMode:7,isReposted:Number(null!==(n=null===(o=e.statsV2)||void 0===o?void 0:o.repostCount)&&void 0!==n?n:0)>0,enterMethod:"creator_tab"}}),[e.id,e.authorId,null===(l=e.statsV2)||void 0===l?void 0:l.repostCount]),A=(0,r.useCallback)((()=>{var e;const{currentTime:t=0,duration:o=0}=(0,g.L$)(null===(e=w.current)||void 0===e?void 0:e.getPlayerAttributes());return Object.assign(Object.assign({},F),{currentTime:t,duration:o})}),[F]),z=(0,r.useCallback)((()=>{y.handleEndedForSideCards(A())}),[y,A]),N=(0,r.useCallback)((()=>{y.handlePause(A())}),[y,A]),G=(0,r.useCallback)((()=>{y.handleWaiting(A())}),[y,A]),U=(0,r.useCallback)((()=>{I(!0),y.handleTimeUpdateForSideCards(A())}),[y,A]),q=(0,r.useCallback)((()=>{I(!1),y.handlePause(A())}),[y,A]),H=(0,r.useCallback)((t=>{E||(t.preventDefault(),t.stopPropagation(),e&&(R.removeBlockVideo(e.id),V.removeBlockVideo(e.id)))}),[R,V,e,E]),W=(0,K.P)(nt.hf,{selector:e=>e.blockedVideos||[],dependencies:[]}),$=(0,K.P)(it.y7,{selector:e=>e.blockedVideos||[],dependencies:[]}),Y=E||W.includes((null==e?void 0:e.id)||"")||$.includes((null==e?void 0:e.id)||""),X=!Y&&o;return(0,i.jsx)(dn,{onClick:L,ref:a,children:(0,i.jsxs)(rn,{onMouseEnter:U,onMouseLeave:q,children:[(0,i.jsx)(on,{src:(null==x?void 0:x[480])||f}),!j||Y||X?null:(0,i.jsx)(an,{children:B?(0,i.jsx)(nn,{src:null!==(s=null==x?void 0:x[480])&&void 0!==s?s:f}):(0,i.jsx)(Zo.e,{ref:w,horizontal:!1,itemMute:!0,muteSetting:lt.T5[7].forceMute,defaultMute:lt.T5[7].defaultMute,playProgress:0,src:b,onEnded:z,onPause:N,onWaiting:G,bitrate:Number(_)})}),!O&&(null==h?void 0:h[0])&&(0,i.jsx)(ln,{children:(0,i.jsx)(bt.Q,{needExtraBottom:!0,info:null==h?void 0:h[0]})}),B&&(0,i.jsx)(sn,{children:(0,i.jsx)(Yo.N,{size:20})}),X&&(0,i.jsx)(Jo.h,{}),Y&&(0,i.jsx)(un,{hasSolidBackground:P,hasGradientBackground:S,children:(0,i.jsx)(cn,{onClick:H,children:(0,i.jsx)(Xo.A,{width:"24",height:"24"})})}),!M&&(0,i.jsxs)(pn,{children:[(0,i.jsx)(mn,{width:20,height:20,fill:"#fff"}),(0,g.D1)(null==v?void 0:v.playCount)]})]})})})));var vn=o(50461);const gn=(0,r.memo)((0,r.forwardRef)((({itemList:e,onLoadMore:t,onLoadMoreBefore:o,hasMoreLatest:n,hasMorePrevious:a,hasMore:l,isLoading:s,currentItemId:d,currentAuthorId:u,handleClickCreatorVid:c},p)=>{const m=(0,He.JD)((e=>e.currentIndex)),[h,v]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!0),[_,y]=(0,r.useState)(!1),C=(0,r.useMemo)((()=>(null==e?void 0:e.length)>0),[e]),k=(0,r.useRef)(null),w=(0,r.useRef)(0),j=(0,r.useRef)(null),{currentId:I=""}=(0,g.L$)((0,f.Og)({currentIndex:m})),M=(0,g.L$)((0,K.P)(St.k,{selector:e=>e[I],dependencies:[I]}));(0,r.useEffect)((()=>{C&&Be.G.handleCreatorTabLoadComplete({group_id:d,author_id:u})}),[C]),(0,r.useEffect)((()=>{x(!0)}),[I]),(0,Go.O9)({elemRef:k,onHitBottom:t,isFirstRender:b}),(0,Go.yE)({elemRef:k,scrollTopRef:w,onHitTop:o,isFirstRender:b});const P=(0,r.useCallback)((()=>{var e;j.current&&(v(!1),null===(e=k.current)||void 0===e||e.scrollTo({top:j.current.offsetTop,behavior:"smooth"}))}),[]),S=(0,r.useCallback)((()=>{Be.G.handleClickPlayNow({group_id:d,author_id:u}),P()}),[d,u,P]);let L;k.current&&(L=k.current.getBoundingClientRect()),(0,Uo.B)({intersectionHandler:()=>{v(!1),b&&x(!1)},outerSectionHandler:()=>{if(b)x(!1),P();else if(j.current){v(!0);const{top:e,bottom:t}=j.current.getBoundingClientRect();t-47.800000000000004<L.top?y(!0):e+47.800000000000004>L.bottom&&y(!1)}},element:j,threshold:[b?.9:.2]});const T=3-e.length%3,O=Array.from({length:3===T?0:T},((e,t)=>t));return(0,i.jsxs)($o,{ref:p,children:[(0,i.jsxs)(Ko,{ref:k,children:[!e.length&&s?(0,i.jsx)(Wo,{rowNum:3}):null,s&&e.length>0&&n?(0,i.jsx)(Wo,{rowNum:1}):null,e.map(((e,t)=>((e,t,o)=>e?(0,i.jsx)(hn,{ref:(null==M?void 0:M.id)===e.id?o:null,playing:(null==M?void 0:M.id)===e.id,index:t,item:e,handleClickCreatorVid:c},e.id):null)(e,t,j))),s&&e.length>0&&l&&0!==T&&O.map((e=>(0,i.jsx)(Ho,{},e))),s&&e.length>0&&(a||l)?(0,i.jsx)(Wo,{rowNum:1}):null]}),h&&(0,i.jsx)(vn.x,{onClick:S,isUp:_})]})})));var fn=o(93638),bn=o(39415),xn=o(11072),_n=o(35043),yn=o(62696),Cn=o(2191);const kn=(0,r.memo)((function(e){var t,o,n,a,l,u,p,m;const{item:g,itemListKey:b,prefetchId1:x="",prefetchId2:_="",teaParams:y,videoReportParams:C,onBrowserModeClose:k,handleClickCreatorVid:w,videoCount:j=0}=e,{id:I,author:M="",scheduleTime:P,music:S,ad_info:L,item_control:T}=g,O=(0,kt.yS)(null==g?void 0:g.author),{user:B,abTestVersion:D}=null!==(t=(0,s.W)((()=>["user","language","abTestVersion"]),[]))&&void 0!==t?t:{},{allowRightPanelScroll:E,shouldOptimizeCta:R,shouldShowCommentsCnt:V}=(0,Ue.kb)(),{isOpenNewTab:F}=(0,Ue.M4)(),A=(0,Ge.MQ)(),z=null!==(o=(0,d.qt)(D,"browser_mode_encourage_login"))&&void 0!==o?o:"v1",{isCreatorBrowserMode:N,currentIndex:G}=(0,He.JD)((e=>({isCreatorBrowserMode:e.isCreatorBrowserMode,currentIndex:e.currentIndex})),Ne.bN),{creatorTabVidList:U,hasMoreLatest:q,hasMorePrevious:H,creatorTabLoading:W,statusCode:$,listLength:K}=(0,bn.ag)((e=>{var t,o,n;return{creatorTabVidList:e.browserList,hasMorePrevious:null!==(t=e.hasMorePrevious)&&void 0!==t&&t,hasMoreLatest:null!==(o=e.hasMoreLatest)&&void 0!==o&&o,creatorTabLoading:e.loading,statusCode:e.statusCode,listLength:null!==(n=null==e?void 0:e.list.length)&&void 0!==n?n:0}}),Ne.bN),[{creatorTabItemList:Y}]=(0,c.S)(St.k,{selector:e=>({creatorTabItemList:U.filter((t=>{var o;return(null===(o=e[t])||void 0===o?void 0:o.authorId)===(null==O?void 0:O.id)})).map((t=>e[t]))}),dependencies:[U]}),X=(0,h.s)(),{prefixText:Q,loginText:J,endText:Z}=(0,f.ih)(),ee=(0,xn.M)(g.id)&&A,te=(0,xn.sX)(g.id),oe=(0,r.useRef)(I),[ne,ie]=(0,r.useState)(!1),[re,ae]=(0,r.useState)(0),le=Boolean(B),se=b?_n.FB[b]:999,{nickname:de=""}=null!=O?O:{},ue=!!L,ce=!1===(null==T?void 0:T.can_comment),pe=F?"_blank":"_self",me=(0,yn.V)({item:g,showTranslation:te}),he=(0,r.useMemo)((()=>{var e;if((null===(e=g.event)||void 0===e?void 0:e.event_id)&&g.event.event_start_time)return{eventId:g.event.event_id,eventStartTime:Number(g.event.event_start_time),authorId:M,groupId:I}}),[g]),ve=(0,r.useMemo)((()=>3===(null==g?void 0:g.itemCommentStatus)||3===(null==O?void 0:O.commentSetting)),[(null==O||O.commentSetting,null==g?void 0:g.itemCommentStatus)]),ge=(0,r.useMemo)((()=>(0,Nt.qY)(O,null==B?void 0:B.uid)),[O,null==B?void 0:B.uid]),fe=!1===(null==T?void 0:T.can_creator_redirect),be=Y[Y.length-1],xe=Y[0],_e=`${Q}${J}${Z}`,ye=0===re,Ce=1===re,ke=E&&!ve&&!Ce,we=X("pcWeb_login_browserMode"),je=(0,r.useMemo)((()=>({author_id:M,group_id:I})),[M,I]),Ie=(0,r.useMemo)((()=>{var e;return{author_id:M,group_id:I,music_id:null!==(e=null==S?void 0:S.id)&&void 0!==e?e:""}}),[M,I,null==S?void 0:S.id]),Me=(0,r.useCallback)((()=>{ie(!0)}),[]),Pe=(0,r.useCallback)((()=>{ie(!1)}),[]),Se=(0,f.V0)({id:I,authorId:null!==(n=null==B?void 0:B.uid)&&void 0!==n?n:"",playMode:"browser_mode",needDispose:!1,handleCommentScrollDown:Me,handleCommentHitTop:Pe}),Le=(0,f.rw)(null!==(a=null==O?void 0:O.secUid)&&void 0!==a?a:"",1e3*Number(null!==(l=null==be?void 0:be.createTime)&&void 0!==l?l:0),!1),Oe=(0,f.rw)(null!==(u=null==O?void 0:O.secUid)&&void 0!==u?u:"",1e3*Number(null!==(p=null==xe?void 0:xe.createTime)&&void 0!==p?p:0),!0),Be=(0,r.useCallback)((()=>{(null==Se?void 0:Se.current)&&Se.current.scrollTo({top:0,behavior:"smooth"})}),[Se]),De=(0,r.useCallback)((e=>{ae(e)}),[]),Ee=(0,ut.G)({modalConfig:{query:{enter_method:"click_comment",group_id:I}},reportClickEvent:()=>{Te.O.handleGeneralClick("post_comment",{group_id:I,play_mode:"browser_mode"})}});(0,r.useEffect)((()=>{N||ae(0)}),[I,N]),(0,r.useEffect)((()=>{N&&0===re&&0===$&&H&&K-G<=3?Le():N&&0===re&&0===$&&q&&G<=1&&Oe()}),[N,G,re,Le,Oe,H,q,K,$]),(0,r.useEffect)((()=>{oe.current!==I&&Se&&Se.current&&(Se.current.scrollTop=0),oe.current=I}),[I,Se]);const Re=(0,i.jsx)(Ao,{target:pe,onClick:e=>{L||!1!==(null==T?void 0:T.can_creator_redirect)||(ze.F.destroy(),ze.F.open({content:X("ad_not_support"),duration:3}),(0,v.Gu)(e))},onLinkClick:e.onLinkClick,uniqueId:M,videoId:I,teaParams:y,nicknameEllipsis:!0}),Ve=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Gt.k,{onlyKey:I,lineClamp:2,overflowLineNum:12,showTranslation:te,children:(0,i.jsx)(Ut.g,{onBrowserModeClose:k,target:pe,onLinkClick:e.onLinkClick,item:g,showTranslation:te,e2eTag:"browse-video-desc",reportParams:y})}),ee&&(0,i.jsx)(Cn.G,{itemId:I,authorId:null!==(m=g.authorId)&&void 0!==m?m:""})]}),Fe=(0,r.useMemo)((()=>(0,i.jsx)(qt.i,{onLinkClick:e.onLinkClick,styleType:1,item:g,target:pe,e2eTag:"browse-music",teaParams:y})),[g,e.onLinkClick,pe,y]);if(P){const e=(0,i.jsxs)(i.Fragment,{children:[Re,(0,i.jsxs)(fn.Mi,{children:[Ve,(0,i.jsxs)(fn.qF,{children:[(0,i.jsx)($t.P,{target:pe,item:g}),(0,i.jsx)(Ht.a,{item:g})]}),(0,i.jsx)(fn.Ys,{scheduledTime:Number(P),height:22,fontSize:16,iconSize:20,iconMargin:4})]})]});return(0,i.jsxs)(fn.wV,{children:[(0,i.jsx)(fn.ex,{shouldShowCommentsCnt:V,children:e}),(0,i.jsx)(fn.pp,{}),(0,i.jsx)(fn.hJ,{children:(0,i.jsx)(fn.rb,{children:X("scheduled_video_comment_unavailable")})})]})}const Ae=(0,i.jsxs)(i.Fragment,{children:[me&&(0,i.jsx)(fn.a_,{children:me}),Ve,he&&(0,i.jsx)("div",{style:{marginTop:"8px"},children:(0,i.jsx)(zt._,{eventList:[he]})}),Fe,(0,i.jsx)(Wt.gF,{item:g,target:pe,playMode:2,poiTeaParams:je,capcapAnchorTeaParams:Ie,onLinkClick:e.onLinkClick,pageType:se})]}),qe=(0,i.jsx)(ko,{itemId:I,onEmbedModalVisibleChange:e.onEmbedVisibleChange,teaParams:y,onTabChange:De,activeTab:re}),We=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(fn.ex,{children:[Re,(0,i.jsx)(fn.Mi,{shouldOptProfile:!0,children:Ae})]}),(0,i.jsx)(fn.Mi,{shouldOptimizeCta:R,children:qe})]}),$e=j>1?(0,i.jsx)(wo.I0,{variant:"primary",size:"medium",label:we}):(0,i.jsx)(fn.VW,{children:we}),Ke="v1"===z?(0,i.jsx)(fn.hJ,{onClick:Ee,children:(0,i.jsx)(fn.mB,{children:_e})}):(0,i.jsx)(fn.oH,{onClick:Ee,children:"v2"===z?(0,i.jsx)(fn.VW,{children:we}):$e});return(0,i.jsx)(pt.t,{isMobile:!1,componentName:"browser-mode-content",children:(0,i.jsxs)(fn.wV,{optDescription:!0,noPaddingTop:ke,children:[ke?null:We,ye&&(ve&&!ce?(0,i.jsx)(fn.rb,{"data-e2e":"comment-turned-off",children:X("comment_off")}):(0,i.jsx)(pt.t,{isMobile:!1,componentName:"browser-mode-comment-list",children:(0,i.jsx)(zo.QM,{itemId:I,onClose:e.onClose,prefetchId1:x,prefetchId2:_,disableReply:ge,creatorTabDisabled:ue||fe,ref:Se,teaParams:y,profileContent:ke?We:null,onClickScrollToTop:Be,showScrollToTop:ne,onTabChange:De,adsCommentDisabled:ce})})),ye&&(0,i.jsxs)(i.Fragment,{children:[le&&!ve&&!ce&&(0,i.jsx)(fn.hJ,{children:ge?(0,i.jsx)("div",{children:X("comment_disable_notfollow").replace("%@",de)}):(0,i.jsx)(No.gi,{itemId:I,teaParams:C})}),!le&&Ke]}),Ce&&(0,i.jsx)(pt.t,{isMobile:!1,componentName:"browser-mode-creator-tab",children:(0,i.jsx)(gn,{itemList:Y,hasMorePrevious:H,hasMoreLatest:q,isLoading:W,onLoadMore:Le,onLoadMoreBefore:Oe,currentPlayingItemListKey:b,currentItemId:I,currentAuthorId:M,handleClickCreatorVid:w})})]})})}));var wn=o(99129),jn=o(82668),In=o(41632),Mn=o(12674);const Pn=(0,r.memo)((function({adInfo:e}){const{button_color:t="",button_text:o,ad_id:n}=e,[a,l]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{l(!1)}),[n]),(0,i.jsxs)(Mn.OV,{"data-e2e":"ttam-ads-cta",onAnimationEnd:()=>{l(!0)},toBackground:t,animationEnd:a,children:[`${o} `," ",(0,i.jsx)(Mn.tj,{fontSize:16})]})})),Sn=(0,r.memo)((function(e){const{adInfo:t,author:o,desc:n}=e,{ad_id:a}=t,l=(0,Le.n5)({ad_info:t,play_mode:"browser_mode"});return(0,r.useEffect)((()=>{Fe.pg.handleOthershow(Object.assign(Object.assign({},l),{refer:Jt.Hq.Button}))}),[a]),(0,i.jsxs)(Mn.hr,{onClick:e=>{(0,at.Zy)({adInfo:t,refer:Jt.Hq.Button,tag:Jt.xY.BrowserMode}),e.preventDefault(),e.stopPropagation()},children:[(0,i.jsxs)(Mn.WH,{children:[(0,i.jsx)(Mn.G5,{src:null==o?void 0:o.avatarThumb}),(0,i.jsxs)(Mn.k7,{children:[(0,i.jsx)(Mn.m0,{"data-e2e":"ttam-ads-popup-title",children:null==o?void 0:o.uniqueId}),(0,i.jsx)(Mn.Qp,{"data-e2e":"ttam-ads-popup-description",children:n})]})]}),(0,i.jsx)(Pn,{adInfo:t})]})}));var Ln=o(83162),Tn=o(64116),On=o(45958),Bn=o(30018),Dn=o(36776),En=o(536);const Rn=(0,r.memo)((function(e){var t,o;const n=(0,r.useRef)(null),a=(0,r.useRef)(null),l=(0,r.useRef)(null),d=(0,r.useRef)(null),[u,c]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!0),{direction:h}=(0,Kt.u)(),g=(0,r.useRef)("0"),{user:f}=null!==(t=(0,s.W)((()=>["user"]),[]))&&void 0!==t?t:{},{hasAutoScrollButton:b}=(0,Ue.iz)(),{enableMiniPlayer:x}=(0,En.D)(),{vid:_,seek:y,videoRef:C,progressReportCallback:k,extraBottomSpace:w=!1,isXgPlayer:j,isBrowserMode:I}=e;(0,r.useEffect)((()=>{g.current=_}),[_]);const{bindDrag:M,seek:P,seekByDelta:S,videoPercent:L,duration:T,currentTime:O}=(0,Ln.u)({direction:h,progressRef:a,circleRef:l,videoId:e.vid,barRef:d,initialPercent:0,draggingStateCb:c,draggingPercentCb:y,progressReportCallback:k}),B=(0,r.useCallback)((()=>{(0,Bn.X)(`${null==f?void 0:f.uid}`)}),[null==f?void 0:f.uid]),D=(0,r.useCallback)((()=>{(0,Bn.W)(`${null==f?void 0:f.uid}`)||B(),p||m(!0)}),[null==f?void 0:f.uid,B,p]),E=(0,r.useCallback)(((e,t)=>o=>{if(9===o.keyCode)return;o.preventDefault(),o.stopPropagation();const n=lt.cb/(e||100);38===o.keyCode||39===o.keyCode?S(n,!0,t):40===o.keyCode||37===o.keyCode?S(-1*n,!0,t):36===o.keyCode?S(-1,!1,t):35===o.keyCode&&S(1,!1,t)}),[S]);if(0===O||!(null===(o=null==C?void 0:C.current)||void 0===o?void 0:o.currentCanPlay)&&j&&I)return null;const R="ltr"===h?{left:`calc(${100*L}%)`}:{right:`calc(${100*L}%)`};return(0,i.jsx)(On.c,{visible:!p,text:"webapp_seekbar_tooltip",onShow:B,children:(0,i.jsxs)(Dn.ht,{isNarrow:b,show:u,extraBottomSpace:w,onMouseDown:v.dG,onClick:D,useFullWideInNarrow:x,isDisplayForAnyWidth:!0,children:[(0,i.jsxs)(Dn.gt,{ref:n,children:[(0,i.jsx)(Dn.AK,{ref:a,onClick:P,onMouseDown:M,tabIndex:0,role:"slider","aria-label":"progress bar","aria-valuenow":L,"aria-valuetext":(0,Tn.Az)(O),onKeyDown:E(T,L)}),(0,i.jsx)(Dn.n9,{ref:l,style:R,onMouseDown:M}),(0,i.jsx)(Dn.Vi,{ref:d,style:{transform:`scaleX(${L}) translateY(-50%)`},onClick:P,onMouseDown:M})]}),(0,i.jsx)(Dn.l5,{children:"ltr"===h?`${(0,Tn.Az)(O)}/${(0,Tn.Az)(T)}`:`${(0,Tn.Az)(T)}/${(0,Tn.Az)(O)}`})]})})}));var Vn=o(48578);const Fn=(0,P.default)("div",{target:"e1exqkaz0"})({width:"28px",height:"96px",margin:"8px 6px",display:"block",position:"relative",background:"rgba(255, 255, 255, 0.12)",borderRadius:"32px"},(({theme:e})=>(0,S.oO)({theme:e,isUiOptimise:!0})),"label:DivVolumeControlContainer;"),An=(0,P.default)("div",{target:"e1exqkaz1"})((({theme:{colors:e}})=>({width:"4px",height:"80px",backgroundColor:e.ConstTextInverse5,position:"absolute",left:"12px",top:"8px",bottom:"8px",cursor:"pointer"})),"label:DivVolumeControlProgress;"),zn=(0,P.default)("div",{target:"e1exqkaz2"})((({theme:{colors:e}})=>({width:"4px",height:"80px",backgroundColor:e.ConstTextInverse,position:"absolute",left:"12px",bottom:"8px",cursor:"pointer",transform:"scaleY(0)",transformOrigin:"bottom"})),"label:DivVolumeControlBar;"),Nn=(0,P.default)("div",{target:"e1exqkaz3"})({width:"16px",height:"16px",backgroundColor:"#ffffff",borderRadius:"16px",position:"absolute",left:"6px",bottom:"0",cursor:"pointer",zIndex:1},"label:DivVolumeControlCircle;"),Gn=(0,r.memo)((0,r.forwardRef)((function({teaParams:e,setVolumeDragging:t},o){const n=(0,r.useRef)(null),a=(0,r.useRef)(null),l=(0,r.useRef)(null),s=(0,r.useRef)(!0),{mute:d,volume:u,setVolume:c}=(0,b.rq)(),p=(0,r.useCallback)(((t,o)=>{Vn.p.handleSwitchSound(Object.assign(Object.assign({},e),{playMode:2,volume_from:t,volume_to:o})),Vn.p.handleVolumeChange({volume_to:u,click_mute:!0})}),[u,e]),m=(0,r.useRef)(d);(0,r.useEffect)((()=>{m.current=d}),[d]);const{percent:h,bindDrag:g,seek:f,seekByDelta:x,update:_}=(0,Ln.M)({direction:"vertical",progressRef:n,circleRef:a,barRef:l,initialPercent:u,draggingStateCb:t,progressReportCallback:p}),y=(0,Y._g)((e=>{s.current?s.current=!1:c(e,m.current)}),[c],160);(0,r.useEffect)((()=>y(h)),[h]),(0,r.useEffect)((()=>{d||u!==lt.Lj||_(lt.Lj)}),[d,u,_]);const C=d?0:h,k=0===C?8:72*C;return(0,r.useImperativeHandle)(o,(()=>({seekByDelta:x}))),(0,i.jsxs)(Fn,{onClick:v.dG,children:[(0,i.jsx)(An,{ref:n,onClick:f,onMouseDown:g}),(0,i.jsx)(Nn,{ref:a,style:{transform:`translateY(-${k}px)`},onMouseDown:g}),(0,i.jsx)(zn,{ref:l,style:{transform:`scaleY(${C})`},onClick:f,onMouseDown:g})]})})));var Un=o(82904),qn=o(32545);const Hn=(0,P.default)("div",{target:"e12q9uh50"})((({theme:{colors:e}})=>({flex:"1 0 600px",maxWidth:"100%",background:e.ConstBGInverse,position:"relative",overflow:"hidden",padding:"0 80px"})),"label:DivMiniPlayerPlaceHolder;"),Wn=(0,P.default)("div",{target:"e12q9uh51"})({position:"absolute",left:0,top:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",alignContent:"center",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(18, 18, 18, 1)",borderRadius:"8px",overflow:"hidden"},"label:DivMiniPlayerCoverContainer;"),$n=(0,P.default)("div",{target:"e12q9uh52"})({position:"absolute",display:"flex",flexDirection:"column",alignContent:"center",justifyContent:"center",alignItems:"center"},"label:DivReturnContentContainer;"),Kn=(0,P.default)(Un.A,{target:"e12q9uh53"})({width:"56px",height:"56px",marginBottom:"24px",color:"rgba(255, 255, 255, .9)",zIndex:1},"label:IconPIPReturn;"),Yn=(0,P.default)("p",{target:"e12q9uh54"})((({theme:e})=>[(0,S.zy)({theme:e}),(0,S.mp)({direction:e.direction,end:"16px"}),{fontSize:"24px",fontWeight:"500",lineHeight:"21.55px",color:"rgba(255, 255, 255, .9)",marginBottom:"24px",zIndex:1}]),"label:PReturnText;"),Xn=(0,P.default)(wo.I0,{target:"e12q9uh55"})((({theme:e})=>[(0,S.mp)({direction:e.direction}),{fontSize:"16px",fontWeight:"500",lineHeight:"20.8px",padding:"13.5px 24px",minWidth:"56px",zIndex:1,height:"48px",borderRadius:"8px"}]),"label:ButtonReturn;"),Qn=(0,P.default)(qn.x,{target:"e12q9uh56"})({position:"absolute",filter:"blur(5px)",opacity:"0.3"},"label:StyledVideoBlurBackground;"),Jn=(0,r.memo)((function(e){var t;const o=(0,We.Dy)(),{playMode:n,item:a}=e,{originCover:l=""}=null!==(t=null==a?void 0:a.video)&&void 0!==t?t:{},s=(0,r.useMemo)((()=>({cover:l,quality:"720"})),[l]),{showMiniPlayerName:d}=(0,En.D)(),u=(0,h.s)(),c=(0,r.useCallback)((e=>{(0,v.Gu)(e),o.closeMiniPlayer({playMode:n,enter_method:"click_button"})}),[o,n]);return(0,i.jsx)(Hn,{children:(0,i.jsxs)(Wn,{children:[(0,i.jsx)(Qn,{video:s,objectFit:"contain"}),(0,i.jsxs)($n,{children:[(0,i.jsx)(Kn,{}),(0,i.jsx)(Yn,{children:u(d?"WebApp_miniplayer_turnedOn":"pcWeb_floatingPlayer_on")}),(0,i.jsx)(Xn,{label:u("pcWeb_miniPlayer_turnOff_cta"),variant:"const",onClick:c,size:"medium"})]})]})})}));var Zn=o(77170),ei=o(38771),ti=o(8641),oi=o(43097),ni=o(68783),ii=o(90341),ri=o(68141),ai=o(93608),li=o(87864),si=o(70461),di=o(46994),ui=o(80074),ci=o(75431);const pi=(0,P.default)("div",{target:"eegjxd40"})((({theme:{colors:e}})=>({flex:"1 0 600px",maxWidth:"100%",background:e.ConstBGInverse,position:"relative",overflow:"hidden",padding:"0 80px"})),"label:DivEndCardContainer;"),mi=(0,P.default)("div",{target:"eegjxd41"})({position:"absolute",left:0,top:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",alignContent:"center",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(18, 18, 18, 1)",borderRadius:"8px",overflow:"hidden"},"label:DivEndCardInnerContainer;"),hi=(0,P.default)("div",{target:"eegjxd42"})((({responsiveUi:e=!1,isAuthorMask:t=!1})=>[{position:"absolute",width:"100%",height:e||t?"100%":"80%",minHeight:"600px",left:0,top:0,borderRadius:"4px",display:"flex",justifyContent:"center",flexDirection:"column",zIndex:"initial",alignItems:e?"center":"unset","&.mask-exit":{opacity:1},"&.mask-exit-active":{opacity:0,transition:"opacity 233ms cubic-bezier(0.25, 0, 0.25, 1)"}}]),"label:DivVideoCountdown;"),vi=(0,P.default)("div",{target:"eegjxd43"})((({index:e})=>({cursor:"pointer",margin:"0 auto",animation:`0.3s cubic-bezier(0.25, 0, 0.25, 1) ${.066*e}s backwards show-card`,"@keyframes show-card":{"0%":{transform:"scale(0.8)",opacity:"0"},"100%":{transform:"scale(1)",opacity:"1"}}})),"label:DivItemContainer;"),gi=(0,P.default)("div",{target:"eegjxd44"})({width:"100%",position:"relative",borderRadius:"8px",marginBottom:"8px",overflow:"hidden",boxSizing:"border-box"},"label:DivCoverContainer;"),fi=(0,P.default)("img",{target:"eegjxd45"})((({theme:{colors:e}})=>({width:"100%",height:"100%",objectFit:"cover",background:e.BGPlaceholderDefault})),"label:ImgCover;"),bi=(0,P.default)("div",{target:"eegjxd46"})({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},"label:DivPlayIcon;"),xi=(0,P.default)("div",{target:"eegjxd47"})((({theme:e})=>(0,S.zy)({theme:e,fontWeight:"semiBold",color:"ConstTextInverse"})),(0,S.m4)(2),{position:"absolute",left:"8px",bottom:"40px",wordBreak:"break-word",fontSize:"16px",lineHeight:"24px"},"label:DivTitle;"),_i=(0,P.default)("div",{target:"eegjxd48"})({position:"absolute",height:"90px",left:"0",bottom:"0",width:"100%",background:"linear-gradient(180deg, rgba(22, 24, 35, 0.0001) 2.92%, rgba(22, 24, 35, 0.5) 98.99%)"},"label:DivMask;"),yi=(0,P.default)("div",{target:"eegjxd49"})((({theme:e})=>({position:"absolute",height:"40px",left:0,right:0,bottom:0,background:"linear-gradient(180deg, rgba(22, 24, 35, 0.0001) 2.92%, rgba(22, 24, 35, 0.3) 98.99%)",color:e.colors.ConstTextInverse,fontSize:"16px",fontWeight:"500",lineHeight:"17px",padding:"12px 8px 8px 8px",display:"flex",alignItems:"center"})),"label:DivPlayCount;"),Ci=(0,P.default)(ui.A,{target:"eegjxd410"})((({theme:e})=>[(0,S.mp)({direction:e.direction,marginEnd:"4px"})]),"label:StyledHeart;"),ki=(0,P.default)("div",{target:"eegjxd411"})({display:"flex",alignItems:"start",justifyContent:"center",flexWrap:"wrap",minHeight:"347px",overflow:"hidden"},"label:DivRecommendCountListContainer;"),wi=((0,ci.i7)({"0%":{strokeDasharray:"283",strokeDashoffset:"0"},"100%":{strokeDasharray:"283",strokeDashoffset:"283"}}),(0,P.default)("div",{target:"eegjxd414"})({color:"#FFF",marginBottom:"32px",fontSize:"20px",fontWeight:700},"label:DivVideoCountdownTitle;")),ji=(0,P.default)("div",{target:"eegjxd415"})({display:"flex",padding:"12.5px 46.5px",marginTop:"24px",justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:" 32px",background:"rgba(255, 255, 255, 0.20)",color:" #FFF",fontSize:"15px",fontWeight:"500",cursor:"pointer"},"label:DivVideoPlayNowBtn;"),Ii=P.default.div`
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 90px;
  height: 90px;
  font-size: 24px;
  font-weight: bold;
  color: #ffffff;
  z-index: 100;
  cursor: pointer;
`,Mi=P.default.svg`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);

  circle {
    fill: none;
    stroke-linecap: round;
    stroke-width: 4;
  }

  .circle-background {
    stroke: #ffffff;
    opacity: 0;
  }

  .circle-progress {
    stroke: #ffffff;
    stroke-dasharray: ${()=>2*Math.PI*48};
    stroke-dashoffset: ${e=>2*(1.125-e.timeRemaining/e.duration)*Math.PI*48};
    transition: stroke-dashoffset 1s linear;
  }
`,Pi={id:"X_Mark_Smallcross-679e3513",use:"X_Mark_Smallcross-679e3513-usage",viewBox:"0 0 48 48",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" id="X_Mark_Smallcross-679e3513"><path fill="white" d="M33.193 36.02a1 1 0 0 0 1.414 0l1.414-1.415a1 1 0 0 0 0-1.414l-9.192-9.193 9.192-9.192a1 1 0 0 0 0-1.414l-1.414-1.415a1 1 0 0 0-1.414 0L24 21.17l-9.192-9.193a1 1 0 0 0-1.414 0l-1.415 1.415a1 1 0 0 0 0 1.414l9.193 9.192-9.193 9.193a1 1 0 0 0 0 1.414l1.415 1.414a1 1 0 0 0 1.414 0L24 26.827z" /></symbol>'};function Si(e){const t=(0,r.useContext)(de.X);return(0,r.useLayoutEffect)((()=>(t.add(Pi),()=>{t.remove("X_Mark_Smallcross-679e3513")})),[]),(0,i.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},e,{children:(0,i.jsx)("use",{xlinkHref:"#X_Mark_Smallcross-679e3513"},void 0)}),void 0)}const Li=(0,r.memo)((({onFinish:e,onTimeUpdate:t,itemInfo:o,onCountClick:n,duration:a})=>{const[l,s]=(0,r.useState)(a),[d,u]=(0,r.useState)(!1),[c,p]=(0,r.useState)(!1),m=(0,r.useRef)(null),h=(0,li.TU)();return(0,r.useEffect)((()=>{let o=null;return!d&&h&&(o=setInterval((()=>{const n=l-1e3;n<=0?(clearInterval(o),e(),null==t||t(0),s(0)):(null==t||t(n),s(n))}),1e3)),()=>{o&&clearInterval(o)}}),[d,e,t,o,l,h]),(0,r.useEffect)((()=>{!h&&l<=3e3&&p(!0),h&&c&&(s(a),p(!1))}),[h,l,a,c]),(0,Uo.B)({element:m,threshold:[0],intersectionHandler:()=>{u(!1)},outerSectionHandler:()=>{!d&&l<=3e3?(s(8e3),u(!1)):u(!0)}}),(0,i.jsxs)(Ii,{ref:m,duration:a,timeRemaining:l,onClick:n,children:[(0,i.jsxs)(Mi,{duration:a,timeRemaining:l,children:[(0,i.jsx)("circle",{className:"circle-background",cx:"45",cy:"45",r:"43"}),(0,i.jsx)("circle",{className:"circle-progress",cx:"45",cy:"45",r:"43"})]}),(0,i.jsx)(Si,{width:48,height:48,fill:"#fff"})]})}));var Ti;!function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Big=2]="Big"}(Ti||(Ti={}));const Oi={0:{iconSize:48,cardWidth:224,cardHeight:299},1:{iconSize:48,cardWidth:260,cardHeight:347},2:{iconSize:48,cardWidth:336,cardHeight:447}},Bi=(0,r.memo)((e=>{const{item:t,size:o,index:n=0}=e,{video:{cover:a,zoomCover:l},desc:s}=t,{diggCount:d}=(0,Zn.D)(t),u=Oi[o],c=u.cardWidth,p=u.cardHeight,[m,h]=(0,r.useState)({width:c,animation:""});(0,r.useEffect)((()=>{h((e=>Object.assign(Object.assign({},e),{animation:`0.3s cubic-bezier(0.25, 0, 0.25, 1) ${.066*n}s backwards show-card`}))),window.setTimeout((()=>{h((e=>Object.assign(Object.assign({},e),{animation:"none"})))}),300+66*n+1)}),[t.id,n]);const v=(0,r.useRef)(null);return(0,i.jsx)(vi,{index:n,style:m,onClick:e.onClick,ref:v,children:(0,i.jsxs)(gi,{style:{height:p},isSmallCard:0===o,children:[(0,i.jsx)(fi,{src:(null==l?void 0:l[480])||a}),(0,i.jsx)(bi,{}),(0,i.jsx)(_i,{}),0!==o&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(xi,{children:s}),(0,i.jsxs)(yi,{children:[(0,i.jsx)(Ci,{width:16,height:16,fill:"#fff"}),(0,g.D1)(d)]})]})]})})})),Di=(0,r.memo)((e=>{var t;const{itemList:o,isFullScreen:n,onVideoCardClick:a}=e,l=(0,r.useCallback)((e=>()=>{a(e)}),[]);return(0,i.jsx)(ki,{isFullScreen:n,isResponsiveUi:!0,children:null===(t=[o[0]])||void 0===t?void 0:t.map(((e,t)=>(0,i.jsx)(Bi,{index:t,onClick:l(e.id),item:e,size:2},t)))})})),Ei=(0,r.memo)((({showRelated:e,onCloseRelatedMask:t,onCountClick:o,item:n})=>{const{isFYP:a}=(0,Ue.FT)(),{responsiveUi:l}=(0,Ue.yl)(),[s,d]=(0,r.useState)(8e3),c=(0,u.useHistory)(),p=null==n?void 0:n.author,m=null==n?void 0:n.id,v=(0,r.useCallback)((()=>{if(a)return t(),void c.push("/foryou");t()}),[c,a,t]),g=(0,r.useCallback)((e=>{d(e)}),[]),f=(0,r.useCallback)((()=>{(0,li.Eo)(),o(),p&&m&&di.a.handleCountdownExit({author_id:p,group_id:m})}),[o,p,m]),b=(0,r.useCallback)((()=>{v(),p&&m&&di.a.handlePlayNowClick({author_id:p,group_id:m})}),[v,p,m]);(0,r.useEffect)((()=>{p&&m&&e&&di.a.handleCountdownStart({author_id:p,group_id:m})}),[p,m,e]);const x=(0,h.s)();return n?(0,i.jsx)(si.A,{in:e,unmountOnExit:!0,timeout:223,classNames:"mask",children:(0,i.jsxs)(hi,{responsiveUi:l,children:[(0,i.jsx)(wi,{children:x("Web_exploreFYFRedirect_opening",{},"Opening For You feed in...%s").replace("%s",String(s/1e3))}),(0,i.jsx)(Li,{duration:8e3,itemInfo:n,onFinish:b,onTimeUpdate:g,onCountClick:f}),(0,i.jsx)(Di,{isFullScreen:!1,onVideoCardClick:v,itemList:[n]}),(0,i.jsx)(ji,{onClick:b,children:x("Web_exploreFYFRedirect_goToFYF",{},"Go to For You feed now")})]})}):null}));var Ri=o(47449),Vi=o(6752);const Fi=(0,r.memo)((({item:e})=>{const{disableEndCard:t}=(0,Ri.$c)(),o=(0,Vi.g1)(),n=(0,r.useCallback)((()=>{t(),(null==e?void 0:e.id)&&o(e.id)}),[t,e.id,o]);return(0,i.jsx)(pi,{children:(0,i.jsx)(mi,{children:(0,i.jsx)(Ei,{showRelated:!0,onCloseRelatedMask:n,onCountClick:t,item:e})})})}));var Ai=o(23237);const zi=(0,r.memo)((function({itemListKey:e,currentIndex:t,needUrlDelegate:o=!0,onCloseBrowserMode:n,onNextVideo:a,onPrevVideo:l,teaParams:u,onJumpSamePage:x,isUiOptimise:y,zIndex:C=3e3,openFocusLock:k=!0,disableUpdate:w=!1,adjacentVideoIds:j=[]}){var I,M,P,S,L,T,O;const{currentId:B="",prefetchId1:D="",prefetchId2:E="",listLength:R=0}=(0,g.L$)((0,f.Og)({currentIndex:t})),V=(0,g.L$)((0,K.P)(St.k,{selector:e=>e[B],dependencies:[B]})),{video:F,id:A,itemMute:z=!1,warnInfo:N,scheduleTime:G,subVideoMeta:U,ad_info:q,desc:H,video:{duration:W}={},logId:$}=(0,g.L$)(V),{diggCount:X,collectCount:Q,playCount:J,commentCount:Z,shareCount:ee,isReposted:te}=(0,Zn.D)(V),{playAddr:oe="",width:ne=1,height:ie=1,duration:re,bitrateInfo:ae,bitrate:le,volumeInfo:se,originCover:de,VQScore:ue=0}=(0,g.L$)(F),ce=null!==(I=null==V?void 0:V.id)&&void 0!==I?I:"",pe=(0,kt.yS)(null==V?void 0:V.author),me=null!==(M=null==V?void 0:V.downloadSetting)&&void 0!==M?M:0,he=null!==(P=null==V?void 0:V.authorPrivate)&&void 0!==P&&P,ve=`xgwrapper-2-${A}`,ge=t<R-1,{user:fe,language:be,abTestVersion:xe}=null!==(S=(0,s.W)((()=>["user","language","abTestVersion"]),[]))&&void 0!==S?S:{},{isPlayerErrorOrUnsupported:_e}=(0,st.w)(),{enabledClosedCaption:ye,isEntranceInMoreMenu:Ce}=(0,Ge.vN)(),{isUseNativePlayer:Tt}=(0,Ue.Sc)(),{withNewStyle:Ot}=(0,tt.hA)(),{enableMiniPlayer:Bt}=(0,En.D)(),{hasAutoScrollButton:Dt}=(0,Ue.iz)(),{useAutoScrollModelResult:Et}=(0,Ue.Hh)(),{isInExperiment:Rt,isBrowserMode:Vt}=(0,Ue.NV)(),{hasNonPersonalizedMenu:Ft}=(0,Ue.cE)(),zt=(0,Ue.Kj)(),Nt=(0,Ue.eu)(),Gt="v1"!==(null!==(L=(0,d.qt)(xe,"creator_center_reverse"))&&void 0!==L?L:"v2")?`/tiktokstudio/analytics/${A}?from=invideo_button`:`/analytics/video/posted/${A}?lang=${be}`,{withBlurBG:Ut,withNoBG:qt,withLinearGradientBG:Ht}=(0,Ue.KS)(),Wt=(0,c.w)(St.k),$t=(0,f.Dk)(),Kt=(0,ei.hy)(),Yt=(0,qe.FV)(),[{photoSensitiveVideosSetting:Xt,hideMaskTempVideoId:Qt},Jt]=(0,c.S)(wt.w),[Zt,{openContextMenu:eo}]=(0,ti.xx)((e=>e.contextMenuOpen),Ne.bN),[to,oo]=(0,He.BI)((e=>e.isCreatorBrowserMode)),{showToast:no,dismissToast:io}=(0,Ai.n)("top"),ro=(0,ii.eu)(),ao=(0,ii.J3)(),{actualResolution:lo}=(0,oi.qW)(),so=(0,rt.nr)(),uo=(0,oi.VL)(),{isDocumentPipSupporting:co,isMiniPlayerShowing:po}=(0,We.mE)(),{showModal:mo,hideModal:ho}=(0,_.g9)(),vo=(0,ke.Nj)(Se.A),go=(0,$e.Q4)(V),fo=(0,K.P)(nt.hf,{selector:e=>e.blockedVideos||[],dependencies:[]}),xo=(0,K.P)(it.y7,{selector:e=>e.blockedVideos||[],dependencies:[]}),_o=(0,K.P)(it.y7,{selector:e=>e.showing||!1,dependencies:[]}),yo=(0,h.s)(),{subtitleList:Co,curSubtitle:ko,handleSubtitleCallback:wo}=(0,Ge.ck)(V,"browser_mode"),{mute:jo,setMute:Io}=(0,b.ah)({playMode:2,itemMute:z}),{isMacElectronApp:Mo,isElectronApp:Po}=(0,_t.B)(),So=(0,Lt.uR)(),Lo=(0,f.DX)(e),{seekingTips:To}=(0,Ct.r)(),{handleLightenVideoControls:Oo}=(0,dt.XY)(),{handleResolutionReady:Bo}=(0,Ke.mc)(V),{showVideoMask:Do,maskType:Eo,videoMaskTitle:Ro,videoMaskDesc:Vo,icon:Fo,videoMaskFirstButtonText:Ao,videoMaskSecondButtonText:zo}=(0,jt.d)({playMode:2,item:null!=V?V:{},isLogin:Boolean(fe)}),{playbackRate:No}=(0,dt.C7)({isActive:!0,group_id:A,author_id:null!==(T=null==V?void 0:V.authorId)&&void 0!==T?T:"",playModeForTea:"browser_mode"}),{showAnalyticsButton:Go}=(0,f.WQ)(V),[Uo,qo]=(0,r.useState)(!1),[Ho,Wo]=(0,r.useState)(!0),$o=(0,r.useRef)(!1),Ko=(0,r.useRef)(null),Yo=(0,r.useRef)(!1),Xo=(0,r.useRef)(null),Qo=(0,r.useRef)(!1),Jo=(0,r.useRef)(null),Zo=(0,r.useRef)(),en=(0,r.useRef)(-1),tn=(0,r.useRef)(ri.zC),on=(0,r.useRef)(null),nn=(0,r.useRef)(!1),rn=(0,r.useRef)(-1),an=(0,r.useRef)(void 0),ln=(0,r.useRef)(-1),sn=(0,r.useRef)(0),dn=(0,r.useRef)(!1),un=(0,r.useRef)(null),cn=(0,r.useRef)(0),pn=(0,r.useRef)(-1),mn=(0,r.useRef)((new Date).getTime()),hn=(0,r.useRef)(""),vn=(0,r.useRef)([]),[gn,fn]=(0,r.useState)(!0),[bn,xn]=(0,r.useState)(!1),[_n,yn]=(0,r.useState)(!1),[Cn,Mn]=(0,r.useState)(!1),[Pn,Ln]=(0,r.useState)(0),[Tn,On]=(0,r.useState)(!1),Bn=(0,g.L$)((0,bo.k)(j[0])),Vn=(0,g.L$)((0,bo.k)(j[1])),Fn=e=>{var t;if(!e)return{};const o=(0,ni.Jl)(e);return{contentType:o?"live":"video",itemId:o?"":e.id,roomId:o?null===(t=e.liveRoomInfo)||void 0===t?void 0:t.roomID:""}},An=!!q,zn=(0,Le.n5)({ad_info:q,play_mode:"browser_mode"}),Nn=An&&!!(null==q?void 0:q.web_url)&&-1!==(null==q?void 0:q.animation_type),Un=null==q?void 0:q.vast,qn=(0,at.M2)(B,t),Hn=(0,at.A5)(B),Wn=!to&&"foryou"===e,$n=!(!q||!Un),Kn=(0,r.useMemo)((()=>{const t=["foryou","following"];return zt&&t.push("explore"),t.includes(e)}),[e]),Yn=`/promote/web/delivery?item_id=${A}&enter_from=video`,Xn=!!V.HasPromoteEntry,Qn=Do&&Qt!==ce,si=(0,$e.mx)(V),di=(0,$e.MA)(V),ui=!si&&!go,ci=(0,r.useMemo)((()=>({vqscore:ue?Number(ue):0})),[ue]),pi=Go&&!G,mi=ye&&!Ce&&!An&&!G&&!si&&!go,hi=co&&Bt&&!An&&!si&&!go,vi=z||jo?Ie.A:Me.A,gi=(0,r.useMemo)((()=>!(k&&!So&&!_o&&Lo)),[Lo,k,So,_o]),fi=(0,r.useMemo)((()=>{const{video:{bitrate:e=-1,encodedType:o="",format:n="",videoQuality:i="",encodeUserTag:r="",codecType:a="",definition:l=""}={},authorId:s="",id:d="",scheduleTime:c,adLabelVersion:p,poi:m,subVideoMeta:h,logId:v,isAd:g}=null!=V?V:{},f=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u),zn),{author_id:s,group_id:d,is_scheduled:Boolean(c),bitrate:Number(e),encodedType:o,format:n,videoQuality:i,encodeUserTag:r,codecType:a,definition:l,isPaidPartnership:2===p,poi_id:null==m?void 0:m.id,is_sub_only_video:h?1:0,isReposted:te,log_id:v,isAd:g}),to&&{enter_method:"creator_tab"}),u&&void 0!==u.index_from_just_watched&&{is_just_watched:u.index_from_just_watched===t}),u&&void 0!==u.index_from_just_watched&&{index_from_just_watched:u.index_from_just_watched-t});return Ko.current=f,f}),[V,u]),bi=(0,r.useMemo)((()=>{var e;return Object.assign(Object.assign(Object.assign(Object.assign({},u),di),zn),{poi_id:null===(e=null==V?void 0:V.poi)||void 0===e?void 0:e.id,is_sub_only_video:(null==V?void 0:V.subVideoMeta)?1:0})}),[u,V,di]),xi=(0,r.useMemo)((()=>({cover:de,quality:"720"})),[de]),_i=(ne/ie||1)>=1,yi=Boolean(null==N?void 0:N[0])||Boolean(G),Ci=si?"photo":"video",ki=(0,r.useMemo)((()=>({videoCover:xi,desc:V.desc})),[xi,V]),wi=(0,r.useMemo)((()=>({params:fi})),[fi]),{showEndCard:ji,handleVideoEndShowEndCard:Ii}=(0,li.V7)({currentIndex:t,itemListKey:e,nextItem:Vn}),Mi=(0,r.useCallback)((e=>{var t,o,n,i;9!==e.keyCode&&(e.preventDefault(),e.stopPropagation(),13===e.keyCode||32===e.keyCode?Io(!jo):38===e.keyCode||39===e.keyCode?null===(t=Jo.current)||void 0===t||t.seekByDelta(lt.QI,!1):40===e.keyCode||37===e.keyCode?null===(o=Jo.current)||void 0===o||o.seekByDelta(-1*lt.QI,!1):36===e.keyCode?null===(n=Jo.current)||void 0===n||n.seekByDelta(1,!1):35===e.keyCode&&(null===(i=Jo.current)||void 0===i||i.seekByDelta(-1,!1)))}),[jo,Io]),Pi=(0,r.useCallback)(((e="click",t)=>{Wt.postLikeVideo(Object.assign({id:ce,enter_method:e,media_type:t},u))}),[Wt,ce,u]),Si=(0,ut.G)({actionWhenUserLoggedIn:Pi,modalConfig:{query:{enter_method:"click_like",group_id:ce}},reportClickEvent:()=>{Te.O.handleGeneralClick("like",{group_id:ce,play_mode:"browser_mode"})}}),Li=(0,r.useCallback)((()=>{yn(!0)}),[]),Ti=(0,r.useCallback)((()=>{yn(!1)}),[]),Oi=(0,r.useCallback)((()=>{xn(!0)}),[]),Bi=(0,r.useCallback)((()=>{xn(!1)}),[]),Di=(0,r.useCallback)(((e,t="click")=>{e.preventDefault(),e.stopPropagation(),Io(!jo,t,di)}),[jo,di,Io]),{handleLinkClick:Ei,handleClose:Ri,handleCloseCreatorMode:Vi,handleNext:zi,handlePrev:Ni,videoPlayerRef:Gi,multimediaDesktopBizPlayerRef:Ui,usePlaybackRefactor:qi,togglePlay:Hi,noEditingContent:Wi,showLeaveModal:$i,handleConfirmLeave:Ki,handleCancelLeave:Yi,handleClickCreatorVid:Xi}=(0,f.JE)({onCloseBrowserMode:n,onNextVideo:a,onPrevVideo:l,pause:Uo,shouldPause:Qn,setPause:e=>{qo(e),$o.current=e},embedVisibleRef:Yo,group_id:ce,handleLikeClick:Si,author_id:null==V?void 0:V.authorId,itemListKey:e,onJumpSamePage:x,isPhotoMode:si,photoVideoRef:on,photoTeaParams:di,setIsShowPhoto:e=>{Wo(e)},itemMute:z}),Qi=(0,r.useCallback)((()=>{qo(!0),$o.current=!0}),[]),Ji=(0,r.useCallback)((e=>{var t,o,n,i;qi?null===(o=null===(t=Ui.current)||void 0===t?void 0:t.seek)||void 0===o||o.call(t,e):null===(i=null===(n=Gi.current)||void 0===n?void 0:n.seek)||void 0===i||i.call(n,e)}),[Gi,Ui,qi]),Zi=(0,r.useCallback)((()=>{nn.current=!0,setTimeout((()=>{nn.current=!1}),500)}),[]),er=(0,r.useCallback)((()=>{nn.current&&(Hi("click_pause"),nn.current=!1)}),[Hi]),tr=(0,ut.G)({actionWhenUserLoggedIn:(0,r.useCallback)((e=>{if(!nn.current)return;const{clientX:t,clientY:o}=e;new ct.m(t,o).emit(),Wt.postLikeVideo(Object.assign(Object.assign({id:ce,forceLike:!0},u),{enter_method:"double_tap"})),nn.current=!1}),[ce,Wt,u]),modalConfig:{query:{enter_method:"click_like",group_id:ce}},reportClickEvent:()=>{Te.O.handleGeneralClick("like",{group_id:ce,play_mode:"browser_mode"})}}),or=(0,Ze.R)((()=>({onClick:er,onDoubleClick:tr})),[tr,er]),nr=(0,Pt.v)({item:V,onShow:v.Gu,useAd:An,play_mode:"browser_mode"}),ir=(0,r.useCallback)((e=>{Yo.current=e}),[]),rr=(0,f.FQ)({handleNext:zi,handlePrev:Ni,hasNext:ge,currentIndex:t,itemListKey:e,isUiOptimise:y}),ar=(0,r.useCallback)(((e,t)=>{var o,n,i,r;Oe.$.handleSeekBarClick(Object.assign({fromPercent:e,toPercent:t,video_length:qi?null!==(n=null===(o=Ui.current)||void 0===o?void 0:o.duration)&&void 0!==n?n:0:null!==(r=null===(i=Gi.current)||void 0===i?void 0:i.duration)&&void 0!==r?r:0,is_pause:$o.current,play_mode:"browser_mode"},Ko.current))}),[Gi,Ui,qi]),lr=(0,r.useCallback)((e=>{var t,o,n,i,r,a,l,s,d,u,c,p,m,h,v,g,f,b;const x=qi?null===(t=Ui.current)||void 0===t?void 0:t.duration:null===(o=Gi.current)||void 0===o?void 0:o.duration;Kt.setVideoInfo({itemId:ce,videoPercent:e,currentTime:qi?null!==(i=null===(n=Ui.current)||void 0===n?void 0:n.currentTime)&&void 0!==i?i:0:null!==(a=null===(r=Gi.current)||void 0===r?void 0:r.currentTime)&&void 0!==a?a:0,duration:x});const _=Zo.current;if(_){const t=en.current;t<0&&e>=0?(null===(s=null===(l=tn.current)||void 0===l?void 0:l.sendImpressionEvent)||void 0===s||s.call(l,_),null===(u=null===(d=tn.current)||void 0===d?void 0:d.sendVideoEvent)||void 0===u||u.call(d,_,"start",{duration:x,mediaPlayerVolume:null==_?void 0:_.volume})):t<.25&&e>=.25?null===(p=null===(c=tn.current)||void 0===c?void 0:c.sendVideoEvent)||void 0===p||p.call(c,_,"firstQuartile"):t<.5&&e>=.5?null===(h=null===(m=tn.current)||void 0===m?void 0:m.sendVideoEvent)||void 0===h||h.call(m,_,"midpoint"):t<.75&&e>=.75?null===(g=null===(v=tn.current)||void 0===v?void 0:v.sendVideoEvent)||void 0===g||g.call(v,_,"thirdQuartile"):t<1&&e>=1&&(null===(b=null===(f=tn.current)||void 0===f?void 0:f.sendVideoEvent)||void 0===b||b.call(f,_,"complete"))}en.current=Number.isNaN(e)?-1:e}),[ce,Kt,Gi,Ui,qi,Zo]),sr=(0,r.useCallback)((()=>{var e;if($n&&(Zo.current=null===(e=null===document||void 0===document?void 0:document.getElementById(ve))||void 0===e?void 0:e.querySelector("video"),Zo.current)){const e=new ri.yy(Un),t=Zo.current;e.getVASTInfo().then((e=>{var o,n;null===(n=null===(o=tn.current)||void 0===o?void 0:o.createAdContext)||void 0===n||n.call(o,{adElement:t,adVerifications:e.adVerifications,enableContentUrl:e.enableContentUrl,itemIds:j})})).catch((e=>console.log(e)))}}),[Zo,$n,ve,j]),dr=(0,r.useCallback)((()=>{var e,t;const o=Zo.current;o&&(null===(t=null===(e=tn.current)||void 0===e?void 0:e.sendLoadEvent)||void 0===t||t.call(e,o))}),[Zo,tn]),ur=(0,r.useCallback)((()=>{clearTimeout(ln.current),sn.current=0}),[]),cr=(0,r.useCallback)((e=>{Ri(e),ur()}),[Ri,ur]),pr=(0,r.useCallback)((e=>{var t;Vi(e),ur(),Be.G.handleExitCreatorPage({group_id:ce,author_id:null!==(t=null==pe?void 0:pe.id)&&void 0!==t?t:""}),qo(!1)}),[Vi,ur,null==pe?void 0:pe.id,ce,qo]),mr=(0,r.useCallback)((e=>{if((0,v.Gu)(e),"general_sensitive"===Eo){if(dn.current)return;ge?zi(e):R>1?Ni(e):Ri(e),De._.handleMaskLayerClickSkip({scenario:"general",group_id:ce}),ze.F.open({content:yo("photosensitive_skepped_toast"),duration:3,widthType:"half"}),dn.current=!0}else Jt.setSkipPhotoSensitive({skip:!1,hasLogin:Boolean(fe)}),ur(),De._.handleMaskLayerClickWatch({scenario:"photosensitive",group_id:ce})}),[Eo,ge,R,yo,zi,Ni,Ri,Jt,ur,ce,fe]),hr=(0,r.useCallback)((e=>{if((0,v.Gu)(e),"general_sensitive"===Eo)Jt.setHideMaskTempVideoId(ce),ur(),De._.handleMaskLayerClickWatch({scenario:"general",group_id:ce});else{if(dn.current)return;ge?zi(e):1===R?(null==fe?void 0:fe.uid)===(null==V?void 0:V.authorId)&&Ri(e):Ni(e),Jt.setSkipPhotoSensitive({skip:!0,hasLogin:Boolean(fe)}),De._.handleMaskLayerClickSkip({scenario:"photosensitive",group_id:ce}),ze.F.open({content:yo("photosensitive_skepped_toast"),duration:3,widthType:"half"}),dn.current=!0}}),[Eo,Jt,ce,ur,ge,yo,zi,R,null==V?void 0:V.authorId,Ri,Ni,fe]),vr=(0,Y._g)((e=>{if(hn.current===B)return;e.stopPropagation(),pn.current&&clearTimeout(pn.current),pn.current=window.setTimeout((()=>{cn.current=0}),100);const t=(new Date).getTime(),o=e.wheelDelta||-e.deltaY||-e.detail,n=Math.max(-1,Math.min(1,o)),i=t-mn.current;cn.current=cn.current+1,mn.current=t,i>100&&1===cn.current&&(n<0?zi(e,"scroll"):Ni(e,"scroll"),hn.current=B)}),[B,zi,Ni],20),gr=(0,r.useCallback)((()=>{var e;Rt&&Yt.maybeTurnOnSharePulsing({videoId:ce,authorId:null!==(e=V.authorId)&&void 0!==e?e:""}),ro&&Wi?zi():Ii()}),[ro,zi,Wi,Yt,Rt,ce,V.authorId]),fr=(0,r.useCallback)((e=>{13!==e.keyCode&&32!==e.keyCode||nr(e)}),[]),br=(0,r.useCallback)((()=>{vo.handleClickShare({author_id:null==pe?void 0:pe.id,group_id:A,enter_method:"click_context_menu",media_type:Ci,is_sub_only_video:U?1:0}),On(!0)}),[null==pe?void 0:pe.id,A,Ci,vo,U]),xr=(0,ut.G)({actionWhenUserLoggedIn:br,modalConfig:{query:{enter_method:"click_share"}},reportClickEvent:()=>{Te.O.handleGeneralClick("share_video",{group_id:A,play_mode:"browser_mode"})}}),_r=(0,r.useCallback)((()=>{On(!1)}),[On]),yr=(0,r.useCallback)((e=>{var t,o;if(e.preventDefault(),An)return ze.F.destroy(),void ze.F.open({content:yo("ad_not_support"),duration:3});const n=["link"];si?n.push("photo"):(n.push("details"),he||0!==me||U||z||go||n.push("download"),!document.pictureInPictureEnabled||Bt&&co||n.push("pip")),Ft&&Kn&&n.push("manage-feed"),fe&&!(null==fe?void 0:fe.hasIMPermission)||n.push("share"),Ee.Z.handleContextMenu({media_type:Ci}),eo({location:{x:e.clientX,y:e.clientY},videoInfo:{downloadAddr:null!==(t=V.video.downloadAddr)&&void 0!==t?t:"",videoId:ce,author:null!==(o=null==pe?void 0:pe.uniqueId)&&void 0!==o?o:"",videoElement:e.target,videoShareHandler:xr,videoDetailsRedirectHandler:()=>oo.setShowingBrowserMode(!1),mediaType:Ci},menuOptions:n})}),[pe,ce,V,An,go,si,Ft,Kn]),Cr=(0,r.useCallback)((e=>{var t;Qo.current||9!==e.keyCode||(null===(t=Xo.current)||void 0===t||t.setAttribute("tabindex","-1"),Qo.current=!0)}),[]),kr=(0,r.useCallback)((e=>{if(!Zt){if(go){const e=no(yo("web_player_TTshopVid_toast"),{durationMs:1e4});return void vn.current.push(e)}or(e)}}),[Zt,go,or]),wr=(0,r.useCallback)((e=>{var t,o;qi?null===(t=Ui.current)||void 0===t||t.changeResolution(e):null===(o=Gi.current)||void 0===o||o.changeResolution(e),so.setDefaultResolutionAndUpdateLocalStorage(e.resolution),uo.setVideoActualResolution(e.resolution),Re.Y.resolutionChange({play_mode:"browser_mode",group_id:ce,author_id:null==V?void 0:V.authorId},lo,e.resolution)}),[Gi,Ui,qi]),jr=(0,r.useCallback)((()=>{var e;gi||null===(e=document.querySelector(`#${Lo}-${t}`))||void 0===e||e.focus()}),[t,Lo,gi]),Ir=(0,r.useCallback)((()=>Ve.d.handleClickAnalyticsVideoCover(ce)),[ce]),Mr=(0,r.useCallback)((()=>{ai.f.sendEvent("Promote_entrance_click",{enter_from:"video"})}),[]),Pr=(0,r.useCallback)((()=>{qo(!0),$o.current=!0}),[]),Sr=(0,r.useCallback)((e=>{var t;Wt.postDislikeVideo({id:ce,author_id:null!==(t=null==V?void 0:V.authorId)&&void 0!==t?t:"",play_mode:"browser_mode"}),oo.updateDeleteVideo(ce),qo(!1),(0,v.Gu)(e)}),[ce,null==V?void 0:V.authorId,Wt,oo,qo]),Lr=(0,ut.G)({actionWhenUserLoggedIn:Sr,modalConfig:{query:{enter_method:"click_dislike",redirect_url:"https://www.tiktok.com",group_id:V.id}},reportClickEvent:()=>{Te.O.handleGeneralClick("dislike",{group_id:ce,play_mode:"browser_mode"})}}),Tr=(0,r.useCallback)((()=>{ze.F.open({content:yo("Sorry, something went wrong, please try again later"),duration:3}),n()}),[]),Or=(0,r.useCallback)((()=>{var e,t;qo(!1),$o.current=!1,(null==Zo?void 0:Zo.current)&&(null===(t=null===(e=tn.current)||void 0===e?void 0:e.sendVideoEvent)||void 0===t||t.call(e,Zo.current,"resume"))}),[qo,Zo,tn]),Br=(0,r.useCallback)((()=>{var e,t;(null==Zo?void 0:Zo.current)&&(null===(t=null===(e=tn.current)||void 0===e?void 0:e.sendVideoEvent)||void 0===t||t.call(e,Zo.current,"pause"))}),[Zo,tn]),Dr=(0,r.useCallback)((e=>{var t,o;const n=Zo.current;null===(o=null===(t=tn.current)||void 0===t?void 0:t.sendVideoEvent)||void 0===o||o.call(t,n,"volumeChange",{mediaPlayerVolume:e})}),[tn]),Er=(0,r.useCallback)((()=>{var e;const t=Zo.current;t&&(null===(e=tn.current)||void 0===e||e.sendVideoEvent(t,"skipped"),setTimeout((()=>{var e,t;null===(t=null===(e=tn.current)||void 0===e?void 0:e.adSessionFinished)||void 0===t||t.call(e,Zo.current)}),3e3))}),[Zo,tn]),Rr=(0,r.useCallback)((()=>{var e,t;const o=Zo.current;o&&(null===(t=null===(e=tn.current)||void 0===e?void 0:e.sendVideoEvent)||void 0===t||t.call(e,o,"adUserInteraction"))}),[Zo,tn]),{active:Vr,handleDismissPanel:Fr,handleMouseMouseEnter:Ar,handleMouseLeave:zr}=(0,dt.rY)();return(0,r.useEffect)((()=>{var o;if(An&&"foryou"===e){const e=Fn(V),t=Fn(Bn),n=Fn(Vn);Fe.pg.handleShow(Object.assign(Object.assign({},zn),{ad_extra_data:Object.assign(Object.assign({},zn.ad_extra_data),{item_id:B,author_id:null!==(o=V.authorId)&&void 0!==o?o:"",start_pos:Hn,ad_gap:qn,content_type:e.contentType,room_id:e.roomId,before_content_type:t.contentType,before_item_id:t.itemId,before_room_id:t.roomId,after_content_type:n.contentType,after_item_id:n.itemId,after_room_id:n.roomId})}))}if(B&&"foryou"===e){const e=(0,wn.bE)($t,t);Ae.j.handleVideoContentShow({item_id:B,group_id:F.id,play_mode:"browser_mode",is_ad:An,duration:W,like_cnt:X.toString(),collect_cnt:Q.toString(),play_cnt:J.toString(),comment_cnt:Z.toString(),share_cnt:ee.toString(),request_id:$||"",order:t,following_items:JSON.stringify(Array.isArray(e)?e:[])})}}),[B,V,Bn,Vn,t]),(0,f.dD)({author:pe,item:V,currentIndex:t,itemListKey:e,needUrlDelegate:o,onCloseBrowserMode:n,disableUpdate:w}),(0,f.Oz)({showLeaveModal:$i,group_id:ce}),(0,b.Ux)(2),(0,r.useEffect)((()=>{Dt||ao.setAutoScroll(!1)}),[Dt,Et]),(0,r.useEffect)((()=>(mo(!0),()=>{ho()})),[ho,mo]),(0,r.useEffect)((()=>{var e,t,o,n,i,r,a,l,s,d;V&&(fo.includes(V.id)||xo.includes(V.id))&&(si?(null===(o=null===(t=null===(e=on.current)||void 0===e?void 0:e.audio)||void 0===t?void 0:t.pause)||void 0===o||o.call(t),null===(r=null===(i=null===(n=on.current)||void 0===n?void 0:n.swiper)||void 0===i?void 0:i.pause)||void 0===r||r.call(i,"other"),qo(!Uo)):qi?null===(l=null===(a=Ui.current)||void 0===a?void 0:a.pause)||void 0===l||l.call(a):null===(d=null===(s=Gi.current)||void 0===s?void 0:s.pause)||void 0===d||d.call(s))}),[fo,xo,si,V,Uo,Gi,Ui,qi]),(0,r.useEffect)((()=>{var e,t;(null==V?void 0:V.video)&&!(null==V?void 0:V.isContentClassified)||(n({fromPopState:w,playProgress:qi?null===(e=Ui.current)||void 0===e?void 0:e.currentTime:null===(t=Gi.current)||void 0===t?void 0:t.currentTime}),(null==V?void 0:V.isContentClassified)&&(ze.F.destroy(),ze.F.open({content:yo("cc_webapp_age_video_details_body"),duration:3,widthType:"half"})))}),[V,n,Gi,w,yo,Ui,qi]),(0,r.useEffect)((()=>{var e,o,n,i,r,a,l,s;Qn||(qi?null===(o=null===(e=Ui.current)||void 0===e?void 0:e.play)||void 0===o||o.call(e):null===(i=null===(n=Gi.current)||void 0===n?void 0:n.play)||void 0===i||i.call(n),ur()),t!==rn.current&&(-1!==rn.current&&(Jt.setHideMaskTempVideoId(""),gn&&fn(!1),dn.current=!1),ur(),void 0===Xt&&"photo_sensitive"===an.current&&Jt.setSkipPhotoSensitive({skip:!1,hasLogin:Boolean(fe)}),Do?("photo_sensitive_denied"===Eo?De._.handleShowPhotosensitiveRemoved({group_id:ce}):De._.handleShowMaskLayer({scenario:"general_sensitive"===Eo?"general":"photosensitive",group_id:ce}),ln.current=window.setInterval((()=>{var e,t,o,n,i,r;sn.current++>100&&ur(),!qi&&(null===(e=Gi.current)||void 0===e?void 0:e.currentCanPlay)&&(null===(o=(t=Gi.current).pause)||void 0===o||o.call(t),ur()),qi&&(null===(n=Ui.current)||void 0===n?void 0:n.currentCanPlay)&&(null===(r=(i=Ui.current).pause)||void 0===r||r.call(i),ur())}),50)):qi?null===(a=null===(r=Ui.current)||void 0===r?void 0:r.play)||void 0===a||a.call(r):null===(s=null===(l=Gi.current)||void 0===l?void 0:l.play)||void 0===s||s.call(l),rn.current=t,an.current=Eo)}),[Do,Qn,Gi,Ui,qi,t,Eo,Jt,Xt,ur,gn,Qt,ce,ao,fe]),(0,r.useEffect)((()=>{Ln(Pn+1)}),[A]),(0,r.useEffect)((()=>{Xn&&ai.f.sendEvent("Promote_entrance_show",{enter_from:"video"})}),[Xn]),(0,r.useEffect)((()=>{Oo()}),[]),(0,r.useEffect)((()=>{if(go){Wo(!1);const e=no(yo("web_player_TTshopVid_toast"),{durationMs:1e4});vn.current.push(e)}return()=>{vn.current.forEach((e=>{io(e)}))}}),[go,A]),(null==V?void 0:V.video)?(0,i.jsx)(p.Ay,{disabled:gi||So,onDeactivation:jr,children:(0,i.jsx)(pt.t,{isMobile:!1,onCatchError:Tr,componentName:"browser-mode",children:(0,i.jsxs)(In._P,{tabIndex:0,ref:Xo,onKeyDown:Cr,role:"dialog","aria-modal":!0,style:{zIndex:C},children:[ji&&(0,i.jsx)(Fi,{item:Vn}),po&&(0,i.jsx)(Jn,{playMode:2,item:V}),_e&&(0,i.jsxs)(mt.I,{playMode:2,item:V,children:[rr,(0,i.jsx)(In.Mu,{onClick:cr,onMouseDown:v.dG,isUiOptimise:y,needOffset:Mo,role:"button","aria-label":yo("Close"),children:(0,i.jsx)(m.A,{width:18,height:18,fill:"#fff"})})]}),!po&&!_e&&!ji&&(0,i.jsxs)(In.Ii,{isUiOptimise:y,withLinearGradientBG:Ht,onWheel:vr,ref:un,onClick:kr,onMouseDown:Zi,onMouseMove:Oo,children:[Ot&&(0,i.jsxs)(In.sh,{useNarrowSearchBar:to,children:[(0,i.jsx)(In.TP,{useNarrowSearchBar:to}),(0,i.jsx)(ot.v,{onBrowserModeClose:Ri,isBrowserMode:!0})]}),!qt&&(0,i.jsx)(In.cR,{video:xi,withBlurBG:Ut,withLinearGradientBG:Ht}),(0,i.jsxs)(In.iH,{isUiOptimise:y,onContextMenu:yr,children:[ui?(0,i.jsxs)(i.Fragment,{children:[qi?(0,i.jsx)(Ye.o,{ref:Ui,id:A,url:oe,horizontal:_i,mode:2,index:t,muted:Boolean(z),duration:re,bitrateInfo:ae,bitrate:Number(le),onVideoError:Qi,onTimeUpdate:lr,onVideoEnded:gr,e2eTag:"browse-video",playbackRate:No,posterConfig:ki,teaConfig:wi,videoQualityConfig:ci,subtitleList:Co,curSubtitle:ko,onSubtitleCallback:wo,onResolutionReady:Bo},A):(0,i.jsx)(Mt.K,{videoCover:xi,horizontal:_i,mode:2,ref:Gi,desc:V.desc,id:A,playUrl:oe,index:t,itemMute:Boolean(z),duration:re,bitrateInfo:ae,bitrate:Number(le),teaParams:fi,onVideoError:Qi,onTimeUpdate:lr,onVideoEnded:gr,onVideoPlay:Or,onLoadStart:sr,onLoadedData:dr,onVideoPause:Br,onVolumeChange:Dr,onVideoUnmount:Er,onUserHandlePlayVideo:Rr,onUserHandlePauseVideo:Rr,e2eTag:"browse-video",volumeInfo:se,playbackRate:No,itemListKey:e,adInfo:q,subtitleList:Co,curSubtitle:ko,onSubtitleCallback:wo,onResolutionReady:Bo},A),!An&&(0,i.jsx)(Rn,{seek:Ji,videoRef:qi?Ui:Gi,vid:A,progressReportCallback:ar,extraBottomSpace:yi,isXgPlayer:!Tt,isBrowserMode:!0,playbackRate:No}),To]}):Ho&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ht.Y,{ref:on,playMode:2,item:V,teaParams:fi,index:t,onTimeUpdate:lr,onFinish:zi}),(0,i.jsx)(jn._,{photoVideoRef:on,item:V})]}),(0,i.jsx)(Dn.Zx,{onMouseDown:v.dG,widerBottom:yi,children:(0,i.jsx)(In.II,{children:(0,i.jsx)(vt.S,{playMode:2,item:V})})}),(0,i.jsx)(Dn.p5,{onMouseDown:v.dG}),fo.includes(V.id||"")||xo.includes(V.id||"")?(0,i.jsx)(gt.X,{item:V,zIndex:1,styleContainer:In.O8,styleMaskTitle:In.CY,styleMaskDetail:In.$2,onClickShowVideo:Pr}):null,Qn&&(0,i.jsx)(It.u,{playMode:2,icon:Fo,title:Ro,desc:Vo,firstButtonText:Ao,secondButtonText:zo,onClickFirstButton:mr,onClickSecondButton:hr})]}),(Uo||go)&&(0,i.jsx)(In.rh,{width:70,height:70,fill:"#fff"}),An&&Nn&&(0,i.jsx)(Sn,{adInfo:q,author:pe,desc:H}),!to&&(0,i.jsx)(In.Mu,{onClick:cr,onMouseDown:v.dG,isUiOptimise:y,needOffset:Mo,role:"button","aria-label":yo("Close"),children:(0,i.jsx)(m.A,{width:18,height:18,fill:"#fff"})}),to&&(0,i.jsx)(In.Jr,{onClick:pr,onMouseDown:v.dG,needOffset:Mo,role:"button","aria-label":yo("Close"),children:(0,i.jsxs)(In.F3,{children:[(0,i.jsx)(m.A,{width:18,height:18,fill:"#fff"}),(0,i.jsx)(In.QN,{children:yo("pc_web_browser_creatorVid_exit")})]})}),mi&&(0,i.jsx)(In.Rq,{onMouseDown:v.dG,widerBottom:yi,showMiniPlayer:hi,children:(0,i.jsx)(Xe.k,{playMode:"browser_mode",useLargeToggle:!0,item:V})}),hi&&(0,i.jsx)(In.xS,{onMouseDown:v.dG,widerBottom:yi,children:(0,i.jsx)(Qe.W,{videoId:A,itemListKey:to?"creator_tab":e,useLargeToggle:!0,playMode:2,playModeForTea:"browser_mode",index:t,prevPlayerRef:qi?Ui:Gi})}),(0,i.jsxs)(In.oK,{widerBottom:yi,onMouseEnter:Oi,onMouseLeave:Bi,onMouseDown:v.dG,children:[!z&&(bn||Cn||_n)?(0,i.jsx)(Gn,{teaParams:di,setVolumeDragging:Mn,ref:Jo}):null,(0,i.jsx)(In.kn,{onClick:Di,onKeyDown:Mi,onFocus:Li,onBlur:Ti,widerBottom:yi,isUiOptimise:y,tabIndex:0,role:"button","aria-label":yo("pc_web_volume_btn"),children:(0,i.jsx)(vi,{width:40,height:40,fill:"none"})})]}),rr,Wn||Nt?(0,i.jsxs)(In.es,{tabIndex:0,onMouseEnter:Ar,onMouseLeave:zr,onClick:v.dG,children:[(0,i.jsx)(we.A,{width:24,height:24}),(0,i.jsx)(ft._,{itemId:ce,authorId:null!==(O=null==V?void 0:V.authorId)&&void 0!==O?O:"",active:Vr,isBrowserMode:!0,playModeForTea:"browser_mode",showNotInterested:Wn,onDismissPanel:Fr,onClickReport:nr,onClickNotInterested:Wn?Lr:void 0,onSelectResolution:wr})]}):(0,i.jsxs)(In.lG,{onClick:nr,isUiOptimise:y,role:"button","aria-label":yo("pc_web_report_btn"),tabIndex:0,onKeyDown:fr,id:"browser-mode-report-btn",children:[(0,i.jsx)(In.fJ,{width:16,height:15}),yo("Report")]}),(0,i.jsxs)(In.RK,{children:[pi&&(0,i.jsxs)(In.jc,{href:Gt,target:Po?"_blank":"_self",onClick:Ir,children:[(0,i.jsx)(Pe.A,{width:20,height:20,fill:"#fff",style:{marginInlineEnd:"6px"}}),yo("view_analytics")]}),Xn&&(0,i.jsxs)(In.jc,{href:Yn,target:Po?"_blank":"_self",onClick:Mr,children:[(0,i.jsx)(je.A,{width:20,height:20,fill:"#fff",style:{marginInlineEnd:"6px"}}),yo("Promote_web_entrance_video")]})]}),(null==N?void 0:N[0])&&(0,i.jsx)(In.zm,{children:(0,i.jsx)(bt.Q,{info:N[0]})}),Boolean(G)&&(0,i.jsx)(In.zm,{children:(0,i.jsx)(xt.Z,{isTextAlignStart:!0,scheduledTime:Number(G),height:56,fontSize:14,iconSize:18.33,iconMargin:4.83})}),Vt&&(0,i.jsx)(In.cA,{widerBottom:yi,children:(0,i.jsx)(Je.w,{item:V,playMode:2})})]}),(0,i.jsx)(kn,{item:V,onBrowserModeClose:Ri,prefetchId1:D,prefetchId2:E,teaParams:bi,onLinkClick:Ei,onEmbedVisibleChange:ir,videoReportParams:fi,onClose:Ri,itemListKey:e,handleClickCreatorVid:Xi,videoCount:Pn}),(0,i.jsx)(At,{visible:$i,needLeaveCheck:!Wi,onConfirmLeave:Ki,onCancelLeave:Yi}),Tn&&(0,i.jsx)(yt.k,{visible:Tn,videoId:A,onClose:_r})]})})}):(0,et.d)(["item.video"])}));var Ni=o(45297),Gi=o(57381);var Ui=o(35014),qi=o(65852),Hi=o(16085),Wi=o(92597),$i=o(36825),Ki=o(28369),Yi=o(66994),Xi=o(8877),Qi=o(22174),Ji=o(69794);const Zi=(0,o(81054).Ay)({resolved:{},chunkName:()=>"immersive-player",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!o.m[t]},importAsync:()=>Promise.all([o.e(4434),o.e(6896),o.e(5468),o.e(530)]).then(o.bind(o,67807)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return o(t)},resolve:()=>67807}),er=(e,t=!0,o=3e3)=>c=>{var p;const m=function(e,t=!0,o=3e3){return function(n){const c=l=>{var c,p;const{itemListKey:m,currentIndex:v,closeBrowserMode:g,isLiveBrowserShowing:f,isBrowserModeShowing:b,disableUpdate:x,showBrowserMode:_,teaParams:y,enterFrom:C}=(0,Ce.m)(),k=(0,He.YZ)(),w=(0,a.b1)(),j=(0,s.W)((()=>["abTestVersion"]),[]),I=null!==(c=(0,d.qt)(null==j?void 0:j.abTestVersion,"search_video"))&&void 0!==c?c:"v1",{user:M}=null!==(p=(0,s.W)((()=>["user"]),[]))&&void 0!==p?p:{},P=k.getAdjacentVideoInfo(),S=Boolean(M),L=("general_search"===C||"search_video"===C)&&!S,T=(0,r.useCallback)((({playProgress:e,fromPopState:o,shouldPause:n}={})=>{g({playProgress:e,shouldPause:n}),!o&&t&&window.history.back()}),[g]),O=(0,r.useCallback)((()=>{k.setClickSamePage()}),[k]);!function(e){const t=(0,r.useRef)(),o=(0,u.useHistory)();(0,r.useEffect)((()=>{var n,i;const r=null!==(i=null===(n=null==o?void 0:o.location)||void 0===n?void 0:n.pathname)&&void 0!==i?i:"";r&&t.current!==r&&(null==e||e(t.current),t.current=r)}),[o,e])}((()=>{b&&g(void 0)})),(0,r.useEffect)((()=>{k.setItemListKey(e)}),[k]),(0,r.useEffect)((()=>{(0,_e.uQ)(ye.Y.BrowseModeRerender)}));const B=(0,r.useMemo)((()=>({closeBrowserMode:g,showBrowserMode:_,isBrowserModeShowing:b,isLiveBrowserShowing:f})),[g,b,f,_]),D=(0,r.useCallback)((()=>{(0,_e.uQ)(ye.Y.PlayerChange),5!==v||!L||"v3"!==I&&"v4"!==I?k.handleNextVideo():w.openModal({isSignup:!1,query:{redirect_url:window.location.href,enter_method:"click_top_bar",enter_from:C,type:"loginsearchmore"}})}),[v,w,I,C,L,k]),E=(0,r.useCallback)((()=>{(0,_e.uQ)(ye.Y.PlayerChange),k.handlePrevVideo()}),[k]);return function(){const e=(0,h.s)(),[{statusCode:t,statusMessage:o,action:n,toastNotShown:i},a]=(0,Gi.W)((({statusCode:e,statusMessage:t,action:o,toastNotShown:n})=>({statusCode:e,statusMessage:t,action:o,toastNotShown:n})),Ne.bN);(0,r.useEffect)((()=>{if(!i)return;let r;switch(t){case 0:"delete"===n&&(r=e("deleted"));break;case 2752:r=o;break;case 2054:r=e("video_unavailable_deleted");break;default:r=e(Ni.z$)}ze.F.destroy(),ze.F.open({content:r,duration:3,widthType:"half"}),a.clearBrowserModeStatus()}),[e,i,t,o,n,a])}(),(0,i.jsxs)(Ce.g.Provider,{value:B,children:[(0,i.jsx)(n,Object.assign({},l)),f?(0,i.jsx)(xe,{itemListKey:m,currentIndex:v,zIndex:o,onCloseBrowserMode:T,onNextVideo:D,onPrevVideo:E}):b&&(0,i.jsx)(zi,{isUiOptimise:!0,disableUpdate:x,itemListKey:m,currentIndex:v,onNextVideo:D,onPrevVideo:E,needUrlDelegate:t,zIndex:o,onCloseBrowserMode:T,teaParams:y,onJumpSamePage:O,adjacentVideoIds:P})]})};return c.displayName=`WithBrowserMode(${(0,l.x)(n)})`,c}}(e,t,o)(c),v=(({itemListKey:e})=>t=>{var o;const i=o=>{const{isCommentsDefaultOpen:i}=(0,Ki.uA)(),[a,l]=(0,He.BI)((e=>e.showingBrowserMode),Ne.bN),[{isImmersivePlayerOpen:s},d]=(0,Hi.vZ)((e=>({isImmersivePlayerOpen:e.isOpen})),Ne.bN),{selectedTab:u}=(0,Xi.R0)((e=>({selectedTab:e.selectedTab})),Ne.bN),c=(0,$i.w)(e).list,{enterTimeRef:p,closeImmersivePlayer:m}=(0,Ji.Cd)(),h=(0,Ui.J)(),{isUserPage:v}=(0,Yi.eK)(),g=(0,r.useMemo)((()=>"foryou"===e||"friends"===e||"following"===e),[]);(0,r.useEffect)((()=>{s!==a&&l.setShowingBrowserMode(s)}),[l,s,a]);const f=(0,r.useCallback)(((t,o,n,r)=>{const a={index:t,itemListSourceConfig:n?{mode:"id",source:"user-playlist",id:n}:{mode:"single",itemListKey:null!=o?o:v?u:e},isCommentsOpen:g||i,teaParams:r};return!!(0,Wi.D)(e)||(a.id=c[t]),a}),[d,i,g,v,u,c]),b=(0,r.useCallback)((({index:e=0,teaParams:t,reportTeaParams:o,itemListKey:n,itemListConfigId:i})=>{const r=f(e,n,i,t);d.openImmersivePlayer(r),p.current=Number(Date.now());const a=g?Qi.U.ClickComment:Qi.U.ClickPreviewCard,l=qi.L.getScreenRatio(),s=Object.assign(Object.assign(Object.assign({},null!=o?o:t),l),{enter_method:a,play_mode:"immersive_player"});ai.f.sendEvent("enter_immersive_player",s),qi.L.handleEnterBrowserOpt(s)}),[f,p,d]),x=(0,r.useCallback)((()=>{m("close-browser-mode")}),[m]);return(0,n.FD)(Ce.g.Provider,{value:{showBrowserMode:({index:e,teaParams:t,reportTeaParams:o,itemListKey:n,id:i})=>{h()||b({index:e,teaParams:t,reportTeaParams:o,itemListKey:n,itemListConfigId:i})},closeBrowserMode:x,isBrowserModeShowing:s,isLiveBrowserShowing:s},children:[(0,n.Y)(t,Object.assign({},o)),(0,n.Y)(Zi,{})]})};return i.displayName=`WithImmersivePlayer(${null!==(o=t.displayName)&&void 0!==o?o:t.name})`,i})({itemListKey:e})(c),g=e=>{const{enableImmersivePlayer:t}=(0,Ki.uA)();return t?(0,n.Y)(v,Object.assign({},e)):(0,n.Y)(m,Object.assign({},e))};return g.displayName=`WithOverlayPlayer(${null!==(p=c.displayName)&&void 0!==p?p:c.name})`,g}},22174:(e,t,o)=>{var n;o.d(t,{U:()=>n}),function(e){e.ClickComment="click_comment",e.ClickPreviewCard="click_preview_card",e.ClickX="click_x",e.ClickBackground="click_background",e.Keyboard="keyboard",e.Navigate="navigate",e.Refresh="refresh"}(n||(n={}))},69794:(e,t,o)=>{o.d(t,{Cd:()=>u});var n=o(40099),i=o(16085),r=o(93608),a=o(65852),l=o(32125),s=o(36825);const d=n.createRef(),u=()=>{const{reportExitImmersivePlayer:e}=(()=>{const{teaParams:e}=(0,s.Z)((e=>({teaParams:e.teaParams})),l.bN);return{reportExitImmersivePlayer:(0,n.useCallback)((t=>{if(!t||!d.current)return;const o=Number(new Date),n=Object.assign(Object.assign(Object.assign(Object.assign({},a.L.getScreenRatio()),{duration:d.current?(o-d.current)/1e3:void 0}),e),{enter_method:t,play_mode:"immersive_player"});a.L.handleExitBrowser(n),r.f.sendEvent("exit_immersive_player",n),d.current=null}),[e])}})(),t=(0,i.kh)(),o=(0,n.useCallback)((o=>{e(o),t.closeImmersivePlayer()}),[t,e]);return{enterTimeRef:d,closeImmersivePlayer:o,reportExitImmersivePlayer:e}}},36825:(e,t,o)=>{o.d(t,{Z:()=>d,w:()=>s});var n=o(79983),i=o(46682),r=o(16085),a=o(92597),l=o(32125);const s=e=>{const[t]=(0,i.S)(n.O,{selector:t=>{var o;return null!==(o=t[null!=e?e:""])&&void 0!==o?o:{list:[]}},dependencies:[e]});return t},d=(...[e,t])=>{var o;const n=(0,r.Z9)(e,t),i=(0,r.Z9)((e=>e),l.bN),d=i.itemListSourceConfig,u=s("single"===(null==d?void 0:d.mode)?d.itemListKey:void 0);return"single"===(null==d?void 0:d.mode)?(0,a.D)(d.itemListKey)?n:e(Object.assign(Object.assign({},i),{itemList:null!==(o=u.list)&&void 0!==o?o:[]})):n}},62696:(e,t,o)=>{o.d(t,{V:()=>l});var n=o(40099),i=o(11072),r=o(92502),a=o(60484);const l=({item:e})=>{const{imagePost:t,id:o=""}=(0,a.L$)(e),l=(0,i.RA)(o),s=(0,i.sX)(o),d=(0,i.xr)(),{selectedTranslationLanguage:u,isReady:c}=(0,r.RD)((e=>({selectedTranslationLanguage:e.selectedTranslationLanguage,isReady:e.isReady})));return(0,n.useEffect)((()=>{s&&c&&d.getPhotoTitleTranslation({target_lang:u,item_id:o})}),[s,o,d,u,c]),s?l:null==t?void 0:t.title}},2191:(e,t,o)=>{o.d(t,{G:()=>v});var n=o(24643),i=o(40099),r=o(77976),a=o(91257),l=o(11072),s=o(25616),d=o(93341),u=o(15936),c=o(62186),p=o(26290);const m=(0,c.default)(p.F.P1,{target:"ea6l3fv0"})({cursor:"pointer",":hover":{textDecoration:"underline"}},"label:StyledDescriptionTranslationToggleText;"),h=(0,r.w)(m),v=(0,i.memo)((({itemId:e,authorId:t})=>{var o;const r=a.Jr[null!==(o=(0,d.RT)())&&void 0!==o?o:-1],c=(0,l.xr)(),p=(0,l.sX)(e),m=(0,s.s)(),v=(0,i.useMemo)((()=>({group_id:e,author_id:t,play_mode:r})),[e,t,r]),g=m(p?"Web_buildVideoTranslations_seeOriginal":"Web_buildVideoTranslations_seeTrans"),f=(0,i.useCallback)((t=>{t.stopPropagation(),t.preventDefault(),c.setShowTranslation(e,!p)}),[p,e,c]),b=(0,u.B)(f);return(0,n.jsx)(h,{color:"UIText3",weight:"medium",onClick:f,onKeyDown:b,etClick:{etName:p?"click_see_original":"click_see_translation",etParams:v},children:g})}))},68182:(e,t,o)=>{o.d(t,{A:()=>g});var n,i=o(24643),r=o(40099),a=o(62186),l=o(39522),s=o(72153);!function(e){e[e.OneColumn=0]="OneColumn",e[e.OneColumnDarkOnly=1]="OneColumnDarkOnly",e[e.OneColumnShare=2]="OneColumnShare",e[e.BrowserMode=3]="BrowserMode"}(n||(n={}));const d=(e,t)=>1===e?l.J:t;function u({styleType:e,shouldOptimizeCta:t,colors:o,disabled:n}){switch(e){case 0:case 1:case 2:return{flexDirection:"column"};case 3:return[{flexDirection:"row"},t&&[{borderRadius:"40px",padding:"8px 12px 8px 12px",height:"40px",backgroundColor:o.BGInput},!n&&{"&:hover":{backgroundColor:o.BGInput2},"&:active":{backgroundColor:"rgba(22, 24, 35, .14)"}}]];default:return null}}const c=(0,a.default)("button",{target:"e1hk3hf90"})((({styleType:e,shouldOptimizeCta:t,theme:{direction:o,colors:n}})=>[s.WA,{position:"relative",display:"flex",alignItems:"center",cursor:"pointer",":disabled":{cursor:"default",color:d(e,n).TextPrimary}},u({styleType:e,direction:o,shouldOptimizeCta:t,colors:d(e,n)})]),"label:ButtonActionItem;");function p({styleType:e,direction:t,shouldOptimizeCta:o}){switch(e){case 1:case 0:return[{marginTop:"8px",marginBottom:"6px"},(0,s.jJ)({max:768,style:{width:"32px",height:"32px",padding:"6px",svg:{width:"20px",height:"20px"}}})];case 2:return[{padding:"0",marginTop:"8px",marginBottom:"6px"}];case 3:return[!o&&{padding:"6px"},(0,s.mp)({direction:t,marginEnd:o?"8px":"6px"})];default:return null}}const m=(0,a.default)("span",{target:"e1hk3hf91"})((({shouldOptimizeCta:e,styleType:t,theme:{direction:o,colors:n}})=>[{display:"flex",justifyContent:"center",alignItems:"center",fontSize:"0px",borderRadius:"50%",transition:"all ease-in-out 200ms",cursor:"pointer"},(!e||3!==t)&&{width:3===t?"32px":"48px",height:3===t?"32px":"48px"},2===t||e&&3===t?null:{backgroundColor:d(t,n).BGInput,[`${c}:not(:disabled) &:hover`]:{backgroundColor:d(t,n).BGInput2},[`${c}:not(:disabled) &:active`]:{backgroundColor:"rgba(22, 24, 35, .14)"}},p({styleType:t,direction:o,shouldOptimizeCta:e})]),"label:SpanIconWrapper;"),h=(0,a.default)("strong",{target:"e1hk3hf92"})((({theme:e,styleType:t})=>[(0,s.zy)({theme:e,typography:"P4"}),{color:d(null!=t?t:0,e.colors).TextSecondary}]),{textAlign:"center"},"label:StrongText;");var v=o(88920);const g=(0,r.memo)((0,r.forwardRef)((function(e,t){const{text:o,Icon:n,styleType:a,disabled:l,children:s,e2eTag:d,style:u,ariaLabel:p,ariaPressed:g,ariaExpanded:f}=e,b=(0,r.useRef)(null),{shouldOptimizeCta:x}=(0,v.kb)(),_=(0,r.useCallback)((()=>{var e,t;return null===(t=Array.from(null===(e=b.current)||void 0===e?void 0:e.querySelectorAll("*")))||void 0===t?void 0:t.includes(document.activeElement)}),[]),y=(0,r.useCallback)((()=>{var e;null===(e=b.current)||void 0===e||e.focus()}),[]);return(0,r.useImperativeHandle)(t,(()=>({hasFocusForChildren:_,setFocus:y}))),(0,i.jsxs)(c,{styleType:a,type:"button",onClick:t=>{e.onClick&&(e.onClick(t),t.stopPropagation())},onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onKeyDown:e.onKeyDown,onBlur:e.onBlur,disabled:l,"aria-label":p,"aria-pressed":g,"aria-expanded":f,ref:b,shouldOptimizeCta:x,children:[(0,i.jsx)(m,{style:null!=u?u:{},styleType:a,"data-e2e":`${d}-icon`,shouldOptimizeCta:x,children:n}),(0,i.jsx)(h,{"data-e2e":`${d}-count`,styleType:a,children:o}),s]})})))},7772:(e,t,o)=>{o.d(t,{k:()=>f});var n=o(24643),i=o(67518),r=o(95197),a=o(40099),l=o(30866),s=o(58305),d=o(25616),u=o(58542),c=o(66458),p=o(16085),m=o(77976),h=o(19442),v=o(32125);const g=(0,m.w)(l.X),f=(0,a.memo)((function(e){const{useLargeToggle:t=!1,tooltipOffset:o=-11,hideTooltip:l,iconSize:m,item:f,playMode:b}=e,{colors:x}=(0,i.u)(),_=(0,d.s)(),y=(0,c.K)(),C=(0,h.JD)((e=>e.showingBrowserMode),v.bN),k=(0,p.Z9)((e=>e.isOpen),v.bN),w=(0,a.useMemo)((()=>({background:t?x.ConstBGInverse3:x.ConstBGInverse1,paddingInlineStart:"12px",paddingInlineEnd:"12px",fontWeight:500,fontSize:"14px",lineHeight:"18px",display:l?"none":""})),[t,x.ConstBGInverse3,x.ConstBGInverse1,l]),j=(0,a.useMemo)((()=>({author_id:null==f?void 0:f.authorId,group_id:null==f?void 0:f.id,play_mode:b})),[f,b]),I=(0,a.useCallback)((()=>{y.setIsCaptionModalOn(!0)}),[y]);return(0,n.jsx)(r.m,{fullscreenAdjust:!0,overlay:_("claSeeTranslation_fyp_longPressPanel_captionsLabelV2"),overlayInnerStyle:w,arrow:!1,align:{offset:[0,o]},children:(0,n.jsx)(g,{onClick:I,onMouseDown:s.dG,useLargeToggle:t,etImpression:{etName:"show_captions_button",etParams:j,unobserveAfterIntersect:!0,skip:"one_column"===b&&(C||k)},etClick:{etName:"click_captions_button",etParams:j},children:(0,n.jsx)(u.qY7,{style:{fill:"rgba(255, 255, 255, 1)",width:null!=m?m:t?20:21,height:null!=m?m:t?20:21}})})})}))},45958:(e,t,o)=>{o.d(t,{c:()=>l});var n=o(24643),i=o(40099),r=o(95197),a=o(25616);const l=e=>{const{visible:t=!1,duration:o=5e3,onHide:l,text:s,children:d,onShow:u,closeByActive:c}=e,p=(0,a.s)(),[m,h]=(0,i.useState)(!1);(0,i.useEffect)((()=>{h(t)}),[t]),(0,i.useEffect)((()=>{!m&&l&&l(),m&&(null==u||u(),setTimeout((()=>{h(!1)}),o))}),[l,m,o,u]);const v=(0,i.useCallback)((()=>{c&&h(!1)}),[c]),g=(0,i.useMemo)((()=>({padding:"12px"})),[]),f=(0,i.useMemo)((()=>({keepParent:!0})),[]);return(0,n.jsx)(r.m,{destroyTooltipOnHide:f,onClick:v,placement:"top",overlay:p(s),tooltipTheme:"blue",visible:m,overlayInnerStyle:g,children:d})}},30018:(e,t,o)=>{o.d(t,{W:()=>i,X:()=>r});var n=o(10646);const i=e=>{var t;return-1!==(null!==(t=n.v7.getItem("has_use_seek_bar"))&&void 0!==t?t:[]).indexOf(e)},r=e=>{var t;const o=null!==(t=n.v7.getItem("has_use_seek_bar"))&&void 0!==t?t:[];-1===o.indexOf(e)&&o.push(e),n.v7.setItem("has_use_seek_bar",o)}},82668:(e,t,o)=>{o.d(t,{_:()=>v,Y:()=>h});var n=o(24643),i=o(65404),r=o(34393),a=o(67518),l=o(40099),s=o(58305),d=o(16680),u=o(80279);const c=(e,t)=>(e-t)*u.Hg+"px",p=({originIndex:e,startIndex:t,maxShowNum:o,num:n})=>0===e||e===n-1||e>t&&e<t+o-1?{width:"6px",height:"6px"}:{width:"4px",height:"4px"},m=(0,l.memo)((({photoVideoRef:e,item:t,maxShowNum:o=6})=>{var m,h;const v=(null!==(h=null===(m=null==t?void 0:t.imagePost)||void 0===m?void 0:m.images)&&void 0!==h?h:[]).length,[g,f]=(0,l.useState)(0),{direction:b}=(0,a.u)(),x=(e=>{const[t,o]=(0,l.useState)(0);return(0,l.useEffect)((()=>{var t,n;null===(n=null===(t=e.current)||void 0===t?void 0:t.swiper)||void 0===n||n.onActiveIndexChange((e=>{o(e.realIndex)}))}),[e]),t})(e),{disabledLeft:_,disabledRight:y}=(0,l.useMemo)((()=>({disabledLeft:0===x,disabledRight:x===v-1})),[x,v]),{handleSwitchLeft:C,handleSwitchRight:k}=(({photoVideoRef:e,disabledLeft:t,disabledRight:o})=>{const n=(0,d.mZ)((e=>e.isOpen)),i=(0,l.useCallback)((o=>()=>{var n,i,r;t||null===(r=null===(i=null===(n=e.current)||void 0===n?void 0:n.swiper)||void 0===i?void 0:i.slidePrev)||void 0===r||r.call(i,"keyboard"===o?"keyboard":"manual_click")}),[t,e]),r=(0,l.useCallback)((t=>()=>{var n,i,r;o||null===(r=null===(i=null===(n=e.current)||void 0===n?void 0:n.swiper)||void 0===i?void 0:i.slideNext)||void 0===r||r.call(i,"keyboard"===t?"keyboard":"manual_click")}),[o,e]),a=(0,l.useMemo)((()=>{const e=new Map;return e.set(37,i("keyboard")),e.set(39,r("keyboard")),e}),[i,r]),s=(0,l.useCallback)((e=>{const t=Number(e.keyCode);27!==t&&["input","textarea"].includes(e.target.tagName.toLocaleLowerCase())||"true"===e.target.getAttribute("contenteditable")||n||(e.preventDefault(),!a.has(t))||a.get(t)()}),[n,a]);return(0,l.useEffect)((()=>(document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)})),[s]),{handleSwitchLeft:i,handleSwitchRight:r}})({photoVideoRef:e,disabledLeft:_,disabledRight:y});(0,l.useEffect)((()=>{v<o||(x-g>=o-1?f(x-o+(x===v-1?1:2)):x<=g&&0!==g&&f(x-(0===x?0:1)))}),[x,o,v,g]);const w=(0,l.useCallback)((()=>{if(v>=o){const e="ltr"===b?"left":"right";return(0,n.jsx)(u.DM,{children:(0,n.jsx)(u.Te,{dynamic:!0,num:o,children:Array.from({length:v}).map(((t,i)=>(0,n.jsx)(u.AS,{index:i,style:{[e]:c(i,g)},children:(0,n.jsx)(u.pv,{active:x===i,style:Object.assign({},p({originIndex:i,startIndex:g,maxShowNum:o,num:v}))})},i)))})})}return(0,n.jsx)(u.DM,{children:(0,n.jsx)(u.Te,{num:v,children:Array.from({length:v}).map(((e,t)=>(0,n.jsx)(u.AS,{index:t,children:(0,n.jsx)(u.pv,{active:x===t})},t)))})})}),[x,v,g,b,o]);return(0,n.jsxs)(u.NY,{onClick:s.Gu,children:[(0,n.jsx)(u.q5,{disabled:_,onClick:C("slide"),children:(0,n.jsx)(i.p,{size:20})}),w(),(0,n.jsx)(u.f4,{disabled:y,onClick:k("slide"),children:(0,n.jsx)(r.a,{size:20})})]})})),h=m,v=(0,l.memo)((e=>(0,n.jsx)(u.bI,{children:(0,n.jsx)(u.wB,{children:(0,n.jsx)(m,Object.assign({},e))})})))},80279:(e,t,o)=>{o.d(t,{AS:()=>v,DM:()=>s,Hg:()=>a,NY:()=>h,Te:()=>d,bI:()=>p,f4:()=>c,pv:()=>g,q5:()=>u,wB:()=>m});var n=o(62186),i=o(72153),r=o(17781);const a=12,l=({theme:{colors:e,direction:t},disabled:o=!1})=>Object.assign({display:"flex",justifyContent:"center",alignItems:"center",width:"36px",height:"36px",borderRadius:"100%",color:o?e.ConstTextInverse5:e.ConstTextInverse,cursor:"pointer",transform:`rotate(${"rtl"===t?"180deg":"0"})`},(0,r.I)()),s=(0,n.default)("div",{target:"exksjhw0"})({margin:"0 8px",padding:"12px 17px",borderRadius:"18px"},"label:DivPaginationWrapper;"),d=(0,n.default)("div",{target:"exksjhw1"})((({num:e})=>({position:"relative",display:"flex",overflow:"hidden",width:a*e+"px",height:`${a}px`})),"label:DivPaginationContainer;"),u=(0,n.default)("div",{target:"exksjhw2"})(l,"label:DivLeftArrow;"),c=(0,n.default)("div",{target:"exksjhw3"})(l,"label:DivRightArrow;"),p=(0,n.default)("div",{target:"exksjhw4"})((({theme:{colors:e}})=>({position:"absolute",bottom:0,width:"100%",height:"100%",cursor:"pointer",userSelect:"none","&:hover":{[s.toString()]:{backgroundColor:e.ConstBGInverse4},[u.toString()]:{backgroundColor:e.ConstBGInverse4},[c.toString()]:{backgroundColor:e.ConstBGInverse4}}})),"label:DivPhotoWrapper;"),m=(0,n.default)("div",{target:"exksjhw5"})({position:"absolute",left:0,right:0,bottom:0},"label:DivPhotoControlWrapper;"),h=(0,n.default)("div",{target:"exksjhw6"})({display:"flex",position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",height:"36px"},"label:DivPhotoControl;"),v=(0,n.default)("div",{target:"exksjhw7"})((({theme:{direction:e},index:t})=>[{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",width:`${a}px`,height:`${a}px`,transition:"all 200ms cubic-bezier(.65, 0, .35, 1)"},(0,i.mp)({direction:e,start:t*a})]),"label:DivDotWrapper;"),g=(0,n.default)("div",{target:"exksjhw8"})((({active:e})=>({width:"6px",height:"6px",margin:"3px",borderRadius:"100%",backgroundColor:e?"#fff":"rgba(255, 255, 255, .6)",transition:"all 200ms cubic-bezier(.65, 0, .35, 1)"})),"label:DivDot;")}}]);