"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7859],{7859:(e,n,a)=>{a.d(n,{uR:()=>R,OB:()=>K,D0:()=>J,o0:()=>H,f3:()=>N,Vq:()=>G});var o=a(24643),t=a(40099),l=a(88091),s=a(47172),i=a(82715),r=a(11983),d=a(87905),c=a(97397),h=a(93608),p=a(67823),_=a(73635),u=a(89558),f=a(88920),g=a(16469),m=a(25616),k=a(48720),x=a(65365),b=(a(34393),a(62186)),C=a(72153);const w=(0,b.default)("div",{target:"esswpn50"})({position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},"label:DivModalWrapper;"),S=(0,b.default)("div",{target:"esswpn51"})((({theme:{colors:e}})=>({fontSize:"24px",lineHeight:"36px",fontWeight:700,color:e.TextPrimary,padding:"24px",width:"100%",borderBottom:`0.5px solid ${e.LinePrimary2}`,display:"flex",justifyContent:"space-between",maxWidth:"700px"})),"label:DivModalHeader;"),v=(0,b.default)("div",{target:"esswpn52"})({maxWidth:"700px",padding:"24px 24px 16px 24px"},"label:DivModalBody;"),y=(0,b.default)("div",{target:"esswpn53"})((({theme:{colors:e}})=>({fontSize:"14px",fontWeight:400,lineHeight:"22px",color:e.TextSecondary,whiteSpace:"pre-wrap"})),"label:DivTextPara;"),M=(0,b.default)("div",{target:"esswpn54"})((({theme:{colors:e,isDark:n},checked:a})=>({display:"flex",width:"calc(100% - 48px)",paddingTop:"16px",paddingBottom:"24px",alignItems:"center",borderTop:`0.5px solid ${e.LinePrimary2}`,justifyContent:"space-between",fontSize:"14px",lineHeight:"24px",fontWeight:400,color:e.TextPrimary,"button div:hover":!a&&n?{background:"rgba(255, 255, 255, 0.2)"}:{}})),"label:DivSwitchSection;"),P=(0,b.default)("a",{target:"esswpn55"})((({theme:{colors:e,direction:n}})=>[{fontSize:"14px",fontWeight:400,lineHeight:"22px",color:e.Primary,textDecoration:"none",outline:"none",":visited":{color:e.Primary}},(0,C.mp)({direction:n,marginStart:"8px"})]),"label:ALink;"),z=(0,b.default)("div",{target:"esswpn56"})((({theme:{colors:e}})=>({padding:"24px",width:"100%",borderTop:`0.5px solid ${e.LinePrimary2}`,display:"flex",justifyContent:"flex-end"})),"label:DivModalFooter;"),F=(0,b.default)("div",{target:"esswpn57"})({display:"flex",justifyContent:"flex-end",alignItems:"center",cursor:"pointer"},"label:DivCloseMarkWrapper;");var L=a(19442),O=a(49057),E=a(58305),j=a(2408),$=a(99374),D=a(16085),T=a(32125),A=a(57431);const W=i.OZ.searchReminder,B=(e,n)=>{const[a,o]=(0,j.HY)((e=>e.isShowingToast),T.bN);return(0,t.useCallback)((()=>{a||(o.setIsShowingToast(!0),setTimeout((()=>{o.setIsShowingToast(!1)}),3e3),r.F.open({content:e,duration:3,style:n?{width:"400px"}:{}}))}),[a,n,o,e])},I=e=>(0,m.s)()(e?"nonpersonalizedFeeds_LIVEfeed_label_mainString_personalizationOn":"nonpersonalizedFeeds_LIVEfeed_label_mainString"),H=e=>{const n=I(e);return B(n,!0)},K=e=>{var n;const{hasNonPersonalizedMenu:a}=(0,f.cE)(),{user:{uid:o=""}={}}=null!==(n=(0,O.W)((()=>["user"]),[]))&&void 0!==n?n:{},t=(0,j.JW)((n=>e?n.isFeedPersonalized:n.isSearchPersonalized),T.bN);return!((0,$.Sw)(o)||a||!e)||t},N=(e,n)=>{const{hasNonPersonalizedMenu:a}=(0,f.cE)(),o=K(!0);let l=H(o);void 0!==e&&(l=e),(0,t.useEffect)((()=>{a&&(!n&&!o||(0,E.Hd)(u.oG,void 0))&&((0,E.X)(u.oG),l())}),[])},R=()=>(0,j.JW)((e=>e.isManageModalOpen),T.bN),U={expires:365},G=(e,n)=>{var a;const{user:o}=(0,A.x)(),l=null!==(a=null==o?void 0:o.uid)&&void 0!==a?a:"",s=n?u.Lq:e?u.MW:u.eh;return(0,t.useCallback)((n=>{if(!l)return void(e&&p.A.set(u.Fc,n?"0":"1",U));const a=l,o=p.A.get(s);let t=[];if(o){t=JSON.parse(o);const e=t.indexOf(a),l=e>=0;n?l&&t.splice(e,1):l||t.push(a)}else t=[a];p.A.set(s,JSON.stringify(t),U)}),[e,s,l])},J=(e={})=>{const{beforeModalCloseCallback:n,beforeStatusChangeCallback:a,afterModalCloseCallback:r,afterStatusChangeCallback:p,beforeModalOpenCallback:f,afterModalOpenCallback:b,onSwitchClickCallback:C,onLearnMoreClickCallback:O,isFeed:$,preSearchId:T,isLiveFeed:A,showToastRightAfterChange:H}=e,N=(0,m.s)(),{pathname:R}=(0,s.useLocation)(),U=!Boolean((0,s.matchPath)(R,{path:W}))&&Boolean((0,s.matchPath)(R,{path:i.OZ.searchHome})),J=K($),V=(0,j.Qi)(),{showingBrowserMode:Z,itemListKey:q}=(0,L.JD)((e=>({showingBrowserMode:e.showingBrowserMode,itemListKey:e.itemListKey}))),Q=(0,D.Z9)((e=>{var n;if("single"===(null===(n=e.itemListSourceConfig)||void 0===n?void 0:n.mode))return e.itemListSourceConfig.itemListKey})),[X,Y]=(0,t.useState)(J),ee=(0,t.useCallback)((()=>{null==n||n()}),[n]),ne=$&&!A,ae="explore"===q||"explore"===Q,oe=(0,t.useCallback)((e=>{var a,o,t;null==n||n(),"backdrop"!==e&&"closeButton"!==e||(Y(J),ne?k.$.handleCloseManageFeedsPopUp():A||(o=null!==(a=h.f.commonParams.page_name)&&void 0!==a?a:"",t="backdrop"===e?"click_blank_space":"click_close",x.$G.handleManageSearchPopupClick({enter_from:o,button_type:t})),V.setIsManageModalOpen(!1)),null==r||r()}),[n,r,J,ne,A,V]),te=(0,l.eb)({closeOnBackdropClick:!0,closeOnEsc:!1,onCloseComplete:oe,onClose:ee});(0,t.useEffect)((()=>{Y(J)}),[J]);const le=G($),se=(0,t.useCallback)((()=>{var e;null==f||f(),V.setIsManageModalOpen(!0),Y(J),te.open(),null==b||b(),A||((e,n,a,o)=>{if(o)return k.$.handleClickManageFeeds(),void k.$.handleManageFeedsPopUp();x.$G.handleManageSearchPopupShow({enter_from:e,switch_status:n?"on":"off",search_id:a})})(null!==(e=h.f.commonParams.page_name)&&void 0!==e?e:"",J,U?T:void 0,$)}),[f,V,te,b,A,J,U,T,$]),ie=(0,t.useCallback)((()=>{k.$.handleCloseManageFeedsPopUp(),te.close()}),[te]),re=(0,t.useCallback)((e=>{ne&&k.$.handleSwitchPersonalizationToggle({value:e?"on":"off"}),null==C||C(e),Y(e)}),[ne,C]),de=((e,n)=>{const a=I(e),t=(0,o.jsxs)("div",{onClick:n,children:[a,n]});return B(t)})(X),ce=(0,t.useCallback)((()=>{var e;const n=J!==X;n&&(null==a||a(X),V[$?"setIsFeedPersonalized":"setIsSearchPersonalized"](X),le(X),H?de():(0,E.J2)(u.oG,"1"),null==p||p(X),$&&(g.lL.removeAll(),setTimeout((()=>{Z&&!A?window.location.replace(ae?"/explore":"/"):window.location.reload()}),100))),A||($?k.$.handleConfirmPersonalizationStatusChange({flag:n?1:0,status:X?"on":"off"}):((e,n,a)=>{let o;o=n===a?a?4:3:a?2:1,x.$G.handleManageSearchPopupClick({enter_from:e,button_type:"click_done",switch_status:o})})(null!==(e=h.f.commonParams.page_name)&&void 0!==e?e:"",J,X)),ie()}),[J,X,A,ae,ie,a,V,$,le,p,Z]),he=(0,t.useCallback)((()=>{null==O||O()}),[O]),pe=(0,t.useMemo)((()=>{if($&&J){const e=N("filterKeywordsWeb_fypEntry_modal_desc1",{s_keywordLink:"$$kw-link$$"}).split("$$kw-link$$");return[(0,o.jsx)("p",{children:[e[0],(0,o.jsx)(P,{href:"https://www.tiktok.com/setting/keyword-filtering",target:"_blank",children:N("filterKeywordsWeb_fypEntry_manageFeeds_popup")},"kw-link"),e[1]]},"desc1"),(0,o.jsx)("p",{children:N("filterKeywordsWeb_fypEntry_modal_desc2",{s_learnLink:""})},"desc2")]}return N($?"nonpersonalizedFeeds_turnOn_modal_toggle_bodyFull":J?"personalisedSearch_searchResults_actionSheet_bodyPara1":"personalisedSearch_searchResults_actionSheet_bodyPara1V2")}),[$,J,N]);return{PersonalizedModal:(0,t.useMemo)((()=>{const e=N($?"nonpersonalizedFeeds_turnOn_modal_toggle_headline":"personalisedSearch_searchResults_actionSheet_header");return(0,o.jsx)(l.nO,Object.assign({width:"Compact",height:"Compact"},te,{children:(0,o.jsxs)(w,{children:[(0,o.jsxs)(S,{children:[e,(0,o.jsx)(F,{onClick:ie,children:(0,o.jsx)(_.A,{width:32,height:32})})]}),(0,o.jsx)(v,{children:(0,o.jsxs)(y,{children:[pe,(0,o.jsx)(P,{href:"https://support.tiktok.com/en/using-tiktok/exploring-videos/managing-personalization-on-tiktok",target:"_blank",onClick:he,children:N($?"nonpersonalizedFeeds_modal_allScenarios_body_learnMore_articleLink":"personalisedSearch_searchResults_actionSheet_bodyPara2Bold1")})]})}),(0,o.jsxs)(M,{checked:X,children:[N($?"nonpersonalizedFeeds_settings_contentPreferences_entrypoint":"personalisedSearch_searchResults_actionSheet_toggle"),(0,o.jsx)(d.d,{checked:X,onChange:re})]}),(0,o.jsx)(z,{children:(0,o.jsx)(c.y,{buttonTheme:"primary",size:"medium",onClick:ce,children:N($?"nonpersonalizedFeeds_turnOn_modal_toggle_CTA":"personalisedSearch_searchResults_actionSheet_btn")})})]})}))}),[pe,ce,ie,he,re,$,te,X,N]),handleOpenModal:se,handleCloseModal:ie}}},48720:(e,n,a)=>{a.d(n,{$:()=>l});var o,t=a(93608);!function(e){e.On="on",e.Off="off"}(o||(o={}));const l={handleManageFeedsPopUp:()=>{t.f.sendEvent("manage_feeds_pop_up")},handleClickManageFeeds:()=>{t.f.sendEvent("click_manage_feeds")},handleCloseManageFeedsPopUp:()=>{t.f.sendEvent("close_manage_feeds_pop_up")},handleSwitchPersonalizationToggle:e=>{t.f.sendEvent("switch_personalization_toggle",e)},handleConfirmPersonalizationStatusChange:e=>{t.f.sendEvent("confirm_personalization_status_change",e)},handleShowSuggestedAccountInfo:()=>{t.f.sendEvent("show_suggested_account_info")},handleShowManageFeedsHalfSheet:()=>{t.f.sendEvent("show_manage_feeds_half_sheet")},handleClickInManageFeedsHalfSheet:()=>{t.f.sendEvent("click_in_manage_feeds_half_sheet")},handleCloseManageFeedsHalfSheet:()=>{t.f.sendEvent("close_manage_feeds_half_sheet")}}}}]);